function lS(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function ov(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uh={exports:{}},po={},dh={exports:{}},Ze={};var ox;function cS(){if(ox)return Ze;ox=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=v&&D[v]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,w={};function j(D,I,fe){this.props=D,this.context=I,this.refs=w,this.updater=fe||S}j.prototype.isReactComponent={},j.prototype.setState=function(D,I){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,I,"setState")},j.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function C(){}C.prototype=j.prototype;function _(D,I,fe){this.props=D,this.context=I,this.refs=w,this.updater=fe||S}var P=_.prototype=new C;P.constructor=_,N(P,j.prototype),P.isPureReactComponent=!0;var A=Array.isArray,$=Object.prototype.hasOwnProperty,E={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function Q(D,I,fe){var ue,xe={},ve=null,ae=null;if(I!=null)for(ue in I.ref!==void 0&&(ae=I.ref),I.key!==void 0&&(ve=""+I.key),I)$.call(I,ue)&&!L.hasOwnProperty(ue)&&(xe[ue]=I[ue]);var we=arguments.length-2;if(we===1)xe.children=fe;else if(1<we){for(var Pe=Array(we),Ae=0;Ae<we;Ae++)Pe[Ae]=arguments[Ae+2];xe.children=Pe}if(D&&D.defaultProps)for(ue in we=D.defaultProps,we)xe[ue]===void 0&&(xe[ue]=we[ue]);return{$$typeof:e,type:D,key:ve,ref:ae,props:xe,_owner:E.current}}function X(D,I){return{$$typeof:e,type:D.type,key:I,ref:D.ref,props:D.props,_owner:D._owner}}function ee(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function le(D){var I={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(fe){return I[fe]})}var T=/\/+/g;function Z(D,I){return typeof D=="object"&&D!==null&&D.key!=null?le(""+D.key):I.toString(36)}function Y(D,I,fe,ue,xe){var ve=typeof D;(ve==="undefined"||ve==="boolean")&&(D=null);var ae=!1;if(D===null)ae=!0;else switch(ve){case"string":case"number":ae=!0;break;case"object":switch(D.$$typeof){case e:case t:ae=!0}}if(ae)return ae=D,xe=xe(ae),D=ue===""?"."+Z(ae,0):ue,A(xe)?(fe="",D!=null&&(fe=D.replace(T,"$&/")+"/"),Y(xe,I,fe,"",function(Ae){return Ae})):xe!=null&&(ee(xe)&&(xe=X(xe,fe+(!xe.key||ae&&ae.key===xe.key?"":(""+xe.key).replace(T,"$&/")+"/")+D)),I.push(xe)),1;if(ae=0,ue=ue===""?".":ue+":",A(D))for(var we=0;we<D.length;we++){ve=D[we];var Pe=ue+Z(ve,we);ae+=Y(ve,I,fe,Pe,xe)}else if(Pe=b(D),typeof Pe=="function")for(D=Pe.call(D),we=0;!(ve=D.next()).done;)ve=ve.value,Pe=ue+Z(ve,we++),ae+=Y(ve,I,fe,Pe,xe);else if(ve==="object")throw I=String(D),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return ae}function ge(D,I,fe){if(D==null)return D;var ue=[],xe=0;return Y(D,ue,"","",function(ve){return I.call(fe,ve,xe++)}),ue}function K(D){if(D._status===-1){var I=D._result;I=I(),I.then(function(fe){(D._status===0||D._status===-1)&&(D._status=1,D._result=fe)},function(fe){(D._status===0||D._status===-1)&&(D._status=2,D._result=fe)}),D._status===-1&&(D._status=0,D._result=I)}if(D._status===1)return D._result.default;throw D._result}var z={current:null},U={transition:null},G={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:U,ReactCurrentOwner:E};function te(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:ge,forEach:function(D,I,fe){ge(D,function(){I.apply(this,arguments)},fe)},count:function(D){var I=0;return ge(D,function(){I++}),I},toArray:function(D){return ge(D,function(I){return I})||[]},only:function(D){if(!ee(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ze.Component=j,Ze.Fragment=r,Ze.Profiler=o,Ze.PureComponent=_,Ze.StrictMode=i,Ze.Suspense=f,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Ze.act=te,Ze.cloneElement=function(D,I,fe){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ue=N({},D.props),xe=D.key,ve=D.ref,ae=D._owner;if(I!=null){if(I.ref!==void 0&&(ve=I.ref,ae=E.current),I.key!==void 0&&(xe=""+I.key),D.type&&D.type.defaultProps)var we=D.type.defaultProps;for(Pe in I)$.call(I,Pe)&&!L.hasOwnProperty(Pe)&&(ue[Pe]=I[Pe]===void 0&&we!==void 0?we[Pe]:I[Pe])}var Pe=arguments.length-2;if(Pe===1)ue.children=fe;else if(1<Pe){we=Array(Pe);for(var Ae=0;Ae<Pe;Ae++)we[Ae]=arguments[Ae+2];ue.children=we}return{$$typeof:e,type:D.type,key:xe,ref:ve,props:ue,_owner:ae}},Ze.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},Ze.createElement=Q,Ze.createFactory=function(D){var I=Q.bind(null,D);return I.type=D,I},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(D){return{$$typeof:d,render:D}},Ze.isValidElement=ee,Ze.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:K}},Ze.memo=function(D,I){return{$$typeof:m,type:D,compare:I===void 0?null:I}},Ze.startTransition=function(D){var I=U.transition;U.transition={};try{D()}finally{U.transition=I}},Ze.unstable_act=te,Ze.useCallback=function(D,I){return z.current.useCallback(D,I)},Ze.useContext=function(D){return z.current.useContext(D)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(D){return z.current.useDeferredValue(D)},Ze.useEffect=function(D,I){return z.current.useEffect(D,I)},Ze.useId=function(){return z.current.useId()},Ze.useImperativeHandle=function(D,I,fe){return z.current.useImperativeHandle(D,I,fe)},Ze.useInsertionEffect=function(D,I){return z.current.useInsertionEffect(D,I)},Ze.useLayoutEffect=function(D,I){return z.current.useLayoutEffect(D,I)},Ze.useMemo=function(D,I){return z.current.useMemo(D,I)},Ze.useReducer=function(D,I,fe){return z.current.useReducer(D,I,fe)},Ze.useRef=function(D){return z.current.useRef(D)},Ze.useState=function(D){return z.current.useState(D)},Ze.useSyncExternalStore=function(D,I,fe){return z.current.useSyncExternalStore(D,I,fe)},Ze.useTransition=function(){return z.current.useTransition()},Ze.version="18.3.1",Ze}var lx;function Xc(){return lx||(lx=1,dh.exports=cS()),dh.exports}var cx;function uS(){if(cx)return po;cx=1;var e=Xc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var g,v={},b=null,S=null;m!==void 0&&(b=""+m),f.key!==void 0&&(b=""+f.key),f.ref!==void 0&&(S=f.ref);for(g in f)i.call(f,g)&&!l.hasOwnProperty(g)&&(v[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return{$$typeof:t,type:d,key:b,ref:S,props:v,_owner:o.current}}return po.Fragment=r,po.jsx=u,po.jsxs=u,po}var ux;function dS(){return ux||(ux=1,uh.exports=uS()),uh.exports}var s=dS(),dc={},hh={exports:{}},kr={},fh={exports:{}},ph={};var dx;function hS(){return dx||(dx=1,(function(e){function t(U,G){var te=U.length;U.push(G);e:for(;0<te;){var D=te-1>>>1,I=U[D];if(0<o(I,G))U[D]=G,U[te]=I,te=D;else break e}}function r(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var G=U[0],te=U.pop();if(te!==G){U[0]=te;e:for(var D=0,I=U.length,fe=I>>>1;D<fe;){var ue=2*(D+1)-1,xe=U[ue],ve=ue+1,ae=U[ve];if(0>o(xe,te))ve<I&&0>o(ae,xe)?(U[D]=ae,U[ve]=te,D=ve):(U[D]=xe,U[ue]=te,D=ue);else if(ve<I&&0>o(ae,te))U[D]=ae,U[ve]=te,D=ve;else break e}}return G}function o(U,G){var te=U.sortIndex-G.sortIndex;return te!==0?te:U.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var f=[],m=[],g=1,v=null,b=3,S=!1,N=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(U){for(var G=r(m);G!==null;){if(G.callback===null)i(m);else if(G.startTime<=U)i(m),G.sortIndex=G.expirationTime,t(f,G);else break;G=r(m)}}function A(U){if(w=!1,P(U),!N)if(r(f)!==null)N=!0,K($);else{var G=r(m);G!==null&&z(A,G.startTime-U)}}function $(U,G){N=!1,w&&(w=!1,C(Q),Q=-1),S=!0;var te=b;try{for(P(G),v=r(f);v!==null&&(!(v.expirationTime>G)||U&&!le());){var D=v.callback;if(typeof D=="function"){v.callback=null,b=v.priorityLevel;var I=D(v.expirationTime<=G);G=e.unstable_now(),typeof I=="function"?v.callback=I:v===r(f)&&i(f),P(G)}else i(f);v=r(f)}if(v!==null)var fe=!0;else{var ue=r(m);ue!==null&&z(A,ue.startTime-G),fe=!1}return fe}finally{v=null,b=te,S=!1}}var E=!1,L=null,Q=-1,X=5,ee=-1;function le(){return!(e.unstable_now()-ee<X)}function T(){if(L!==null){var U=e.unstable_now();ee=U;var G=!0;try{G=L(!0,U)}finally{G?Z():(E=!1,L=null)}}else E=!1}var Z;if(typeof _=="function")Z=function(){_(T)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ge=Y.port2;Y.port1.onmessage=T,Z=function(){ge.postMessage(null)}}else Z=function(){j(T,0)};function K(U){L=U,E||(E=!0,Z())}function z(U,G){Q=j(function(){U(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){N||S||(N=!0,K($))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(U){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var te=b;b=G;try{return U()}finally{b=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=b;b=U;try{return G()}finally{b=te}},e.unstable_scheduleCallback=function(U,G,te){var D=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?D+te:D):te=D,U){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=te+I,U={id:g++,callback:G,priorityLevel:U,startTime:te,expirationTime:I,sortIndex:-1},te>D?(U.sortIndex=te,t(m,U),r(f)===null&&U===r(m)&&(w?(C(Q),Q=-1):w=!0,z(A,te-D))):(U.sortIndex=I,t(f,U),N||S||(N=!0,K($))),U},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(U){var G=b;return function(){var te=b;b=G;try{return U.apply(this,arguments)}finally{b=te}}}})(ph)),ph}var hx;function fS(){return hx||(hx=1,fh.exports=hS()),fh.exports}var fx;function pS(){if(fx)return kr;fx=1;var e=Xc(),t=fS();function r(n){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,a){u(n,a),u(n+"Capture",a)}function u(n,a){for(o[n]=a,n=0;n<a.length;n++)i.add(a[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function b(n){return f.call(v,n)?!0:f.call(g,n)?!1:m.test(n)?v[n]=!0:(g[n]=!0,!1)}function S(n,a,c,h){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return h?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function N(n,a,c,h){if(a===null||typeof a>"u"||S(n,a,c,h))return!0;if(h)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function w(n,a,c,h,p,y,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=c,this.propertyName=n,this.type=a,this.sanitizeURL=y,this.removeEmptyString=k}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new w(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var a=n[0];j[a]=new w(a,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new w(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new w(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new w(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new w(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new w(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new w(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new w(n,5,!1,n.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function _(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var a=n.replace(C,_);j[a]=new w(a,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var a=n.replace(C,_);j[a]=new w(a,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var a=n.replace(C,_);j[a]=new w(a,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new w(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new w(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,a,c,h){var p=j.hasOwnProperty(a)?j[a]:null;(p!==null?p.type!==0:h||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(N(a,c,p,h)&&(c=null),h||p===null?b(a)&&(c===null?n.removeAttribute(a):n.setAttribute(a,""+c)):p.mustUseProperty?n[p.propertyName]=c===null?p.type===3?!1:"":c:(a=p.attributeName,h=p.attributeNamespace,c===null?n.removeAttribute(a):(p=p.type,c=p===3||p===4&&c===!0?"":""+c,h?n.setAttributeNS(h,a,c):n.setAttribute(a,c))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),E=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),le=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),U=Symbol.iterator;function G(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var te=Object.assign,D;function I(n){if(D===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);D=a&&a[1]||""}return`
`+D+n}var fe=!1;function ue(n,a){if(!n||fe)return"";fe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(H){var h=H}Reflect.construct(n,[],a)}else{try{a.call()}catch(H){h=H}n.call(a.prototype)}else{try{throw Error()}catch(H){h=H}n()}}catch(H){if(H&&h&&typeof H.stack=="string"){for(var p=H.stack.split(`
`),y=h.stack.split(`
`),k=p.length-1,R=y.length-1;1<=k&&0<=R&&p[k]!==y[R];)R--;for(;1<=k&&0<=R;k--,R--)if(p[k]!==y[R]){if(k!==1||R!==1)do if(k--,R--,0>R||p[k]!==y[R]){var M=`
`+p[k].replace(" at new "," at ");return n.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",n.displayName)),M}while(1<=k&&0<=R);break}}}finally{fe=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?I(n):""}function xe(n){switch(n.tag){case 5:return I(n.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return n=ue(n.type,!1),n;case 11:return n=ue(n.type.render,!1),n;case 1:return n=ue(n.type,!0),n;default:return""}}function ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case E:return"Portal";case X:return"Profiler";case Q:return"StrictMode";case Z:return"Suspense";case Y:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case le:return(n.displayName||"Context")+".Consumer";case ee:return(n._context.displayName||"Context")+".Provider";case T:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ge:return a=n.displayName||null,a!==null?a:ve(n.type)||"Memo";case K:a=n._payload,n=n._init;try{return ve(n(a))}catch{}}return null}function ae(n){var a=n.type;switch(n.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=a.render,n=n.displayName||n.name||"",a.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(a);case 8:return a===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function we(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pe(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ae(n){var a=Pe(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),h=""+n[a];if(!n.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return p.call(this)},set:function(k){h=""+k,y.call(this,k)}}),Object.defineProperty(n,a,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(k){h=""+k},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Qe(n){n._valueTracker||(n._valueTracker=Ae(n))}function Te(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return n&&(h=Pe(n)?n.checked?"true":"false":n.value),n=h,n!==c?(a.setValue(n),!0):!1}function Je(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function re(n,a){var c=a.checked;return te({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function Ke(n,a){var c=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;c=we(a.value!=null?a.value:c),n._wrapperState={initialChecked:h,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ht(n,a){a=a.checked,a!=null&&P(n,"checked",a,!1)}function lr(n,a){ht(n,a);var c=we(a.value),h=a.type;if(c!=null)h==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}a.hasOwnProperty("value")?Fe(n,a.type,c):a.hasOwnProperty("defaultValue")&&Fe(n,a.type,we(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(n.defaultChecked=!!a.defaultChecked)}function se(n,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+n._wrapperState.initialValue,c||a===n.value||(n.value=a),n.defaultValue=a}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function Fe(n,a,c){(a!=="number"||Je(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var nt=Array.isArray;function Ut(n,a,c,h){if(n=n.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<n.length;c++)p=a.hasOwnProperty("$"+n[c].value),n[c].selected!==p&&(n[c].selected=p),p&&h&&(n[c].defaultSelected=!0)}else{for(c=""+we(c),a=null,p=0;p<n.length;p++){if(n[p].value===c){n[p].selected=!0,h&&(n[p].defaultSelected=!0);return}a!==null||n[p].disabled||(a=n[p])}a!==null&&(a.selected=!0)}}function O(n,a){if(a.dangerouslySetInnerHTML!=null)throw Error(r(91));return te({},a,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function q(n,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(r(92));if(nt(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),c=a}n._wrapperState={initialValue:we(c)}}function J(n,a){var c=we(a.value),h=we(a.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),a.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),h!=null&&(n.defaultValue=""+h)}function me(n){var a=n.textContent;a===n._wrapperState.initialValue&&a!==""&&a!==null&&(n.value=a)}function pe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(n,a){return n==null||n==="http://www.w3.org/1999/xhtml"?pe(a):n==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Se,Xe=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,h,p){MSApp.execUnsafeLocalFunction(function(){return n(a,c,h,p)})}:n})(function(n,a){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=a;else{for(Se=Se||document.createElement("div"),Se.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Se.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;a.firstChild;)n.appendChild(a.firstChild)}});function ct(n,a){if(a){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=a;return}}n.textContent=a}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vr=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(n){vr.forEach(function(a){a=a+n.charAt(0).toUpperCase()+n.substring(1),ft[a]=ft[n]})});function hs(n,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||ft.hasOwnProperty(n)&&ft[n]?(""+a).trim():a+"px"}function fs(n,a){n=n.style;for(var c in a)if(a.hasOwnProperty(c)){var h=c.indexOf("--")===0,p=hs(c,a[c],h);c==="float"&&(c="cssFloat"),h?n.setProperty(c,p):n[c]=p}}var ya=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cr(n,a){if(a){if(ya[n]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(r(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(r(61))}if(a.style!=null&&typeof a.style!="object")throw Error(r(62))}}function Dn(n,a){if(n.indexOf("-")===-1)return typeof a.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function ms(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Qs=null,Ys=null,Js=null;function Ii(n){if(n=Xi(n)){if(typeof Qs!="function")throw Error(r(280));var a=n.stateNode;a&&(a=_l(a),Qs(n.stateNode,n.type,a))}}function Mn(n){Ys?Js?Js.push(n):Js=[n]:Ys=n}function va(){if(Ys){var n=Ys,a=Js;if(Js=Ys=null,Ii(n),a)for(n=0;n<a.length;n++)Ii(a[n])}}function nl(n,a){return n(a)}function ie(){}var We=!1;function at(n,a,c){if(We)return n(a,c);We=!0;try{return nl(n,a,c)}finally{We=!1,(Ys!==null||Js!==null)&&(ie(),va())}}function it(n,a){var c=n.stateNode;if(c===null)return null;var h=_l(c);if(h===null)return null;c=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var bt=!1;if(d)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){bt=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch{bt=!1}function ur(n,a,c,h,p,y,k,R,M){var H=Array.prototype.slice.call(arguments,3);try{a.apply(c,H)}catch(oe){this.onError(oe)}}var gs=!1,Ps=null,al=!1,Pu=null,m1={onError:function(n){gs=!0,Ps=n}};function g1(n,a,c,h,p,y,k,R,M){gs=!1,Ps=null,ur.apply(m1,arguments)}function x1(n,a,c,h,p,y,k,R,M){if(g1.apply(this,arguments),gs){if(gs){var H=Ps;gs=!1,Ps=null}else throw Error(r(198));al||(al=!0,Pu=H)}}function $n(n){var a=n,c=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(c=a.return),n=a.return;while(n)}return a.tag===3?c:null}function Tp(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function Rp(n){if($n(n)!==n)throw Error(r(188))}function y1(n){var a=n.alternate;if(!a){if(a=$n(n),a===null)throw Error(r(188));return a!==n?null:n}for(var c=n,h=a;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){c=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return Rp(p),n;if(y===h)return Rp(p),a;y=y.sibling}throw Error(r(188))}if(c.return!==h.return)c=p,h=y;else{for(var k=!1,R=p.child;R;){if(R===c){k=!0,c=p,h=y;break}if(R===h){k=!0,h=p,c=y;break}R=R.sibling}if(!k){for(R=y.child;R;){if(R===c){k=!0,c=y,h=p;break}if(R===h){k=!0,h=y,c=p;break}R=R.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?n:a}function Ap(n){return n=y1(n),n!==null?Ip(n):null}function Ip(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var a=Ip(n);if(a!==null)return a;n=n.sibling}return null}var Op=t.unstable_scheduleCallback,Lp=t.unstable_cancelCallback,v1=t.unstable_shouldYield,w1=t.unstable_requestPaint,Pt=t.unstable_now,b1=t.unstable_getCurrentPriorityLevel,Tu=t.unstable_ImmediatePriority,Dp=t.unstable_UserBlockingPriority,il=t.unstable_NormalPriority,j1=t.unstable_LowPriority,Mp=t.unstable_IdlePriority,ol=null,xs=null;function N1(n){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(ol,n,void 0,(n.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:_1,S1=Math.log,k1=Math.LN2;function _1(n){return n>>>=0,n===0?32:31-(S1(n)/k1|0)|0}var ll=64,cl=4194304;function Oi(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ul(n,a){var c=n.pendingLanes;if(c===0)return 0;var h=0,p=n.suspendedLanes,y=n.pingedLanes,k=c&268435455;if(k!==0){var R=k&~p;R!==0?h=Oi(R):(y&=k,y!==0&&(h=Oi(y)))}else k=c&~p,k!==0?h=Oi(k):y!==0&&(h=Oi(y));if(h===0)return 0;if(a!==0&&a!==h&&(a&p)===0&&(p=h&-h,y=a&-a,p>=y||p===16&&(y&4194240)!==0))return a;if((h&4)!==0&&(h|=c&16),a=n.entangledLanes,a!==0)for(n=n.entanglements,a&=h;0<a;)c=31-Kr(a),p=1<<c,h|=n[c],a&=~p;return h}function C1(n,a){switch(n){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E1(n,a){for(var c=n.suspendedLanes,h=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes;0<y;){var k=31-Kr(y),R=1<<k,M=p[k];M===-1?((R&c)===0||(R&h)!==0)&&(p[k]=C1(R,a)):M<=a&&(n.expiredLanes|=R),y&=~R}}function Ru(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $p(){var n=ll;return ll<<=1,(ll&4194240)===0&&(ll=64),n}function Au(n){for(var a=[],c=0;31>c;c++)a.push(n);return a}function Li(n,a,c){n.pendingLanes|=a,a!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,a=31-Kr(a),n[a]=c}function P1(n,a){var c=n.pendingLanes&~a;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=a,n.mutableReadLanes&=a,n.entangledLanes&=a,a=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<c;){var p=31-Kr(c),y=1<<p;a[p]=0,h[p]=-1,n[p]=-1,c&=~y}}function Iu(n,a){var c=n.entangledLanes|=a;for(n=n.entanglements;c;){var h=31-Kr(c),p=1<<h;p&a|n[h]&a&&(n[h]|=a),c&=~p}}var ot=0;function Fp(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Up,Ou,zp,Bp,Vp,Lu=!1,dl=[],Xs=null,Zs=null,en=null,Di=new Map,Mi=new Map,tn=[],T1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(n,a){switch(n){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":Di.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(a.pointerId)}}function $i(n,a,c,h,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},a!==null&&(a=Xi(a),a!==null&&Ou(a)),n):(n.eventSystemFlags|=h,a=n.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),n)}function R1(n,a,c,h,p){switch(a){case"focusin":return Xs=$i(Xs,n,a,c,h,p),!0;case"dragenter":return Zs=$i(Zs,n,a,c,h,p),!0;case"mouseover":return en=$i(en,n,a,c,h,p),!0;case"pointerover":var y=p.pointerId;return Di.set(y,$i(Di.get(y)||null,n,a,c,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Mi.set(y,$i(Mi.get(y)||null,n,a,c,h,p)),!0}return!1}function qp(n){var a=Fn(n.target);if(a!==null){var c=$n(a);if(c!==null){if(a=c.tag,a===13){if(a=Tp(c),a!==null){n.blockedOn=a,Vp(n.priority,function(){zp(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hl(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var c=Mu(n.domEventName,n.eventSystemFlags,a[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var h=new c.constructor(c.type,c);ps=h,c.target.dispatchEvent(h),ps=null}else return a=Xi(c),a!==null&&Ou(a),n.blockedOn=c,!1;a.shift()}return!0}function Hp(n,a,c){hl(n)&&c.delete(a)}function A1(){Lu=!1,Xs!==null&&hl(Xs)&&(Xs=null),Zs!==null&&hl(Zs)&&(Zs=null),en!==null&&hl(en)&&(en=null),Di.forEach(Hp),Mi.forEach(Hp)}function Fi(n,a){n.blockedOn===a&&(n.blockedOn=null,Lu||(Lu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,A1)))}function Ui(n){function a(p){return Fi(p,n)}if(0<dl.length){Fi(dl[0],n);for(var c=1;c<dl.length;c++){var h=dl[c];h.blockedOn===n&&(h.blockedOn=null)}}for(Xs!==null&&Fi(Xs,n),Zs!==null&&Fi(Zs,n),en!==null&&Fi(en,n),Di.forEach(a),Mi.forEach(a),c=0;c<tn.length;c++)h=tn[c],h.blockedOn===n&&(h.blockedOn=null);for(;0<tn.length&&(c=tn[0],c.blockedOn===null);)qp(c),c.blockedOn===null&&tn.shift()}var wa=A.ReactCurrentBatchConfig,fl=!0;function I1(n,a,c,h){var p=ot,y=wa.transition;wa.transition=null;try{ot=1,Du(n,a,c,h)}finally{ot=p,wa.transition=y}}function O1(n,a,c,h){var p=ot,y=wa.transition;wa.transition=null;try{ot=4,Du(n,a,c,h)}finally{ot=p,wa.transition=y}}function Du(n,a,c,h){if(fl){var p=Mu(n,a,c,h);if(p===null)ed(n,a,h,pl,c),Wp(n,h);else if(R1(p,n,a,c,h))h.stopPropagation();else if(Wp(n,h),a&4&&-1<T1.indexOf(n)){for(;p!==null;){var y=Xi(p);if(y!==null&&Up(y),y=Mu(n,a,c,h),y===null&&ed(n,a,h,pl,c),y===p)break;p=y}p!==null&&h.stopPropagation()}else ed(n,a,h,null,c)}}var pl=null;function Mu(n,a,c,h){if(pl=null,n=ms(h),n=Fn(n),n!==null)if(a=$n(n),a===null)n=null;else if(c=a.tag,c===13){if(n=Tp(a),n!==null)return n;n=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null);return pl=n,null}function Kp(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(b1()){case Tu:return 1;case Dp:return 4;case il:case j1:return 16;case Mp:return 536870912;default:return 16}default:return 16}}var rn=null,$u=null,ml=null;function Gp(){if(ml)return ml;var n,a=$u,c=a.length,h,p="value"in rn?rn.value:rn.textContent,y=p.length;for(n=0;n<c&&a[n]===p[n];n++);var k=c-n;for(h=1;h<=k&&a[c-h]===p[y-h];h++);return ml=p.slice(n,1<h?1-h:void 0)}function gl(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function xl(){return!0}function Qp(){return!1}function Tr(n){function a(c,h,p,y,k){this._reactName=c,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(c=n[R],this[R]=c?c(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?xl:Qp,this.isPropagationStopped=Qp,this}return te(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),a}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fu=Tr(ba),zi=te({},ba,{view:0,detail:0}),L1=Tr(zi),Uu,zu,Bi,yl=te({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bi&&(Bi&&n.type==="mousemove"?(Uu=n.screenX-Bi.screenX,zu=n.screenY-Bi.screenY):zu=Uu=0,Bi=n),Uu)},movementY:function(n){return"movementY"in n?n.movementY:zu}}),Yp=Tr(yl),D1=te({},yl,{dataTransfer:0}),M1=Tr(D1),$1=te({},zi,{relatedTarget:0}),Bu=Tr($1),F1=te({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),U1=Tr(F1),z1=te({},ba,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),B1=Tr(z1),V1=te({},ba,{data:0}),Jp=Tr(V1),W1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K1(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=H1[n])?!!a[n]:!1}function Vu(){return K1}var G1=te({},zi,{key:function(n){if(n.key){var a=W1[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=gl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?q1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vu,charCode:function(n){return n.type==="keypress"?gl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?gl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Q1=Tr(G1),Y1=te({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xp=Tr(Y1),J1=te({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vu}),X1=Tr(J1),Z1=te({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),eN=Tr(Z1),tN=te({},yl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rN=Tr(tN),sN=[9,13,27,32],Wu=d&&"CompositionEvent"in window,Vi=null;d&&"documentMode"in document&&(Vi=document.documentMode);var nN=d&&"TextEvent"in window&&!Vi,Zp=d&&(!Wu||Vi&&8<Vi&&11>=Vi),em=" ",tm=!1;function rm(n,a){switch(n){case"keyup":return sN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ja=!1;function aN(n,a){switch(n){case"compositionend":return sm(a);case"keypress":return a.which!==32?null:(tm=!0,em);case"textInput":return n=a.data,n===em&&tm?null:n;default:return null}}function iN(n,a){if(ja)return n==="compositionend"||!Wu&&rm(n,a)?(n=Gp(),ml=$u=rn=null,ja=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Zp&&a.locale!=="ko"?null:a.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!oN[n.type]:a==="textarea"}function am(n,a,c,h){Mn(h),a=Nl(a,"onChange"),0<a.length&&(c=new Fu("onChange","change",null,c,h),n.push({event:c,listeners:a}))}var Wi=null,qi=null;function lN(n){Nm(n,0)}function vl(n){var a=Ca(n);if(Te(a))return n}function cN(n,a){if(n==="change")return a}var im=!1;if(d){var qu;if(d){var Hu="oninput"in document;if(!Hu){var om=document.createElement("div");om.setAttribute("oninput","return;"),Hu=typeof om.oninput=="function"}qu=Hu}else qu=!1;im=qu&&(!document.documentMode||9<document.documentMode)}function lm(){Wi&&(Wi.detachEvent("onpropertychange",cm),qi=Wi=null)}function cm(n){if(n.propertyName==="value"&&vl(qi)){var a=[];am(a,qi,n,ms(n)),at(lN,a)}}function uN(n,a,c){n==="focusin"?(lm(),Wi=a,qi=c,Wi.attachEvent("onpropertychange",cm)):n==="focusout"&&lm()}function dN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return vl(qi)}function hN(n,a){if(n==="click")return vl(a)}function fN(n,a){if(n==="input"||n==="change")return vl(a)}function pN(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Gr=typeof Object.is=="function"?Object.is:pN;function Hi(n,a){if(Gr(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var c=Object.keys(n),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var p=c[h];if(!f.call(a,p)||!Gr(n[p],a[p]))return!1}return!0}function um(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dm(n,a){var c=um(n);n=0;for(var h;c;){if(c.nodeType===3){if(h=n+c.textContent.length,n<=a&&h>=a)return{node:c,offset:a-n};n=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=um(c)}}function hm(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?hm(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function fm(){for(var n=window,a=Je();a instanceof n.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)n=a.contentWindow;else break;a=Je(n.document)}return a}function Ku(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}function mN(n){var a=fm(),c=n.focusedElem,h=n.selectionRange;if(a!==c&&c&&c.ownerDocument&&hm(c.ownerDocument.documentElement,c)){if(h!==null&&Ku(c)){if(a=h.start,n=h.end,n===void 0&&(n=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(n,c.value.length);else if(n=(a=c.ownerDocument||document)&&a.defaultView||window,n.getSelection){n=n.getSelection();var p=c.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!n.extend&&y>h&&(p=h,h=y,y=p),p=dm(c,y);var k=dm(c,h);p&&k&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==k.node||n.focusOffset!==k.offset)&&(a=a.createRange(),a.setStart(p.node,p.offset),n.removeAllRanges(),y>h?(n.addRange(a),n.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),n.addRange(a)))}}for(a=[],n=c;n=n.parentNode;)n.nodeType===1&&a.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)n=a[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var gN=d&&"documentMode"in document&&11>=document.documentMode,Na=null,Gu=null,Ki=null,Qu=!1;function pm(n,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qu||Na==null||Na!==Je(h)||(h=Na,"selectionStart"in h&&Ku(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ki&&Hi(Ki,h)||(Ki=h,h=Nl(Gu,"onSelect"),0<h.length&&(a=new Fu("onSelect","select",null,a,c),n.push({event:a,listeners:h}),a.target=Na)))}function wl(n,a){var c={};return c[n.toLowerCase()]=a.toLowerCase(),c["Webkit"+n]="webkit"+a,c["Moz"+n]="moz"+a,c}var Sa={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},Yu={},mm={};d&&(mm=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function bl(n){if(Yu[n])return Yu[n];if(!Sa[n])return n;var a=Sa[n],c;for(c in a)if(a.hasOwnProperty(c)&&c in mm)return Yu[n]=a[c];return n}var gm=bl("animationend"),xm=bl("animationiteration"),ym=bl("animationstart"),vm=bl("transitionend"),wm=new Map,bm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(n,a){wm.set(n,a),l(a,[n])}for(var Ju=0;Ju<bm.length;Ju++){var Xu=bm[Ju],xN=Xu.toLowerCase(),yN=Xu[0].toUpperCase()+Xu.slice(1);sn(xN,"on"+yN)}sn(gm,"onAnimationEnd"),sn(xm,"onAnimationIteration"),sn(ym,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(vm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function jm(n,a,c){var h=n.type||"unknown-event";n.currentTarget=c,x1(h,a,void 0,n),n.currentTarget=null}function Nm(n,a){a=(a&4)!==0;for(var c=0;c<n.length;c++){var h=n[c],p=h.event;h=h.listeners;e:{var y=void 0;if(a)for(var k=h.length-1;0<=k;k--){var R=h[k],M=R.instance,H=R.currentTarget;if(R=R.listener,M!==y&&p.isPropagationStopped())break e;jm(p,R,H),y=M}else for(k=0;k<h.length;k++){if(R=h[k],M=R.instance,H=R.currentTarget,R=R.listener,M!==y&&p.isPropagationStopped())break e;jm(p,R,H),y=M}}}if(al)throw n=Pu,al=!1,Pu=null,n}function gt(n,a){var c=a[id];c===void 0&&(c=a[id]=new Set);var h=n+"__bubble";c.has(h)||(Sm(a,n,2,!1),c.add(h))}function Zu(n,a,c){var h=0;a&&(h|=4),Sm(c,n,h,a)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Qi(n){if(!n[jl]){n[jl]=!0,i.forEach(function(c){c!=="selectionchange"&&(vN.has(c)||Zu(c,!1,n),Zu(c,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[jl]||(a[jl]=!0,Zu("selectionchange",!1,a))}}function Sm(n,a,c,h){switch(Kp(a)){case 1:var p=I1;break;case 4:p=O1;break;default:p=Du}c=p.bind(null,a,c,n),p=void 0,!bt||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?n.addEventListener(a,c,{capture:!0,passive:p}):n.addEventListener(a,c,!0):p!==void 0?n.addEventListener(a,c,{passive:p}):n.addEventListener(a,c,!1)}function ed(n,a,c,h,p){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var k=h.tag;if(k===3||k===4){var R=h.stateNode.containerInfo;if(R===p||R.nodeType===8&&R.parentNode===p)break;if(k===4)for(k=h.return;k!==null;){var M=k.tag;if((M===3||M===4)&&(M=k.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;k=k.return}for(;R!==null;){if(k=Fn(R),k===null)return;if(M=k.tag,M===5||M===6){h=y=k;continue e}R=R.parentNode}}h=h.return}at(function(){var H=y,oe=ms(c),ce=[];e:{var ne=wm.get(n);if(ne!==void 0){var Ne=Fu,Ce=n;switch(n){case"keypress":if(gl(c)===0)break e;case"keydown":case"keyup":Ne=Q1;break;case"focusin":Ce="focus",Ne=Bu;break;case"focusout":Ce="blur",Ne=Bu;break;case"beforeblur":case"afterblur":Ne=Bu;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=M1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=X1;break;case gm:case xm:case ym:Ne=U1;break;case vm:Ne=eN;break;case"scroll":Ne=L1;break;case"wheel":Ne=rN;break;case"copy":case"cut":case"paste":Ne=B1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=Xp}var Re=(a&4)!==0,Tt=!Re&&n==="scroll",V=Re?ne!==null?ne+"Capture":null:ne;Re=[];for(var F=H,W;F!==null;){W=F;var he=W.stateNode;if(W.tag===5&&he!==null&&(W=he,V!==null&&(he=it(F,V),he!=null&&Re.push(Yi(F,he,W)))),Tt)break;F=F.return}0<Re.length&&(ne=new Ne(ne,Ce,null,c,oe),ce.push({event:ne,listeners:Re}))}}if((a&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",Ne=n==="mouseout"||n==="pointerout",ne&&c!==ps&&(Ce=c.relatedTarget||c.fromElement)&&(Fn(Ce)||Ce[Ts]))break e;if((Ne||ne)&&(ne=oe.window===oe?oe:(ne=oe.ownerDocument)?ne.defaultView||ne.parentWindow:window,Ne?(Ce=c.relatedTarget||c.toElement,Ne=H,Ce=Ce?Fn(Ce):null,Ce!==null&&(Tt=$n(Ce),Ce!==Tt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Ne=null,Ce=H),Ne!==Ce)){if(Re=Yp,he="onMouseLeave",V="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(Re=Xp,he="onPointerLeave",V="onPointerEnter",F="pointer"),Tt=Ne==null?ne:Ca(Ne),W=Ce==null?ne:Ca(Ce),ne=new Re(he,F+"leave",Ne,c,oe),ne.target=Tt,ne.relatedTarget=W,he=null,Fn(oe)===H&&(Re=new Re(V,F+"enter",Ce,c,oe),Re.target=W,Re.relatedTarget=Tt,he=Re),Tt=he,Ne&&Ce)t:{for(Re=Ne,V=Ce,F=0,W=Re;W;W=ka(W))F++;for(W=0,he=V;he;he=ka(he))W++;for(;0<F-W;)Re=ka(Re),F--;for(;0<W-F;)V=ka(V),W--;for(;F--;){if(Re===V||V!==null&&Re===V.alternate)break t;Re=ka(Re),V=ka(V)}Re=null}else Re=null;Ne!==null&&km(ce,ne,Ne,Re,!1),Ce!==null&&Tt!==null&&km(ce,Tt,Ce,Re,!0)}}e:{if(ne=H?Ca(H):window,Ne=ne.nodeName&&ne.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&ne.type==="file")var Ie=cN;else if(nm(ne))if(im)Ie=fN;else{Ie=dN;var De=uN}else(Ne=ne.nodeName)&&Ne.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Ie=hN);if(Ie&&(Ie=Ie(n,H))){am(ce,Ie,c,oe);break e}De&&De(n,ne,H),n==="focusout"&&(De=ne._wrapperState)&&De.controlled&&ne.type==="number"&&Fe(ne,"number",ne.value)}switch(De=H?Ca(H):window,n){case"focusin":(nm(De)||De.contentEditable==="true")&&(Na=De,Gu=H,Ki=null);break;case"focusout":Ki=Gu=Na=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,pm(ce,c,oe);break;case"selectionchange":if(gN)break;case"keydown":case"keyup":pm(ce,c,oe)}var Me;if(Wu)e:{switch(n){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ja?rm(n,c)&&(qe="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(qe="onCompositionStart");qe&&(Zp&&c.locale!=="ko"&&(ja||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ja&&(Me=Gp()):(rn=oe,$u="value"in rn?rn.value:rn.textContent,ja=!0)),De=Nl(H,qe),0<De.length&&(qe=new Jp(qe,n,null,c,oe),ce.push({event:qe,listeners:De}),Me?qe.data=Me:(Me=sm(c),Me!==null&&(qe.data=Me)))),(Me=nN?aN(n,c):iN(n,c))&&(H=Nl(H,"onBeforeInput"),0<H.length&&(oe=new Jp("onBeforeInput","beforeinput",null,c,oe),ce.push({event:oe,listeners:H}),oe.data=Me))}Nm(ce,a)})}function Yi(n,a,c){return{instance:n,listener:a,currentTarget:c}}function Nl(n,a){for(var c=a+"Capture",h=[];n!==null;){var p=n,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=it(n,c),y!=null&&h.unshift(Yi(n,y,p)),y=it(n,a),y!=null&&h.push(Yi(n,y,p))),n=n.return}return h}function ka(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function km(n,a,c,h,p){for(var y=a._reactName,k=[];c!==null&&c!==h;){var R=c,M=R.alternate,H=R.stateNode;if(M!==null&&M===h)break;R.tag===5&&H!==null&&(R=H,p?(M=it(c,y),M!=null&&k.unshift(Yi(c,M,R))):p||(M=it(c,y),M!=null&&k.push(Yi(c,M,R)))),c=c.return}k.length!==0&&n.push({event:a,listeners:k})}var wN=/\r\n?/g,bN=/\u0000|\uFFFD/g;function _m(n){return(typeof n=="string"?n:""+n).replace(wN,`
`).replace(bN,"")}function Sl(n,a,c){if(a=_m(a),_m(n)!==a&&c)throw Error(r(425))}function kl(){}var td=null,rd=null;function sd(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,jN=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,NN=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(n){return Cm.resolve(null).then(n).catch(SN)}:nd;function SN(n){setTimeout(function(){throw n})}function ad(n,a){var c=a,h=0;do{var p=c.nextSibling;if(n.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"){if(h===0){n.removeChild(p),Ui(a);return}h--}else c!=="$"&&c!=="$?"&&c!=="$!"||h++;c=p}while(c);Ui(a)}function nn(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return n}function Em(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return n;a--}else c==="/$"&&a++}n=n.previousSibling}return null}var _a=Math.random().toString(36).slice(2),ys="__reactFiber$"+_a,Ji="__reactProps$"+_a,Ts="__reactContainer$"+_a,id="__reactEvents$"+_a,kN="__reactListeners$"+_a,_N="__reactHandles$"+_a;function Fn(n){var a=n[ys];if(a)return a;for(var c=n.parentNode;c;){if(a=c[Ts]||c[ys]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(n=Em(n);n!==null;){if(c=n[ys])return c;n=Em(n)}return a}n=c,c=n.parentNode}return null}function Xi(n){return n=n[ys]||n[Ts],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ca(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function _l(n){return n[Ji]||null}var od=[],Ea=-1;function an(n){return{current:n}}function xt(n){0>Ea||(n.current=od[Ea],od[Ea]=null,Ea--)}function pt(n,a){Ea++,od[Ea]=n.current,n.current=a}var on={},nr=an(on),wr=an(!1),Un=on;function Pa(n,a){var c=n.type.contextTypes;if(!c)return on;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in c)p[y]=a[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=p),p}function br(n){return n=n.childContextTypes,n!=null}function Cl(){xt(wr),xt(nr)}function Pm(n,a,c){if(nr.current!==on)throw Error(r(168));pt(nr,a),pt(wr,c)}function Tm(n,a,c){var h=n.stateNode;if(a=a.childContextTypes,typeof h.getChildContext!="function")return c;h=h.getChildContext();for(var p in h)if(!(p in a))throw Error(r(108,ae(n)||"Unknown",p));return te({},c,h)}function El(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||on,Un=nr.current,pt(nr,n),pt(wr,wr.current),!0}function Rm(n,a,c){var h=n.stateNode;if(!h)throw Error(r(169));c?(n=Tm(n,a,Un),h.__reactInternalMemoizedMergedChildContext=n,xt(wr),xt(nr),pt(nr,n)):xt(wr),pt(wr,c)}var Rs=null,Pl=!1,ld=!1;function Am(n){Rs===null?Rs=[n]:Rs.push(n)}function CN(n){Pl=!0,Am(n)}function ln(){if(!ld&&Rs!==null){ld=!0;var n=0,a=ot;try{var c=Rs;for(ot=1;n<c.length;n++){var h=c[n];do h=h(!0);while(h!==null)}Rs=null,Pl=!1}catch(p){throw Rs!==null&&(Rs=Rs.slice(n+1)),Op(Tu,ln),p}finally{ot=a,ld=!1}}return null}var Ta=[],Ra=0,Tl=null,Rl=0,Fr=[],Ur=0,zn=null,As=1,Is="";function Bn(n,a){Ta[Ra++]=Rl,Ta[Ra++]=Tl,Tl=n,Rl=a}function Im(n,a,c){Fr[Ur++]=As,Fr[Ur++]=Is,Fr[Ur++]=zn,zn=n;var h=As;n=Is;var p=32-Kr(h)-1;h&=~(1<<p),c+=1;var y=32-Kr(a)+p;if(30<y){var k=p-p%5;y=(h&(1<<k)-1).toString(32),h>>=k,p-=k,As=1<<32-Kr(a)+p|c<<p|h,Is=y+n}else As=1<<y|c<<p|h,Is=n}function cd(n){n.return!==null&&(Bn(n,1),Im(n,1,0))}function ud(n){for(;n===Tl;)Tl=Ta[--Ra],Ta[Ra]=null,Rl=Ta[--Ra],Ta[Ra]=null;for(;n===zn;)zn=Fr[--Ur],Fr[Ur]=null,Is=Fr[--Ur],Fr[Ur]=null,As=Fr[--Ur],Fr[Ur]=null}var Rr=null,Ar=null,wt=!1,Qr=null;function Om(n,a){var c=Wr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=n,a=n.deletions,a===null?(n.deletions=[c],n.flags|=16):a.push(c)}function Lm(n,a){switch(n.tag){case 5:var c=n.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(n.stateNode=a,Rr=n,Ar=nn(a.firstChild),!0):!1;case 6:return a=n.pendingProps===""||a.nodeType!==3?null:a,a!==null?(n.stateNode=a,Rr=n,Ar=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=zn!==null?{id:As,overflow:Is}:null,n.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Wr(18,null,null,0),c.stateNode=a,c.return=n,n.child=c,Rr=n,Ar=null,!0):!1;default:return!1}}function dd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hd(n){if(wt){var a=Ar;if(a){var c=a;if(!Lm(n,a)){if(dd(n))throw Error(r(418));a=nn(c.nextSibling);var h=Rr;a&&Lm(n,a)?Om(h,c):(n.flags=n.flags&-4097|2,wt=!1,Rr=n)}}else{if(dd(n))throw Error(r(418));n.flags=n.flags&-4097|2,wt=!1,Rr=n}}}function Dm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rr=n}function Al(n){if(n!==Rr)return!1;if(!wt)return Dm(n),wt=!0,!1;var a;if((a=n.tag!==3)&&!(a=n.tag!==5)&&(a=n.type,a=a!=="head"&&a!=="body"&&!sd(n.type,n.memoizedProps)),a&&(a=Ar)){if(dd(n))throw Mm(),Error(r(418));for(;a;)Om(n,a),a=nn(a.nextSibling)}if(Dm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(a===0){Ar=nn(n.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}n=n.nextSibling}Ar=null}}else Ar=Rr?nn(n.stateNode.nextSibling):null;return!0}function Mm(){for(var n=Ar;n;)n=nn(n.nextSibling)}function Aa(){Ar=Rr=null,wt=!1}function fd(n){Qr===null?Qr=[n]:Qr.push(n)}var EN=A.ReactCurrentBatchConfig;function Zi(n,a,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(r(309));var h=c.stateNode}if(!h)throw Error(r(147,n));var p=h,y=""+n;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===y?a.ref:(a=function(k){var R=p.refs;k===null?delete R[y]:R[y]=k},a._stringRef=y,a)}if(typeof n!="string")throw Error(r(284));if(!c._owner)throw Error(r(290,n))}return n}function Il(n,a){throw n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n))}function $m(n){var a=n._init;return a(n._payload)}function Fm(n){function a(V,F){if(n){var W=V.deletions;W===null?(V.deletions=[F],V.flags|=16):W.push(F)}}function c(V,F){if(!n)return null;for(;F!==null;)a(V,F),F=F.sibling;return null}function h(V,F){for(V=new Map;F!==null;)F.key!==null?V.set(F.key,F):V.set(F.index,F),F=F.sibling;return V}function p(V,F){return V=gn(V,F),V.index=0,V.sibling=null,V}function y(V,F,W){return V.index=W,n?(W=V.alternate,W!==null?(W=W.index,W<F?(V.flags|=2,F):W):(V.flags|=2,F)):(V.flags|=1048576,F)}function k(V){return n&&V.alternate===null&&(V.flags|=2),V}function R(V,F,W,he){return F===null||F.tag!==6?(F=nh(W,V.mode,he),F.return=V,F):(F=p(F,W),F.return=V,F)}function M(V,F,W,he){var Ie=W.type;return Ie===L?oe(V,F,W.props.children,he,W.key):F!==null&&(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===K&&$m(Ie)===F.type)?(he=p(F,W.props),he.ref=Zi(V,F,W),he.return=V,he):(he=sc(W.type,W.key,W.props,null,V.mode,he),he.ref=Zi(V,F,W),he.return=V,he)}function H(V,F,W,he){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=ah(W,V.mode,he),F.return=V,F):(F=p(F,W.children||[]),F.return=V,F)}function oe(V,F,W,he,Ie){return F===null||F.tag!==7?(F=Yn(W,V.mode,he,Ie),F.return=V,F):(F=p(F,W),F.return=V,F)}function ce(V,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=nh(""+F,V.mode,W),F.return=V,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case $:return W=sc(F.type,F.key,F.props,null,V.mode,W),W.ref=Zi(V,null,F),W.return=V,W;case E:return F=ah(F,V.mode,W),F.return=V,F;case K:var he=F._init;return ce(V,he(F._payload),W)}if(nt(F)||G(F))return F=Yn(F,V.mode,W,null),F.return=V,F;Il(V,F)}return null}function ne(V,F,W,he){var Ie=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ie!==null?null:R(V,F,""+W,he);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case $:return W.key===Ie?M(V,F,W,he):null;case E:return W.key===Ie?H(V,F,W,he):null;case K:return Ie=W._init,ne(V,F,Ie(W._payload),he)}if(nt(W)||G(W))return Ie!==null?null:oe(V,F,W,he,null);Il(V,W)}return null}function Ne(V,F,W,he,Ie){if(typeof he=="string"&&he!==""||typeof he=="number")return V=V.get(W)||null,R(F,V,""+he,Ie);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case $:return V=V.get(he.key===null?W:he.key)||null,M(F,V,he,Ie);case E:return V=V.get(he.key===null?W:he.key)||null,H(F,V,he,Ie);case K:var De=he._init;return Ne(V,F,W,De(he._payload),Ie)}if(nt(he)||G(he))return V=V.get(W)||null,oe(F,V,he,Ie,null);Il(F,he)}return null}function Ce(V,F,W,he){for(var Ie=null,De=null,Me=F,qe=F=0,Jt=null;Me!==null&&qe<W.length;qe++){Me.index>qe?(Jt=Me,Me=null):Jt=Me.sibling;var st=ne(V,Me,W[qe],he);if(st===null){Me===null&&(Me=Jt);break}n&&Me&&st.alternate===null&&a(V,Me),F=y(st,F,qe),De===null?Ie=st:De.sibling=st,De=st,Me=Jt}if(qe===W.length)return c(V,Me),wt&&Bn(V,qe),Ie;if(Me===null){for(;qe<W.length;qe++)Me=ce(V,W[qe],he),Me!==null&&(F=y(Me,F,qe),De===null?Ie=Me:De.sibling=Me,De=Me);return wt&&Bn(V,qe),Ie}for(Me=h(V,Me);qe<W.length;qe++)Jt=Ne(Me,V,qe,W[qe],he),Jt!==null&&(n&&Jt.alternate!==null&&Me.delete(Jt.key===null?qe:Jt.key),F=y(Jt,F,qe),De===null?Ie=Jt:De.sibling=Jt,De=Jt);return n&&Me.forEach(function(xn){return a(V,xn)}),wt&&Bn(V,qe),Ie}function Re(V,F,W,he){var Ie=G(W);if(typeof Ie!="function")throw Error(r(150));if(W=Ie.call(W),W==null)throw Error(r(151));for(var De=Ie=null,Me=F,qe=F=0,Jt=null,st=W.next();Me!==null&&!st.done;qe++,st=W.next()){Me.index>qe?(Jt=Me,Me=null):Jt=Me.sibling;var xn=ne(V,Me,st.value,he);if(xn===null){Me===null&&(Me=Jt);break}n&&Me&&xn.alternate===null&&a(V,Me),F=y(xn,F,qe),De===null?Ie=xn:De.sibling=xn,De=xn,Me=Jt}if(st.done)return c(V,Me),wt&&Bn(V,qe),Ie;if(Me===null){for(;!st.done;qe++,st=W.next())st=ce(V,st.value,he),st!==null&&(F=y(st,F,qe),De===null?Ie=st:De.sibling=st,De=st);return wt&&Bn(V,qe),Ie}for(Me=h(V,Me);!st.done;qe++,st=W.next())st=Ne(Me,V,qe,st.value,he),st!==null&&(n&&st.alternate!==null&&Me.delete(st.key===null?qe:st.key),F=y(st,F,qe),De===null?Ie=st:De.sibling=st,De=st);return n&&Me.forEach(function(oS){return a(V,oS)}),wt&&Bn(V,qe),Ie}function Tt(V,F,W,he){if(typeof W=="object"&&W!==null&&W.type===L&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case $:e:{for(var Ie=W.key,De=F;De!==null;){if(De.key===Ie){if(Ie=W.type,Ie===L){if(De.tag===7){c(V,De.sibling),F=p(De,W.props.children),F.return=V,V=F;break e}}else if(De.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===K&&$m(Ie)===De.type){c(V,De.sibling),F=p(De,W.props),F.ref=Zi(V,De,W),F.return=V,V=F;break e}c(V,De);break}else a(V,De);De=De.sibling}W.type===L?(F=Yn(W.props.children,V.mode,he,W.key),F.return=V,V=F):(he=sc(W.type,W.key,W.props,null,V.mode,he),he.ref=Zi(V,F,W),he.return=V,V=he)}return k(V);case E:e:{for(De=W.key;F!==null;){if(F.key===De)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){c(V,F.sibling),F=p(F,W.children||[]),F.return=V,V=F;break e}else{c(V,F);break}else a(V,F);F=F.sibling}F=ah(W,V.mode,he),F.return=V,V=F}return k(V);case K:return De=W._init,Tt(V,F,De(W._payload),he)}if(nt(W))return Ce(V,F,W,he);if(G(W))return Re(V,F,W,he);Il(V,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(c(V,F.sibling),F=p(F,W),F.return=V,V=F):(c(V,F),F=nh(W,V.mode,he),F.return=V,V=F),k(V)):c(V,F)}return Tt}var Ia=Fm(!0),Um=Fm(!1),Ol=an(null),Ll=null,Oa=null,pd=null;function md(){pd=Oa=Ll=null}function gd(n){var a=Ol.current;xt(Ol),n._currentValue=a}function xd(n,a,c){for(;n!==null;){var h=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),n===c)break;n=n.return}}function La(n,a){Ll=n,pd=Oa=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&a)!==0&&(jr=!0),n.firstContext=null)}function zr(n){var a=n._currentValue;if(pd!==n)if(n={context:n,memoizedValue:a,next:null},Oa===null){if(Ll===null)throw Error(r(308));Oa=n,Ll.dependencies={lanes:0,firstContext:n}}else Oa=Oa.next=n;return a}var Vn=null;function yd(n){Vn===null?Vn=[n]:Vn.push(n)}function zm(n,a,c,h){var p=a.interleaved;return p===null?(c.next=c,yd(a)):(c.next=p.next,p.next=c),a.interleaved=c,Os(n,h)}function Os(n,a){n.lanes|=a;var c=n.alternate;for(c!==null&&(c.lanes|=a),c=n,n=n.return;n!==null;)n.childLanes|=a,c=n.alternate,c!==null&&(c.childLanes|=a),c=n,n=n.return;return c.tag===3?c.stateNode:null}var cn=!1;function vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bm(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ls(n,a){return{eventTime:n,lane:a,tag:0,payload:null,callback:null,next:null}}function un(n,a,c){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(rt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,Os(n,c)}return p=h.interleaved,p===null?(a.next=a,yd(h)):(a.next=p.next,p.next=a),h.interleaved=a,Os(n,c)}function Dl(n,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var h=a.lanes;h&=n.pendingLanes,c|=h,a.lanes=c,Iu(n,c)}}function Vm(n,a){var c=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?p=y=k:y=y.next=k,c=c.next}while(c!==null);y===null?p=y=a:y=y.next=a}else p=y=a;c={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=a:n.next=a,c.lastBaseUpdate=a}function Ml(n,a,c,h){var p=n.updateQueue;cn=!1;var y=p.firstBaseUpdate,k=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var M=R,H=M.next;M.next=null,k===null?y=H:k.next=H,k=M;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,R=oe.lastBaseUpdate,R!==k&&(R===null?oe.firstBaseUpdate=H:R.next=H,oe.lastBaseUpdate=M))}if(y!==null){var ce=p.baseState;k=0,oe=H=M=null,R=y;do{var ne=R.lane,Ne=R.eventTime;if((h&ne)===ne){oe!==null&&(oe=oe.next={eventTime:Ne,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Ce=n,Re=R;switch(ne=a,Ne=c,Re.tag){case 1:if(Ce=Re.payload,typeof Ce=="function"){ce=Ce.call(Ne,ce,ne);break e}ce=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Re.payload,ne=typeof Ce=="function"?Ce.call(Ne,ce,ne):Ce,ne==null)break e;ce=te({},ce,ne);break e;case 2:cn=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,ne=p.effects,ne===null?p.effects=[R]:ne.push(R))}else Ne={eventTime:Ne,lane:ne,tag:R.tag,payload:R.payload,callback:R.callback,next:null},oe===null?(H=oe=Ne,M=ce):oe=oe.next=Ne,k|=ne;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;ne=R,R=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);if(oe===null&&(M=ce),p.baseState=M,p.firstBaseUpdate=H,p.lastBaseUpdate=oe,a=p.shared.interleaved,a!==null){p=a;do k|=p.lane,p=p.next;while(p!==a)}else y===null&&(p.shared.lanes=0);Hn|=k,n.lanes=k,n.memoizedState=ce}}function Wm(n,a,c){if(n=a.effects,a.effects=null,n!==null)for(a=0;a<n.length;a++){var h=n[a],p=h.callback;if(p!==null){if(h.callback=null,h=c,typeof p!="function")throw Error(r(191,p));p.call(h)}}}var eo={},vs=an(eo),to=an(eo),ro=an(eo);function Wn(n){if(n===eo)throw Error(r(174));return n}function wd(n,a){switch(pt(ro,a),pt(to,n),pt(vs,eo),n=a.nodeType,n){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:de(null,"");break;default:n=n===8?a.parentNode:a,a=n.namespaceURI||null,n=n.tagName,a=de(a,n)}xt(vs),pt(vs,a)}function Da(){xt(vs),xt(to),xt(ro)}function qm(n){Wn(ro.current);var a=Wn(vs.current),c=de(a,n.type);a!==c&&(pt(to,n),pt(vs,c))}function bd(n){to.current===n&&(xt(vs),xt(to))}var Nt=an(0);function $l(n){for(var a=n;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var jd=[];function Nd(){for(var n=0;n<jd.length;n++)jd[n]._workInProgressVersionPrimary=null;jd.length=0}var Fl=A.ReactCurrentDispatcher,Sd=A.ReactCurrentBatchConfig,qn=0,St=null,zt=null,Qt=null,Ul=!1,so=!1,no=0,PN=0;function ar(){throw Error(r(321))}function kd(n,a){if(a===null)return!1;for(var c=0;c<a.length&&c<n.length;c++)if(!Gr(n[c],a[c]))return!1;return!0}function _d(n,a,c,h,p,y){if(qn=y,St=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Fl.current=n===null||n.memoizedState===null?IN:ON,n=c(h,p),so){y=0;do{if(so=!1,no=0,25<=y)throw Error(r(301));y+=1,Qt=zt=null,a.updateQueue=null,Fl.current=LN,n=c(h,p)}while(so)}if(Fl.current=Vl,a=zt!==null&&zt.next!==null,qn=0,Qt=zt=St=null,Ul=!1,a)throw Error(r(300));return n}function Cd(){var n=no!==0;return no=0,n}function ws(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?St.memoizedState=Qt=n:Qt=Qt.next=n,Qt}function Br(){if(zt===null){var n=St.alternate;n=n!==null?n.memoizedState:null}else n=zt.next;var a=Qt===null?St.memoizedState:Qt.next;if(a!==null)Qt=a,zt=n;else{if(n===null)throw Error(r(310));zt=n,n={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Qt===null?St.memoizedState=Qt=n:Qt=Qt.next=n}return Qt}function ao(n,a){return typeof a=="function"?a(n):a}function Ed(n){var a=Br(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var h=zt,p=h.baseQueue,y=c.pending;if(y!==null){if(p!==null){var k=p.next;p.next=y.next,y.next=k}h.baseQueue=p=y,c.pending=null}if(p!==null){y=p.next,h=h.baseState;var R=k=null,M=null,H=y;do{var oe=H.lane;if((qn&oe)===oe)M!==null&&(M=M.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),h=H.hasEagerState?H.eagerState:n(h,H.action);else{var ce={lane:oe,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};M===null?(R=M=ce,k=h):M=M.next=ce,St.lanes|=oe,Hn|=oe}H=H.next}while(H!==null&&H!==y);M===null?k=h:M.next=R,Gr(h,a.memoizedState)||(jr=!0),a.memoizedState=h,a.baseState=k,a.baseQueue=M,c.lastRenderedState=h}if(n=c.interleaved,n!==null){p=n;do y=p.lane,St.lanes|=y,Hn|=y,p=p.next;while(p!==n)}else p===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Pd(n){var a=Br(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var h=c.dispatch,p=c.pending,y=a.memoizedState;if(p!==null){c.pending=null;var k=p=p.next;do y=n(y,k.action),k=k.next;while(k!==p);Gr(y,a.memoizedState)||(jr=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,h]}function Hm(){}function Km(n,a){var c=St,h=Br(),p=a(),y=!Gr(h.memoizedState,p);if(y&&(h.memoizedState=p,jr=!0),h=h.queue,Td(Ym.bind(null,c,h,n),[n]),h.getSnapshot!==a||y||Qt!==null&&Qt.memoizedState.tag&1){if(c.flags|=2048,io(9,Qm.bind(null,c,h,p,a),void 0,null),Yt===null)throw Error(r(349));(qn&30)!==0||Gm(c,a,p)}return p}function Gm(n,a,c){n.flags|=16384,n={getSnapshot:a,value:c},a=St.updateQueue,a===null?(a={lastEffect:null,stores:null},St.updateQueue=a,a.stores=[n]):(c=a.stores,c===null?a.stores=[n]:c.push(n))}function Qm(n,a,c,h){a.value=c,a.getSnapshot=h,Jm(a)&&Xm(n)}function Ym(n,a,c){return c(function(){Jm(a)&&Xm(n)})}function Jm(n){var a=n.getSnapshot;n=n.value;try{var c=a();return!Gr(n,c)}catch{return!0}}function Xm(n){var a=Os(n,1);a!==null&&Zr(a,n,1,-1)}function Zm(n){var a=ws();return typeof n=="function"&&(n=n()),a.memoizedState=a.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:n},a.queue=n,n=n.dispatch=AN.bind(null,St,n),[a.memoizedState,n]}function io(n,a,c,h){return n={tag:n,create:a,destroy:c,deps:h,next:null},a=St.updateQueue,a===null?(a={lastEffect:null,stores:null},St.updateQueue=a,a.lastEffect=n.next=n):(c=a.lastEffect,c===null?a.lastEffect=n.next=n:(h=c.next,c.next=n,n.next=h,a.lastEffect=n)),n}function eg(){return Br().memoizedState}function zl(n,a,c,h){var p=ws();St.flags|=n,p.memoizedState=io(1|a,c,void 0,h===void 0?null:h)}function Bl(n,a,c,h){var p=Br();h=h===void 0?null:h;var y=void 0;if(zt!==null){var k=zt.memoizedState;if(y=k.destroy,h!==null&&kd(h,k.deps)){p.memoizedState=io(a,c,y,h);return}}St.flags|=n,p.memoizedState=io(1|a,c,y,h)}function tg(n,a){return zl(8390656,8,n,a)}function Td(n,a){return Bl(2048,8,n,a)}function rg(n,a){return Bl(4,2,n,a)}function sg(n,a){return Bl(4,4,n,a)}function ng(n,a){if(typeof a=="function")return n=n(),a(n),function(){a(null)};if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function ag(n,a,c){return c=c!=null?c.concat([n]):null,Bl(4,4,ng.bind(null,a,n),c)}function Rd(){}function ig(n,a){var c=Br();a=a===void 0?null:a;var h=c.memoizedState;return h!==null&&a!==null&&kd(a,h[1])?h[0]:(c.memoizedState=[n,a],n)}function og(n,a){var c=Br();a=a===void 0?null:a;var h=c.memoizedState;return h!==null&&a!==null&&kd(a,h[1])?h[0]:(n=n(),c.memoizedState=[n,a],n)}function lg(n,a,c){return(qn&21)===0?(n.baseState&&(n.baseState=!1,jr=!0),n.memoizedState=c):(Gr(c,a)||(c=$p(),St.lanes|=c,Hn|=c,n.baseState=!0),a)}function TN(n,a){var c=ot;ot=c!==0&&4>c?c:4,n(!0);var h=Sd.transition;Sd.transition={};try{n(!1),a()}finally{ot=c,Sd.transition=h}}function cg(){return Br().memoizedState}function RN(n,a,c){var h=pn(n);if(c={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null},ug(n))dg(a,c);else if(c=zm(n,a,c,h),c!==null){var p=hr();Zr(c,n,h,p),hg(c,a,h)}}function AN(n,a,c){var h=pn(n),p={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null};if(ug(n))dg(a,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var k=a.lastRenderedState,R=y(k,c);if(p.hasEagerState=!0,p.eagerState=R,Gr(R,k)){var M=a.interleaved;M===null?(p.next=p,yd(a)):(p.next=M.next,M.next=p),a.interleaved=p;return}}catch{}c=zm(n,a,p,h),c!==null&&(p=hr(),Zr(c,n,h,p),hg(c,a,h))}}function ug(n){var a=n.alternate;return n===St||a!==null&&a===St}function dg(n,a){so=Ul=!0;var c=n.pending;c===null?a.next=a:(a.next=c.next,c.next=a),n.pending=a}function hg(n,a,c){if((c&4194240)!==0){var h=a.lanes;h&=n.pendingLanes,c|=h,a.lanes=c,Iu(n,c)}}var Vl={readContext:zr,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},IN={readContext:zr,useCallback:function(n,a){return ws().memoizedState=[n,a===void 0?null:a],n},useContext:zr,useEffect:tg,useImperativeHandle:function(n,a,c){return c=c!=null?c.concat([n]):null,zl(4194308,4,ng.bind(null,a,n),c)},useLayoutEffect:function(n,a){return zl(4194308,4,n,a)},useInsertionEffect:function(n,a){return zl(4,2,n,a)},useMemo:function(n,a){var c=ws();return a=a===void 0?null:a,n=n(),c.memoizedState=[n,a],n},useReducer:function(n,a,c){var h=ws();return a=c!==void 0?c(a):a,h.memoizedState=h.baseState=a,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a},h.queue=n,n=n.dispatch=RN.bind(null,St,n),[h.memoizedState,n]},useRef:function(n){var a=ws();return n={current:n},a.memoizedState=n},useState:Zm,useDebugValue:Rd,useDeferredValue:function(n){return ws().memoizedState=n},useTransition:function(){var n=Zm(!1),a=n[0];return n=TN.bind(null,n[1]),ws().memoizedState=n,[a,n]},useMutableSource:function(){},useSyncExternalStore:function(n,a,c){var h=St,p=ws();if(wt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Yt===null)throw Error(r(349));(qn&30)!==0||Gm(h,a,c)}p.memoizedState=c;var y={value:c,getSnapshot:a};return p.queue=y,tg(Ym.bind(null,h,y,n),[n]),h.flags|=2048,io(9,Qm.bind(null,h,y,c,a),void 0,null),c},useId:function(){var n=ws(),a=Yt.identifierPrefix;if(wt){var c=Is,h=As;c=(h&~(1<<32-Kr(h)-1)).toString(32)+c,a=":"+a+"R"+c,c=no++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=PN++,a=":"+a+"r"+c.toString(32)+":";return n.memoizedState=a},unstable_isNewReconciler:!1},ON={readContext:zr,useCallback:ig,useContext:zr,useEffect:Td,useImperativeHandle:ag,useInsertionEffect:rg,useLayoutEffect:sg,useMemo:og,useReducer:Ed,useRef:eg,useState:function(){return Ed(ao)},useDebugValue:Rd,useDeferredValue:function(n){var a=Br();return lg(a,zt.memoizedState,n)},useTransition:function(){var n=Ed(ao)[0],a=Br().memoizedState;return[n,a]},useMutableSource:Hm,useSyncExternalStore:Km,useId:cg,unstable_isNewReconciler:!1},LN={readContext:zr,useCallback:ig,useContext:zr,useEffect:Td,useImperativeHandle:ag,useInsertionEffect:rg,useLayoutEffect:sg,useMemo:og,useReducer:Pd,useRef:eg,useState:function(){return Pd(ao)},useDebugValue:Rd,useDeferredValue:function(n){var a=Br();return zt===null?a.memoizedState=n:lg(a,zt.memoizedState,n)},useTransition:function(){var n=Pd(ao)[0],a=Br().memoizedState;return[n,a]},useMutableSource:Hm,useSyncExternalStore:Km,useId:cg,unstable_isNewReconciler:!1};function Yr(n,a){if(n&&n.defaultProps){a=te({},a),n=n.defaultProps;for(var c in n)a[c]===void 0&&(a[c]=n[c]);return a}return a}function Ad(n,a,c,h){a=n.memoizedState,c=c(h,a),c=c==null?a:te({},a,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Wl={isMounted:function(n){return(n=n._reactInternals)?$n(n)===n:!1},enqueueSetState:function(n,a,c){n=n._reactInternals;var h=hr(),p=pn(n),y=Ls(h,p);y.payload=a,c!=null&&(y.callback=c),a=un(n,y,p),a!==null&&(Zr(a,n,p,h),Dl(a,n,p))},enqueueReplaceState:function(n,a,c){n=n._reactInternals;var h=hr(),p=pn(n),y=Ls(h,p);y.tag=1,y.payload=a,c!=null&&(y.callback=c),a=un(n,y,p),a!==null&&(Zr(a,n,p,h),Dl(a,n,p))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var c=hr(),h=pn(n),p=Ls(c,h);p.tag=2,a!=null&&(p.callback=a),a=un(n,p,h),a!==null&&(Zr(a,n,h,c),Dl(a,n,h))}};function fg(n,a,c,h,p,y,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,k):a.prototype&&a.prototype.isPureReactComponent?!Hi(c,h)||!Hi(p,y):!0}function pg(n,a,c){var h=!1,p=on,y=a.contextType;return typeof y=="object"&&y!==null?y=zr(y):(p=br(a)?Un:nr.current,h=a.contextTypes,y=(h=h!=null)?Pa(n,p):on),a=new a(c,y),n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Wl,n.stateNode=a,a._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=y),a}function mg(n,a,c,h){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==n&&Wl.enqueueReplaceState(a,a.state,null)}function Id(n,a,c,h){var p=n.stateNode;p.props=c,p.state=n.memoizedState,p.refs={},vd(n);var y=a.contextType;typeof y=="object"&&y!==null?p.context=zr(y):(y=br(a)?Un:nr.current,p.context=Pa(n,y)),p.state=n.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Ad(n,a,y,c),p.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(a=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),a!==p.state&&Wl.enqueueReplaceState(p,p.state,null),Ml(n,c,p,h),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function Ma(n,a){try{var c="",h=a;do c+=xe(h),h=h.return;while(h);var p=c}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:a,stack:p,digest:null}}function Od(n,a,c){return{value:n,source:null,stack:c??null,digest:a??null}}function Ld(n,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var DN=typeof WeakMap=="function"?WeakMap:Map;function gg(n,a,c){c=Ls(-1,c),c.tag=3,c.payload={element:null};var h=a.value;return c.callback=function(){Jl||(Jl=!0,Yd=h),Ld(n,a)},c}function xg(n,a,c){c=Ls(-1,c),c.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var p=a.value;c.payload=function(){return h(p)},c.callback=function(){Ld(n,a)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){Ld(n,a),typeof h!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),c}function yg(n,a,c){var h=n.pingCache;if(h===null){h=n.pingCache=new DN;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(c)||(p.add(c),n=YN.bind(null,n,a,c),a.then(n,n))}function vg(n){do{var a;if((a=n.tag===13)&&(a=n.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return n;n=n.return}while(n!==null);return null}function wg(n,a,c,h,p){return(n.mode&1)===0?(n===a?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Ls(-1,1),a.tag=2,un(c,a,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var MN=A.ReactCurrentOwner,jr=!1;function dr(n,a,c,h){a.child=n===null?Um(a,null,c,h):Ia(a,n.child,c,h)}function bg(n,a,c,h,p){c=c.render;var y=a.ref;return La(a,p),h=_d(n,a,c,h,y,p),c=Cd(),n!==null&&!jr?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~p,Ds(n,a,p)):(wt&&c&&cd(a),a.flags|=1,dr(n,a,h,p),a.child)}function jg(n,a,c,h,p){if(n===null){var y=c.type;return typeof y=="function"&&!sh(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=y,Ng(n,a,y,h,p)):(n=sc(c.type,null,h,a,a.mode,p),n.ref=a.ref,n.return=a,a.child=n)}if(y=n.child,(n.lanes&p)===0){var k=y.memoizedProps;if(c=c.compare,c=c!==null?c:Hi,c(k,h)&&n.ref===a.ref)return Ds(n,a,p)}return a.flags|=1,n=gn(y,h),n.ref=a.ref,n.return=a,a.child=n}function Ng(n,a,c,h,p){if(n!==null){var y=n.memoizedProps;if(Hi(y,h)&&n.ref===a.ref)if(jr=!1,a.pendingProps=h=y,(n.lanes&p)!==0)(n.flags&131072)!==0&&(jr=!0);else return a.lanes=n.lanes,Ds(n,a,p)}return Dd(n,a,c,h,p)}function Sg(n,a,c){var h=a.pendingProps,p=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Fa,Ir),Ir|=c;else{if((c&1073741824)===0)return n=y!==null?y.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:n,cachePool:null,transitions:null},a.updateQueue=null,pt(Fa,Ir),Ir|=n,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:c,pt(Fa,Ir),Ir|=h}else y!==null?(h=y.baseLanes|c,a.memoizedState=null):h=c,pt(Fa,Ir),Ir|=h;return dr(n,a,p,c),a.child}function kg(n,a){var c=a.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Dd(n,a,c,h,p){var y=br(c)?Un:nr.current;return y=Pa(a,y),La(a,p),c=_d(n,a,c,h,y,p),h=Cd(),n!==null&&!jr?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~p,Ds(n,a,p)):(wt&&h&&cd(a),a.flags|=1,dr(n,a,c,p),a.child)}function _g(n,a,c,h,p){if(br(c)){var y=!0;El(a)}else y=!1;if(La(a,p),a.stateNode===null)Hl(n,a),pg(a,c,h),Id(a,c,h,p),h=!0;else if(n===null){var k=a.stateNode,R=a.memoizedProps;k.props=R;var M=k.context,H=c.contextType;typeof H=="object"&&H!==null?H=zr(H):(H=br(c)?Un:nr.current,H=Pa(a,H));var oe=c.getDerivedStateFromProps,ce=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function";ce||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==h||M!==H)&&mg(a,k,h,H),cn=!1;var ne=a.memoizedState;k.state=ne,Ml(a,h,k,p),M=a.memoizedState,R!==h||ne!==M||wr.current||cn?(typeof oe=="function"&&(Ad(a,c,oe,h),M=a.memoizedState),(R=cn||fg(a,c,R,h,ne,M,H))?(ce||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=M),k.props=h,k.state=M,k.context=H,h=R):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{k=a.stateNode,Bm(n,a),R=a.memoizedProps,H=a.type===a.elementType?R:Yr(a.type,R),k.props=H,ce=a.pendingProps,ne=k.context,M=c.contextType,typeof M=="object"&&M!==null?M=zr(M):(M=br(c)?Un:nr.current,M=Pa(a,M));var Ne=c.getDerivedStateFromProps;(oe=typeof Ne=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==ce||ne!==M)&&mg(a,k,h,M),cn=!1,ne=a.memoizedState,k.state=ne,Ml(a,h,k,p);var Ce=a.memoizedState;R!==ce||ne!==Ce||wr.current||cn?(typeof Ne=="function"&&(Ad(a,c,Ne,h),Ce=a.memoizedState),(H=cn||fg(a,c,H,h,ne,Ce,M)||!1)?(oe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(h,Ce,M),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(h,Ce,M)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||R===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Ce),k.props=h,k.state=Ce,k.context=M,h=H):(typeof k.componentDidUpdate!="function"||R===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),h=!1)}return Md(n,a,c,h,y,p)}function Md(n,a,c,h,p,y){kg(n,a);var k=(a.flags&128)!==0;if(!h&&!k)return p&&Rm(a,c,!1),Ds(n,a,y);h=a.stateNode,MN.current=a;var R=k&&typeof c.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,n!==null&&k?(a.child=Ia(a,n.child,null,y),a.child=Ia(a,null,R,y)):dr(n,a,R,y),a.memoizedState=h.state,p&&Rm(a,c,!0),a.child}function Cg(n){var a=n.stateNode;a.pendingContext?Pm(n,a.pendingContext,a.pendingContext!==a.context):a.context&&Pm(n,a.context,!1),wd(n,a.containerInfo)}function Eg(n,a,c,h,p){return Aa(),fd(p),a.flags|=256,dr(n,a,c,h),a.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Fd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Pg(n,a,c){var h=a.pendingProps,p=Nt.current,y=!1,k=(a.flags&128)!==0,R;if((R=k)||(R=n!==null&&n.memoizedState===null?!1:(p&2)!==0),R?(y=!0,a.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),pt(Nt,p&1),n===null)return hd(a),n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((a.mode&1)===0?a.lanes=1:n.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(k=h.children,n=h.fallback,y?(h=a.mode,y=a.child,k={mode:"hidden",children:k},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=nc(k,h,0,null),n=Yn(n,h,c,null),y.return=a,n.return=a,y.sibling=n,a.child=y,a.child.memoizedState=Fd(c),a.memoizedState=$d,n):Ud(a,k));if(p=n.memoizedState,p!==null&&(R=p.dehydrated,R!==null))return $N(n,a,k,h,R,p,c);if(y){y=h.fallback,k=a.mode,p=n.child,R=p.sibling;var M={mode:"hidden",children:h.children};return(k&1)===0&&a.child!==p?(h=a.child,h.childLanes=0,h.pendingProps=M,a.deletions=null):(h=gn(p,M),h.subtreeFlags=p.subtreeFlags&14680064),R!==null?y=gn(R,y):(y=Yn(y,k,c,null),y.flags|=2),y.return=a,h.return=a,h.sibling=y,a.child=h,h=y,y=a.child,k=n.child.memoizedState,k=k===null?Fd(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=n.childLanes&~c,a.memoizedState=$d,h}return y=n.child,n=y.sibling,h=gn(y,{mode:"visible",children:h.children}),(a.mode&1)===0&&(h.lanes=c),h.return=a,h.sibling=null,n!==null&&(c=a.deletions,c===null?(a.deletions=[n],a.flags|=16):c.push(n)),a.child=h,a.memoizedState=null,h}function Ud(n,a){return a=nc({mode:"visible",children:a},n.mode,0,null),a.return=n,n.child=a}function ql(n,a,c,h){return h!==null&&fd(h),Ia(a,n.child,null,c),n=Ud(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function $N(n,a,c,h,p,y,k){if(c)return a.flags&256?(a.flags&=-257,h=Od(Error(r(422))),ql(n,a,k,h)):a.memoizedState!==null?(a.child=n.child,a.flags|=128,null):(y=h.fallback,p=a.mode,h=nc({mode:"visible",children:h.children},p,0,null),y=Yn(y,p,k,null),y.flags|=2,h.return=a,y.return=a,h.sibling=y,a.child=h,(a.mode&1)!==0&&Ia(a,n.child,null,k),a.child.memoizedState=Fd(k),a.memoizedState=$d,y);if((a.mode&1)===0)return ql(n,a,k,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var R=h.dgst;return h=R,y=Error(r(419)),h=Od(y,h,void 0),ql(n,a,k,h)}if(R=(k&n.childLanes)!==0,jr||R){if(h=Yt,h!==null){switch(k&-k){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|k))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Os(n,p),Zr(h,n,p,-1))}return rh(),h=Od(Error(r(421))),ql(n,a,k,h)}return p.data==="$?"?(a.flags|=128,a.child=n.child,a=JN.bind(null,n),p._reactRetry=a,null):(n=y.treeContext,Ar=nn(p.nextSibling),Rr=a,wt=!0,Qr=null,n!==null&&(Fr[Ur++]=As,Fr[Ur++]=Is,Fr[Ur++]=zn,As=n.id,Is=n.overflow,zn=a),a=Ud(a,h.children),a.flags|=4096,a)}function Tg(n,a,c){n.lanes|=a;var h=n.alternate;h!==null&&(h.lanes|=a),xd(n.return,a,c)}function zd(n,a,c,h,p){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:p}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=c,y.tailMode=p)}function Rg(n,a,c){var h=a.pendingProps,p=h.revealOrder,y=h.tail;if(dr(n,a,h.children,c),h=Nt.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Tg(n,c,a);else if(n.tag===19)Tg(n,c,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(pt(Nt,h),(a.mode&1)===0)a.memoizedState=null;else switch(p){case"forwards":for(c=a.child,p=null;c!==null;)n=c.alternate,n!==null&&$l(n)===null&&(p=c),c=c.sibling;c=p,c===null?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),zd(a,!1,p,c,y);break;case"backwards":for(c=null,p=a.child,a.child=null;p!==null;){if(n=p.alternate,n!==null&&$l(n)===null){a.child=p;break}n=p.sibling,p.sibling=c,c=p,p=n}zd(a,!0,c,null,y);break;case"together":zd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Hl(n,a){(a.mode&1)===0&&n!==null&&(n.alternate=null,a.alternate=null,a.flags|=2)}function Ds(n,a,c){if(n!==null&&(a.dependencies=n.dependencies),Hn|=a.lanes,(c&a.childLanes)===0)return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,c=gn(n,n.pendingProps),a.child=c,c.return=a;n.sibling!==null;)n=n.sibling,c=c.sibling=gn(n,n.pendingProps),c.return=a;c.sibling=null}return a.child}function FN(n,a,c){switch(a.tag){case 3:Cg(a),Aa();break;case 5:qm(a);break;case 1:br(a.type)&&El(a);break;case 4:wd(a,a.stateNode.containerInfo);break;case 10:var h=a.type._context,p=a.memoizedProps.value;pt(Ol,h._currentValue),h._currentValue=p;break;case 13:if(h=a.memoizedState,h!==null)return h.dehydrated!==null?(pt(Nt,Nt.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?Pg(n,a,c):(pt(Nt,Nt.current&1),n=Ds(n,a,c),n!==null?n.sibling:null);pt(Nt,Nt.current&1);break;case 19:if(h=(c&a.childLanes)!==0,(n.flags&128)!==0){if(h)return Rg(n,a,c);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pt(Nt,Nt.current),h)break;return null;case 22:case 23:return a.lanes=0,Sg(n,a,c)}return Ds(n,a,c)}var Ag,Bd,Ig,Og;Ag=function(n,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Bd=function(){},Ig=function(n,a,c,h){var p=n.memoizedProps;if(p!==h){n=a.stateNode,Wn(vs.current);var y=null;switch(c){case"input":p=re(n,p),h=re(n,h),y=[];break;case"select":p=te({},p,{value:void 0}),h=te({},h,{value:void 0}),y=[];break;case"textarea":p=O(n,p),h=O(n,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=kl)}cr(c,h);var k;c=null;for(H in p)if(!h.hasOwnProperty(H)&&p.hasOwnProperty(H)&&p[H]!=null)if(H==="style"){var R=p[H];for(k in R)R.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?y||(y=[]):(y=y||[]).push(H,null));for(H in h){var M=h[H];if(R=p?.[H],h.hasOwnProperty(H)&&M!==R&&(M!=null||R!=null))if(H==="style")if(R){for(k in R)!R.hasOwnProperty(k)||M&&M.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in M)M.hasOwnProperty(k)&&R[k]!==M[k]&&(c||(c={}),c[k]=M[k])}else c||(y||(y=[]),y.push(H,c)),c=M;else H==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,R=R?R.__html:void 0,M!=null&&R!==M&&(y=y||[]).push(H,M)):H==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(H,""+M):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(M!=null&&H==="onScroll"&&gt("scroll",n),y||R===M||(y=[])):(y=y||[]).push(H,M))}c&&(y=y||[]).push("style",c);var H=y;(a.updateQueue=H)&&(a.flags|=4)}},Og=function(n,a,c,h){c!==h&&(a.flags|=4)};function oo(n,a){if(!wt)switch(n.tailMode){case"hidden":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function ir(n){var a=n.alternate!==null&&n.alternate.child===n.child,c=0,h=0;if(a)for(var p=n.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=h,n.childLanes=c,a}function UN(n,a,c){var h=a.pendingProps;switch(ud(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(a),null;case 1:return br(a.type)&&Cl(),ir(a),null;case 3:return h=a.stateNode,Da(),xt(wr),xt(nr),Nd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Al(a)?a.flags|=4:n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Qr!==null&&(Zd(Qr),Qr=null))),Bd(n,a),ir(a),null;case 5:bd(a);var p=Wn(ro.current);if(c=a.type,n!==null&&a.stateNode!=null)Ig(n,a,c,h,p),n.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!h){if(a.stateNode===null)throw Error(r(166));return ir(a),null}if(n=Wn(vs.current),Al(a)){h=a.stateNode,c=a.type;var y=a.memoizedProps;switch(h[ys]=a,h[Ji]=y,n=(a.mode&1)!==0,c){case"dialog":gt("cancel",h),gt("close",h);break;case"iframe":case"object":case"embed":gt("load",h);break;case"video":case"audio":for(p=0;p<Gi.length;p++)gt(Gi[p],h);break;case"source":gt("error",h);break;case"img":case"image":case"link":gt("error",h),gt("load",h);break;case"details":gt("toggle",h);break;case"input":Ke(h,y),gt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},gt("invalid",h);break;case"textarea":q(h,y),gt("invalid",h)}cr(c,y),p=null;for(var k in y)if(y.hasOwnProperty(k)){var R=y[k];k==="children"?typeof R=="string"?h.textContent!==R&&(y.suppressHydrationWarning!==!0&&Sl(h.textContent,R,n),p=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&Sl(h.textContent,R,n),p=["children",""+R]):o.hasOwnProperty(k)&&R!=null&&k==="onScroll"&&gt("scroll",h)}switch(c){case"input":Qe(h),se(h,y,!0);break;case"textarea":Qe(h),me(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=kl)}h=p,a.updateQueue=h,h!==null&&(a.flags|=4)}else{k=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pe(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=k.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=k.createElement(c,{is:h.is}):(n=k.createElement(c),c==="select"&&(k=n,h.multiple?k.multiple=!0:h.size&&(k.size=h.size))):n=k.createElementNS(n,c),n[ys]=a,n[Ji]=h,Ag(n,a,!1,!1),a.stateNode=n;e:{switch(k=Dn(c,h),c){case"dialog":gt("cancel",n),gt("close",n),p=h;break;case"iframe":case"object":case"embed":gt("load",n),p=h;break;case"video":case"audio":for(p=0;p<Gi.length;p++)gt(Gi[p],n);p=h;break;case"source":gt("error",n),p=h;break;case"img":case"image":case"link":gt("error",n),gt("load",n),p=h;break;case"details":gt("toggle",n),p=h;break;case"input":Ke(n,h),p=re(n,h),gt("invalid",n);break;case"option":p=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},p=te({},h,{value:void 0}),gt("invalid",n);break;case"textarea":q(n,h),p=O(n,h),gt("invalid",n);break;default:p=h}cr(c,p),R=p;for(y in R)if(R.hasOwnProperty(y)){var M=R[y];y==="style"?fs(n,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Xe(n,M)):y==="children"?typeof M=="string"?(c!=="textarea"||M!=="")&&ct(n,M):typeof M=="number"&&ct(n,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?M!=null&&y==="onScroll"&&gt("scroll",n):M!=null&&P(n,y,M,k))}switch(c){case"input":Qe(n),se(n,h,!1);break;case"textarea":Qe(n),me(n);break;case"option":h.value!=null&&n.setAttribute("value",""+we(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?Ut(n,!!h.multiple,y,!1):h.defaultValue!=null&&Ut(n,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=kl)}switch(c){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ir(a),null;case 6:if(n&&a.stateNode!=null)Og(n,a,n.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(c=Wn(ro.current),Wn(vs.current),Al(a)){if(h=a.stateNode,c=a.memoizedProps,h[ys]=a,(y=h.nodeValue!==c)&&(n=Rr,n!==null))switch(n.tag){case 3:Sl(h.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Sl(h.nodeValue,c,(n.mode&1)!==0)}y&&(a.flags|=4)}else h=(c.nodeType===9?c:c.ownerDocument).createTextNode(h),h[ys]=a,a.stateNode=h}return ir(a),null;case 13:if(xt(Nt),h=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(wt&&Ar!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Mm(),Aa(),a.flags|=98560,y=!1;else if(y=Al(a),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(r(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[ys]=a}else Aa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ir(a),y=!1}else Qr!==null&&(Zd(Qr),Qr=null),y=!0;if(!y)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(a.child.flags|=8192,(a.mode&1)!==0&&(n===null||(Nt.current&1)!==0?Bt===0&&(Bt=3):rh())),a.updateQueue!==null&&(a.flags|=4),ir(a),null);case 4:return Da(),Bd(n,a),n===null&&Qi(a.stateNode.containerInfo),ir(a),null;case 10:return gd(a.type._context),ir(a),null;case 17:return br(a.type)&&Cl(),ir(a),null;case 19:if(xt(Nt),y=a.memoizedState,y===null)return ir(a),null;if(h=(a.flags&128)!==0,k=y.rendering,k===null)if(h)oo(y,!1);else{if(Bt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(k=$l(n),k!==null){for(a.flags|=128,oo(y,!1),h=k.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),a.subtreeFlags=0,h=c,c=a.child;c!==null;)y=c,n=h,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,n=k.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return pt(Nt,Nt.current&1|2),a.child}n=n.sibling}y.tail!==null&&Pt()>Ua&&(a.flags|=128,h=!0,oo(y,!1),a.lanes=4194304)}else{if(!h)if(n=$l(k),n!==null){if(a.flags|=128,h=!0,c=n.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),oo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!wt)return ir(a),null}else 2*Pt()-y.renderingStartTime>Ua&&c!==1073741824&&(a.flags|=128,h=!0,oo(y,!1),a.lanes=4194304);y.isBackwards?(k.sibling=a.child,a.child=k):(c=y.last,c!==null?c.sibling=k:a.child=k,y.last=k)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Pt(),a.sibling=null,c=Nt.current,pt(Nt,h?c&1|2:c&1),a):(ir(a),null);case 22:case 23:return th(),h=a.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(a.flags|=8192),h&&(a.mode&1)!==0?(Ir&1073741824)!==0&&(ir(a),a.subtreeFlags&6&&(a.flags|=8192)):ir(a),null;case 24:return null;case 25:return null}throw Error(r(156,a.tag))}function zN(n,a){switch(ud(a),a.tag){case 1:return br(a.type)&&Cl(),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Da(),xt(wr),xt(nr),Nd(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 5:return bd(a),null;case 13:if(xt(Nt),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Aa()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return xt(Nt),null;case 4:return Da(),null;case 10:return gd(a.type._context),null;case 22:case 23:return th(),null;case 24:return null;default:return null}}var Kl=!1,or=!1,BN=typeof WeakSet=="function"?WeakSet:Set,ke=null;function $a(n,a){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(h){Ct(n,a,h)}else c.current=null}function Vd(n,a,c){try{c()}catch(h){Ct(n,a,h)}}var Lg=!1;function VN(n,a){if(td=fl,n=fm(),Ku(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var k=0,R=-1,M=-1,H=0,oe=0,ce=n,ne=null;t:for(;;){for(var Ne;ce!==c||p!==0&&ce.nodeType!==3||(R=k+p),ce!==y||h!==0&&ce.nodeType!==3||(M=k+h),ce.nodeType===3&&(k+=ce.nodeValue.length),(Ne=ce.firstChild)!==null;)ne=ce,ce=Ne;for(;;){if(ce===n)break t;if(ne===c&&++H===p&&(R=k),ne===y&&++oe===h&&(M=k),(Ne=ce.nextSibling)!==null)break;ce=ne,ne=ce.parentNode}ce=Ne}c=R===-1||M===-1?null:{start:R,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(rd={focusedElem:n,selectionRange:c},fl=!1,ke=a;ke!==null;)if(a=ke,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,ke=n;else for(;ke!==null;){a=ke;try{var Ce=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Re=Ce.memoizedProps,Tt=Ce.memoizedState,V=a.stateNode,F=V.getSnapshotBeforeUpdate(a.elementType===a.type?Re:Yr(a.type,Re),Tt);V.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=a.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(he){Ct(a,a.return,he)}if(n=a.sibling,n!==null){n.return=a.return,ke=n;break}ke=a.return}return Ce=Lg,Lg=!1,Ce}function lo(n,a,c){var h=a.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&n)===n){var y=p.destroy;p.destroy=void 0,y!==void 0&&Vd(a,c,y)}p=p.next}while(p!==h)}}function Gl(n,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&n)===n){var h=c.create;c.destroy=h()}c=c.next}while(c!==a)}}function Wd(n){var a=n.ref;if(a!==null){var c=n.stateNode;n.tag,n=c,typeof a=="function"?a(n):a.current=n}}function Dg(n){var a=n.alternate;a!==null&&(n.alternate=null,Dg(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&(delete a[ys],delete a[Ji],delete a[id],delete a[kN],delete a[_N])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Mg(n){return n.tag===5||n.tag===3||n.tag===4}function $g(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Mg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qd(n,a,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(n,a):c.insertBefore(n,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(n,c)):(a=c,a.appendChild(n)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=kl));else if(h!==4&&(n=n.child,n!==null))for(qd(n,a,c),n=n.sibling;n!==null;)qd(n,a,c),n=n.sibling}function Hd(n,a,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,a?c.insertBefore(n,a):c.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Hd(n,a,c),n=n.sibling;n!==null;)Hd(n,a,c),n=n.sibling}var Xt=null,Jr=!1;function dn(n,a,c){for(c=c.child;c!==null;)Fg(n,a,c),c=c.sibling}function Fg(n,a,c){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(ol,c)}catch{}switch(c.tag){case 5:or||$a(c,a);case 6:var h=Xt,p=Jr;Xt=null,dn(n,a,c),Xt=h,Jr=p,Xt!==null&&(Jr?(n=Xt,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):Xt.removeChild(c.stateNode));break;case 18:Xt!==null&&(Jr?(n=Xt,c=c.stateNode,n.nodeType===8?ad(n.parentNode,c):n.nodeType===1&&ad(n,c),Ui(n)):ad(Xt,c.stateNode));break;case 4:h=Xt,p=Jr,Xt=c.stateNode.containerInfo,Jr=!0,dn(n,a,c),Xt=h,Jr=p;break;case 0:case 11:case 14:case 15:if(!or&&(h=c.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&Vd(c,a,k),p=p.next}while(p!==h)}dn(n,a,c);break;case 1:if(!or&&($a(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=c.memoizedProps,h.state=c.memoizedState,h.componentWillUnmount()}catch(R){Ct(c,a,R)}dn(n,a,c);break;case 21:dn(n,a,c);break;case 22:c.mode&1?(or=(h=or)||c.memoizedState!==null,dn(n,a,c),or=h):dn(n,a,c);break;default:dn(n,a,c)}}function Ug(n){var a=n.updateQueue;if(a!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new BN),a.forEach(function(h){var p=XN.bind(null,n,h);c.has(h)||(c.add(h),h.then(p,p))})}}function Xr(n,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];try{var y=n,k=a,R=k;e:for(;R!==null;){switch(R.tag){case 5:Xt=R.stateNode,Jr=!1;break e;case 3:Xt=R.stateNode.containerInfo,Jr=!0;break e;case 4:Xt=R.stateNode.containerInfo,Jr=!0;break e}R=R.return}if(Xt===null)throw Error(r(160));Fg(y,k,p),Xt=null,Jr=!1;var M=p.alternate;M!==null&&(M.return=null),p.return=null}catch(H){Ct(p,a,H)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)zg(a,n),a=a.sibling}function zg(n,a){var c=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Xr(a,n),bs(n),h&4){try{lo(3,n,n.return),Gl(3,n)}catch(Re){Ct(n,n.return,Re)}try{lo(5,n,n.return)}catch(Re){Ct(n,n.return,Re)}}break;case 1:Xr(a,n),bs(n),h&512&&c!==null&&$a(c,c.return);break;case 5:if(Xr(a,n),bs(n),h&512&&c!==null&&$a(c,c.return),n.flags&32){var p=n.stateNode;try{ct(p,"")}catch(Re){Ct(n,n.return,Re)}}if(h&4&&(p=n.stateNode,p!=null)){var y=n.memoizedProps,k=c!==null?c.memoizedProps:y,R=n.type,M=n.updateQueue;if(n.updateQueue=null,M!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&ht(p,y),Dn(R,k);var H=Dn(R,y);for(k=0;k<M.length;k+=2){var oe=M[k],ce=M[k+1];oe==="style"?fs(p,ce):oe==="dangerouslySetInnerHTML"?Xe(p,ce):oe==="children"?ct(p,ce):P(p,oe,ce,H)}switch(R){case"input":lr(p,y);break;case"textarea":J(p,y);break;case"select":var ne=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Ne=y.value;Ne!=null?Ut(p,!!y.multiple,Ne,!1):ne!==!!y.multiple&&(y.defaultValue!=null?Ut(p,!!y.multiple,y.defaultValue,!0):Ut(p,!!y.multiple,y.multiple?[]:"",!1))}p[Ji]=y}catch(Re){Ct(n,n.return,Re)}}break;case 6:if(Xr(a,n),bs(n),h&4){if(n.stateNode===null)throw Error(r(162));p=n.stateNode,y=n.memoizedProps;try{p.nodeValue=y}catch(Re){Ct(n,n.return,Re)}}break;case 3:if(Xr(a,n),bs(n),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Ui(a.containerInfo)}catch(Re){Ct(n,n.return,Re)}break;case 4:Xr(a,n),bs(n);break;case 13:Xr(a,n),bs(n),p=n.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Qd=Pt())),h&4&&Ug(n);break;case 22:if(oe=c!==null&&c.memoizedState!==null,n.mode&1?(or=(H=or)||oe,Xr(a,n),or=H):Xr(a,n),bs(n),h&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!oe&&(n.mode&1)!==0)for(ke=n,oe=n.child;oe!==null;){for(ce=ke=oe;ke!==null;){switch(ne=ke,Ne=ne.child,ne.tag){case 0:case 11:case 14:case 15:lo(4,ne,ne.return);break;case 1:$a(ne,ne.return);var Ce=ne.stateNode;if(typeof Ce.componentWillUnmount=="function"){h=ne,c=ne.return;try{a=h,Ce.props=a.memoizedProps,Ce.state=a.memoizedState,Ce.componentWillUnmount()}catch(Re){Ct(h,c,Re)}}break;case 5:$a(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Wg(ce);continue}}Ne!==null?(Ne.return=ne,ke=Ne):Wg(ce)}oe=oe.sibling}e:for(oe=null,ce=n;;){if(ce.tag===5){if(oe===null){oe=ce;try{p=ce.stateNode,H?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=ce.stateNode,M=ce.memoizedProps.style,k=M!=null&&M.hasOwnProperty("display")?M.display:null,R.style.display=hs("display",k))}catch(Re){Ct(n,n.return,Re)}}}else if(ce.tag===6){if(oe===null)try{ce.stateNode.nodeValue=H?"":ce.memoizedProps}catch(Re){Ct(n,n.return,Re)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===n)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===n)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===n)break e;oe===ce&&(oe=null),ce=ce.return}oe===ce&&(oe=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Xr(a,n),bs(n),h&4&&Ug(n);break;case 21:break;default:Xr(a,n),bs(n)}}function bs(n){var a=n.flags;if(a&2){try{e:{for(var c=n.return;c!==null;){if(Mg(c)){var h=c;break e}c=c.return}throw Error(r(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(ct(p,""),h.flags&=-33);var y=$g(n);Hd(n,y,p);break;case 3:case 4:var k=h.stateNode.containerInfo,R=$g(n);qd(n,R,k);break;default:throw Error(r(161))}}catch(M){Ct(n,n.return,M)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function WN(n,a,c){ke=n,Bg(n)}function Bg(n,a,c){for(var h=(n.mode&1)!==0;ke!==null;){var p=ke,y=p.child;if(p.tag===22&&h){var k=p.memoizedState!==null||Kl;if(!k){var R=p.alternate,M=R!==null&&R.memoizedState!==null||or;R=Kl;var H=or;if(Kl=k,(or=M)&&!H)for(ke=p;ke!==null;)k=ke,M=k.child,k.tag===22&&k.memoizedState!==null?qg(p):M!==null?(M.return=k,ke=M):qg(p);for(;y!==null;)ke=y,Bg(y),y=y.sibling;ke=p,Kl=R,or=H}Vg(n)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,ke=y):Vg(n)}}function Vg(n){for(;ke!==null;){var a=ke;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:or||Gl(5,a);break;case 1:var h=a.stateNode;if(a.flags&4&&!or)if(c===null)h.componentDidMount();else{var p=a.elementType===a.type?c.memoizedProps:Yr(a.type,c.memoizedProps);h.componentDidUpdate(p,c.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=a.updateQueue;y!==null&&Wm(a,y,h);break;case 3:var k=a.updateQueue;if(k!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}Wm(a,k,c)}break;case 5:var R=a.stateNode;if(c===null&&a.flags&4){c=R;var M=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&c.focus();break;case"img":M.src&&(c.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var H=a.alternate;if(H!==null){var oe=H.memoizedState;if(oe!==null){var ce=oe.dehydrated;ce!==null&&Ui(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}or||a.flags&512&&Wd(a)}catch(ne){Ct(a,a.return,ne)}}if(a===n){ke=null;break}if(c=a.sibling,c!==null){c.return=a.return,ke=c;break}ke=a.return}}function Wg(n){for(;ke!==null;){var a=ke;if(a===n){ke=null;break}var c=a.sibling;if(c!==null){c.return=a.return,ke=c;break}ke=a.return}}function qg(n){for(;ke!==null;){var a=ke;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Gl(4,a)}catch(M){Ct(a,c,M)}break;case 1:var h=a.stateNode;if(typeof h.componentDidMount=="function"){var p=a.return;try{h.componentDidMount()}catch(M){Ct(a,p,M)}}var y=a.return;try{Wd(a)}catch(M){Ct(a,y,M)}break;case 5:var k=a.return;try{Wd(a)}catch(M){Ct(a,k,M)}}}catch(M){Ct(a,a.return,M)}if(a===n){ke=null;break}var R=a.sibling;if(R!==null){R.return=a.return,ke=R;break}ke=a.return}}var qN=Math.ceil,Ql=A.ReactCurrentDispatcher,Kd=A.ReactCurrentOwner,Vr=A.ReactCurrentBatchConfig,rt=0,Yt=null,Ot=null,Zt=0,Ir=0,Fa=an(0),Bt=0,co=null,Hn=0,Yl=0,Gd=0,uo=null,Nr=null,Qd=0,Ua=1/0,Ms=null,Jl=!1,Yd=null,hn=null,Xl=!1,fn=null,Zl=0,ho=0,Jd=null,ec=-1,tc=0;function hr(){return(rt&6)!==0?Pt():ec!==-1?ec:ec=Pt()}function pn(n){return(n.mode&1)===0?1:(rt&2)!==0&&Zt!==0?Zt&-Zt:EN.transition!==null?(tc===0&&(tc=$p()),tc):(n=ot,n!==0||(n=window.event,n=n===void 0?16:Kp(n.type)),n)}function Zr(n,a,c,h){if(50<ho)throw ho=0,Jd=null,Error(r(185));Li(n,c,h),((rt&2)===0||n!==Yt)&&(n===Yt&&((rt&2)===0&&(Yl|=c),Bt===4&&mn(n,Zt)),Sr(n,h),c===1&&rt===0&&(a.mode&1)===0&&(Ua=Pt()+500,Pl&&ln()))}function Sr(n,a){var c=n.callbackNode;E1(n,a);var h=ul(n,n===Yt?Zt:0);if(h===0)c!==null&&Lp(c),n.callbackNode=null,n.callbackPriority=0;else if(a=h&-h,n.callbackPriority!==a){if(c!=null&&Lp(c),a===1)n.tag===0?CN(Kg.bind(null,n)):Am(Kg.bind(null,n)),NN(function(){(rt&6)===0&&ln()}),c=null;else{switch(Fp(h)){case 1:c=Tu;break;case 4:c=Dp;break;case 16:c=il;break;case 536870912:c=Mp;break;default:c=il}c=tx(c,Hg.bind(null,n))}n.callbackPriority=a,n.callbackNode=c}}function Hg(n,a){if(ec=-1,tc=0,(rt&6)!==0)throw Error(r(327));var c=n.callbackNode;if(za()&&n.callbackNode!==c)return null;var h=ul(n,n===Yt?Zt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||a)a=rc(n,h);else{a=h;var p=rt;rt|=2;var y=Qg();(Yt!==n||Zt!==a)&&(Ms=null,Ua=Pt()+500,Gn(n,a));do try{GN();break}catch(R){Gg(n,R)}while(!0);md(),Ql.current=y,rt=p,Ot!==null?a=0:(Yt=null,Zt=0,a=Bt)}if(a!==0){if(a===2&&(p=Ru(n),p!==0&&(h=p,a=Xd(n,p))),a===1)throw c=co,Gn(n,0),mn(n,h),Sr(n,Pt()),c;if(a===6)mn(n,h);else{if(p=n.current.alternate,(h&30)===0&&!HN(p)&&(a=rc(n,h),a===2&&(y=Ru(n),y!==0&&(h=y,a=Xd(n,y))),a===1))throw c=co,Gn(n,0),mn(n,h),Sr(n,Pt()),c;switch(n.finishedWork=p,n.finishedLanes=h,a){case 0:case 1:throw Error(r(345));case 2:Qn(n,Nr,Ms);break;case 3:if(mn(n,h),(h&130023424)===h&&(a=Qd+500-Pt(),10<a)){if(ul(n,0)!==0)break;if(p=n.suspendedLanes,(p&h)!==h){hr(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=nd(Qn.bind(null,n,Nr,Ms),a);break}Qn(n,Nr,Ms);break;case 4:if(mn(n,h),(h&4194240)===h)break;for(a=n.eventTimes,p=-1;0<h;){var k=31-Kr(h);y=1<<k,k=a[k],k>p&&(p=k),h&=~y}if(h=p,h=Pt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*qN(h/1960))-h,10<h){n.timeoutHandle=nd(Qn.bind(null,n,Nr,Ms),h);break}Qn(n,Nr,Ms);break;case 5:Qn(n,Nr,Ms);break;default:throw Error(r(329))}}}return Sr(n,Pt()),n.callbackNode===c?Hg.bind(null,n):null}function Xd(n,a){var c=uo;return n.current.memoizedState.isDehydrated&&(Gn(n,a).flags|=256),n=rc(n,a),n!==2&&(a=Nr,Nr=c,a!==null&&Zd(a)),n}function Zd(n){Nr===null?Nr=n:Nr.push.apply(Nr,n)}function HN(n){for(var a=n;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var h=0;h<c.length;h++){var p=c[h],y=p.getSnapshot;p=p.value;try{if(!Gr(y(),p))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function mn(n,a){for(a&=~Gd,a&=~Yl,n.suspendedLanes|=a,n.pingedLanes&=~a,n=n.expirationTimes;0<a;){var c=31-Kr(a),h=1<<c;n[c]=-1,a&=~h}}function Kg(n){if((rt&6)!==0)throw Error(r(327));za();var a=ul(n,0);if((a&1)===0)return Sr(n,Pt()),null;var c=rc(n,a);if(n.tag!==0&&c===2){var h=Ru(n);h!==0&&(a=h,c=Xd(n,h))}if(c===1)throw c=co,Gn(n,0),mn(n,a),Sr(n,Pt()),c;if(c===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=a,Qn(n,Nr,Ms),Sr(n,Pt()),null}function eh(n,a){var c=rt;rt|=1;try{return n(a)}finally{rt=c,rt===0&&(Ua=Pt()+500,Pl&&ln())}}function Kn(n){fn!==null&&fn.tag===0&&(rt&6)===0&&za();var a=rt;rt|=1;var c=Vr.transition,h=ot;try{if(Vr.transition=null,ot=1,n)return n()}finally{ot=h,Vr.transition=c,rt=a,(rt&6)===0&&ln()}}function th(){Ir=Fa.current,xt(Fa)}function Gn(n,a){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,jN(c)),Ot!==null)for(c=Ot.return;c!==null;){var h=c;switch(ud(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Cl();break;case 3:Da(),xt(wr),xt(nr),Nd();break;case 5:bd(h);break;case 4:Da();break;case 13:xt(Nt);break;case 19:xt(Nt);break;case 10:gd(h.type._context);break;case 22:case 23:th()}c=c.return}if(Yt=n,Ot=n=gn(n.current,null),Zt=Ir=a,Bt=0,co=null,Gd=Yl=Hn=0,Nr=uo=null,Vn!==null){for(a=0;a<Vn.length;a++)if(c=Vn[a],h=c.interleaved,h!==null){c.interleaved=null;var p=h.next,y=c.pending;if(y!==null){var k=y.next;y.next=p,h.next=k}c.pending=h}Vn=null}return n}function Gg(n,a){do{var c=Ot;try{if(md(),Fl.current=Vl,Ul){for(var h=St.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Ul=!1}if(qn=0,Qt=zt=St=null,so=!1,no=0,Kd.current=null,c===null||c.return===null){Bt=1,co=a,Ot=null;break}e:{var y=n,k=c.return,R=c,M=a;if(a=Zt,R.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var H=M,oe=R,ce=oe.tag;if((oe.mode&1)===0&&(ce===0||ce===11||ce===15)){var ne=oe.alternate;ne?(oe.updateQueue=ne.updateQueue,oe.memoizedState=ne.memoizedState,oe.lanes=ne.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Ne=vg(k);if(Ne!==null){Ne.flags&=-257,wg(Ne,k,R,y,a),Ne.mode&1&&yg(y,H,a),a=Ne,M=H;var Ce=a.updateQueue;if(Ce===null){var Re=new Set;Re.add(M),a.updateQueue=Re}else Ce.add(M);break e}else{if((a&1)===0){yg(y,H,a),rh();break e}M=Error(r(426))}}else if(wt&&R.mode&1){var Tt=vg(k);if(Tt!==null){(Tt.flags&65536)===0&&(Tt.flags|=256),wg(Tt,k,R,y,a),fd(Ma(M,R));break e}}y=M=Ma(M,R),Bt!==4&&(Bt=2),uo===null?uo=[y]:uo.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,a&=-a,y.lanes|=a;var V=gg(y,M,a);Vm(y,V);break e;case 1:R=M;var F=y.type,W=y.stateNode;if((y.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(hn===null||!hn.has(W)))){y.flags|=65536,a&=-a,y.lanes|=a;var he=xg(y,R,a);Vm(y,he);break e}}y=y.return}while(y!==null)}Jg(c)}catch(Ie){a=Ie,Ot===c&&c!==null&&(Ot=c=c.return);continue}break}while(!0)}function Qg(){var n=Ql.current;return Ql.current=Vl,n===null?Vl:n}function rh(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Yt===null||(Hn&268435455)===0&&(Yl&268435455)===0||mn(Yt,Zt)}function rc(n,a){var c=rt;rt|=2;var h=Qg();(Yt!==n||Zt!==a)&&(Ms=null,Gn(n,a));do try{KN();break}catch(p){Gg(n,p)}while(!0);if(md(),rt=c,Ql.current=h,Ot!==null)throw Error(r(261));return Yt=null,Zt=0,Bt}function KN(){for(;Ot!==null;)Yg(Ot)}function GN(){for(;Ot!==null&&!v1();)Yg(Ot)}function Yg(n){var a=ex(n.alternate,n,Ir);n.memoizedProps=n.pendingProps,a===null?Jg(n):Ot=a,Kd.current=null}function Jg(n){var a=n;do{var c=a.alternate;if(n=a.return,(a.flags&32768)===0){if(c=UN(c,a,Ir),c!==null){Ot=c;return}}else{if(c=zN(c,a),c!==null){c.flags&=32767,Ot=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Bt=6,Ot=null;return}}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=n}while(a!==null);Bt===0&&(Bt=5)}function Qn(n,a,c){var h=ot,p=Vr.transition;try{Vr.transition=null,ot=1,QN(n,a,c,h)}finally{Vr.transition=p,ot=h}return null}function QN(n,a,c,h){do za();while(fn!==null);if((rt&6)!==0)throw Error(r(327));c=n.finishedWork;var p=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var y=c.lanes|c.childLanes;if(P1(n,y),n===Yt&&(Ot=Yt=null,Zt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Xl||(Xl=!0,tx(il,function(){return za(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=Vr.transition,Vr.transition=null;var k=ot;ot=1;var R=rt;rt|=4,Kd.current=null,VN(n,c),zg(c,n),mN(rd),fl=!!td,rd=td=null,n.current=c,WN(c),w1(),rt=R,ot=k,Vr.transition=y}else n.current=c;if(Xl&&(Xl=!1,fn=n,Zl=p),y=n.pendingLanes,y===0&&(hn=null),N1(c.stateNode),Sr(n,Pt()),a!==null)for(h=n.onRecoverableError,c=0;c<a.length;c++)p=a[c],h(p.value,{componentStack:p.stack,digest:p.digest});if(Jl)throw Jl=!1,n=Yd,Yd=null,n;return(Zl&1)!==0&&n.tag!==0&&za(),y=n.pendingLanes,(y&1)!==0?n===Jd?ho++:(ho=0,Jd=n):ho=0,ln(),null}function za(){if(fn!==null){var n=Fp(Zl),a=Vr.transition,c=ot;try{if(Vr.transition=null,ot=16>n?16:n,fn===null)var h=!1;else{if(n=fn,fn=null,Zl=0,(rt&6)!==0)throw Error(r(331));var p=rt;for(rt|=4,ke=n.current;ke!==null;){var y=ke,k=y.child;if((ke.flags&16)!==0){var R=y.deletions;if(R!==null){for(var M=0;M<R.length;M++){var H=R[M];for(ke=H;ke!==null;){var oe=ke;switch(oe.tag){case 0:case 11:case 15:lo(8,oe,y)}var ce=oe.child;if(ce!==null)ce.return=oe,ke=ce;else for(;ke!==null;){oe=ke;var ne=oe.sibling,Ne=oe.return;if(Dg(oe),oe===H){ke=null;break}if(ne!==null){ne.return=Ne,ke=ne;break}ke=Ne}}}var Ce=y.alternate;if(Ce!==null){var Re=Ce.child;if(Re!==null){Ce.child=null;do{var Tt=Re.sibling;Re.sibling=null,Re=Tt}while(Re!==null)}}ke=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,ke=k;else e:for(;ke!==null;){if(y=ke,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:lo(9,y,y.return)}var V=y.sibling;if(V!==null){V.return=y.return,ke=V;break e}ke=y.return}}var F=n.current;for(ke=F;ke!==null;){k=ke;var W=k.child;if((k.subtreeFlags&2064)!==0&&W!==null)W.return=k,ke=W;else e:for(k=F;ke!==null;){if(R=ke,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Gl(9,R)}}catch(Ie){Ct(R,R.return,Ie)}if(R===k){ke=null;break e}var he=R.sibling;if(he!==null){he.return=R.return,ke=he;break e}ke=R.return}}if(rt=p,ln(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(ol,n)}catch{}h=!0}return h}finally{ot=c,Vr.transition=a}}return!1}function Xg(n,a,c){a=Ma(c,a),a=gg(n,a,1),n=un(n,a,1),a=hr(),n!==null&&(Li(n,1,a),Sr(n,a))}function Ct(n,a,c){if(n.tag===3)Xg(n,n,c);else for(;a!==null;){if(a.tag===3){Xg(a,n,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(hn===null||!hn.has(h))){n=Ma(c,n),n=xg(a,n,1),a=un(a,n,1),n=hr(),a!==null&&(Li(a,1,n),Sr(a,n));break}}a=a.return}}function YN(n,a,c){var h=n.pingCache;h!==null&&h.delete(a),a=hr(),n.pingedLanes|=n.suspendedLanes&c,Yt===n&&(Zt&c)===c&&(Bt===4||Bt===3&&(Zt&130023424)===Zt&&500>Pt()-Qd?Gn(n,0):Gd|=c),Sr(n,a)}function Zg(n,a){a===0&&((n.mode&1)===0?a=1:(a=cl,cl<<=1,(cl&130023424)===0&&(cl=4194304)));var c=hr();n=Os(n,a),n!==null&&(Li(n,a,c),Sr(n,c))}function JN(n){var a=n.memoizedState,c=0;a!==null&&(c=a.retryLane),Zg(n,c)}function XN(n,a){var c=0;switch(n.tag){case 13:var h=n.stateNode,p=n.memoizedState;p!==null&&(c=p.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(r(314))}h!==null&&h.delete(a),Zg(n,c)}var ex;ex=function(n,a,c){if(n!==null)if(n.memoizedProps!==a.pendingProps||wr.current)jr=!0;else{if((n.lanes&c)===0&&(a.flags&128)===0)return jr=!1,FN(n,a,c);jr=(n.flags&131072)!==0}else jr=!1,wt&&(a.flags&1048576)!==0&&Im(a,Rl,a.index);switch(a.lanes=0,a.tag){case 2:var h=a.type;Hl(n,a),n=a.pendingProps;var p=Pa(a,nr.current);La(a,c),p=_d(null,a,h,n,p,c);var y=Cd();return a.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,br(h)?(y=!0,El(a)):y=!1,a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,vd(a),p.updater=Wl,a.stateNode=p,p._reactInternals=a,Id(a,h,n,c),a=Md(null,a,h,!0,y,c)):(a.tag=0,wt&&y&&cd(a),dr(null,a,p,c),a=a.child),a;case 16:h=a.elementType;e:{switch(Hl(n,a),n=a.pendingProps,p=h._init,h=p(h._payload),a.type=h,p=a.tag=eS(h),n=Yr(h,n),p){case 0:a=Dd(null,a,h,n,c);break e;case 1:a=_g(null,a,h,n,c);break e;case 11:a=bg(null,a,h,n,c);break e;case 14:a=jg(null,a,h,Yr(h.type,n),c);break e}throw Error(r(306,h,""))}return a;case 0:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:Yr(h,p),Dd(n,a,h,p,c);case 1:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:Yr(h,p),_g(n,a,h,p,c);case 3:e:{if(Cg(a),n===null)throw Error(r(387));h=a.pendingProps,y=a.memoizedState,p=y.element,Bm(n,a),Ml(a,h,null,c);var k=a.memoizedState;if(h=k.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){p=Ma(Error(r(423)),a),a=Eg(n,a,h,c,p);break e}else if(h!==p){p=Ma(Error(r(424)),a),a=Eg(n,a,h,c,p);break e}else for(Ar=nn(a.stateNode.containerInfo.firstChild),Rr=a,wt=!0,Qr=null,c=Um(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Aa(),h===p){a=Ds(n,a,c);break e}dr(n,a,h,c)}a=a.child}return a;case 5:return qm(a),n===null&&hd(a),h=a.type,p=a.pendingProps,y=n!==null?n.memoizedProps:null,k=p.children,sd(h,p)?k=null:y!==null&&sd(h,y)&&(a.flags|=32),kg(n,a),dr(n,a,k,c),a.child;case 6:return n===null&&hd(a),null;case 13:return Pg(n,a,c);case 4:return wd(a,a.stateNode.containerInfo),h=a.pendingProps,n===null?a.child=Ia(a,null,h,c):dr(n,a,h,c),a.child;case 11:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:Yr(h,p),bg(n,a,h,p,c);case 7:return dr(n,a,a.pendingProps,c),a.child;case 8:return dr(n,a,a.pendingProps.children,c),a.child;case 12:return dr(n,a,a.pendingProps.children,c),a.child;case 10:e:{if(h=a.type._context,p=a.pendingProps,y=a.memoizedProps,k=p.value,pt(Ol,h._currentValue),h._currentValue=k,y!==null)if(Gr(y.value,k)){if(y.children===p.children&&!wr.current){a=Ds(n,a,c);break e}}else for(y=a.child,y!==null&&(y.return=a);y!==null;){var R=y.dependencies;if(R!==null){k=y.child;for(var M=R.firstContext;M!==null;){if(M.context===h){if(y.tag===1){M=Ls(-1,c&-c),M.tag=2;var H=y.updateQueue;if(H!==null){H=H.shared;var oe=H.pending;oe===null?M.next=M:(M.next=oe.next,oe.next=M),H.pending=M}}y.lanes|=c,M=y.alternate,M!==null&&(M.lanes|=c),xd(y.return,c,a),R.lanes|=c;break}M=M.next}}else if(y.tag===10)k=y.type===a.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(r(341));k.lanes|=c,R=k.alternate,R!==null&&(R.lanes|=c),xd(k,c,a),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===a){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}dr(n,a,p.children,c),a=a.child}return a;case 9:return p=a.type,h=a.pendingProps.children,La(a,c),p=zr(p),h=h(p),a.flags|=1,dr(n,a,h,c),a.child;case 14:return h=a.type,p=Yr(h,a.pendingProps),p=Yr(h.type,p),jg(n,a,h,p,c);case 15:return Ng(n,a,a.type,a.pendingProps,c);case 17:return h=a.type,p=a.pendingProps,p=a.elementType===h?p:Yr(h,p),Hl(n,a),a.tag=1,br(h)?(n=!0,El(a)):n=!1,La(a,c),pg(a,h,p),Id(a,h,p,c),Md(null,a,h,!0,n,c);case 19:return Rg(n,a,c);case 22:return Sg(n,a,c)}throw Error(r(156,a.tag))};function tx(n,a){return Op(n,a)}function ZN(n,a,c,h){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(n,a,c,h){return new ZN(n,a,c,h)}function sh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function eS(n){if(typeof n=="function")return sh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===T)return 11;if(n===ge)return 14}return 2}function gn(n,a){var c=n.alternate;return c===null?(c=Wr(n.tag,a,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=a,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,a=n.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function sc(n,a,c,h,p,y){var k=2;if(h=n,typeof n=="function")sh(n)&&(k=1);else if(typeof n=="string")k=5;else e:switch(n){case L:return Yn(c.children,p,y,a);case Q:k=8,p|=8;break;case X:return n=Wr(12,c,a,p|2),n.elementType=X,n.lanes=y,n;case Z:return n=Wr(13,c,a,p),n.elementType=Z,n.lanes=y,n;case Y:return n=Wr(19,c,a,p),n.elementType=Y,n.lanes=y,n;case z:return nc(c,p,y,a);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ee:k=10;break e;case le:k=9;break e;case T:k=11;break e;case ge:k=14;break e;case K:k=16,h=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return a=Wr(k,c,a,p),a.elementType=n,a.type=h,a.lanes=y,a}function Yn(n,a,c,h){return n=Wr(7,n,h,a),n.lanes=c,n}function nc(n,a,c,h){return n=Wr(22,n,h,a),n.elementType=z,n.lanes=c,n.stateNode={isHidden:!1},n}function nh(n,a,c){return n=Wr(6,n,null,a),n.lanes=c,n}function ah(n,a,c){return a=Wr(4,n.children!==null?n.children:[],n.key,a),a.lanes=c,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function tS(n,a,c,h,p){this.tag=a,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Au(0),this.expirationTimes=Au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Au(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function ih(n,a,c,h,p,y,k,R,M){return n=new tS(n,a,c,R,M),a===1?(a=1,y===!0&&(a|=8)):a=0,y=Wr(3,null,null,a),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},vd(y),n}function rS(n,a,c){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:h==null?null:""+h,children:n,containerInfo:a,implementation:c}}function rx(n){if(!n)return on;n=n._reactInternals;e:{if($n(n)!==n||n.tag!==1)throw Error(r(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(br(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(r(171))}if(n.tag===1){var c=n.type;if(br(c))return Tm(n,c,a)}return a}function sx(n,a,c,h,p,y,k,R,M){return n=ih(c,h,!0,n,p,y,k,R,M),n.context=rx(null),c=n.current,h=hr(),p=pn(c),y=Ls(h,p),y.callback=a??null,un(c,y,p),n.current.lanes=p,Li(n,p,h),Sr(n,h),n}function ac(n,a,c,h){var p=a.current,y=hr(),k=pn(p);return c=rx(c),a.context===null?a.context=c:a.pendingContext=c,a=Ls(y,k),a.payload={element:n},h=h===void 0?null:h,h!==null&&(a.callback=h),n=un(p,a,k),n!==null&&(Zr(n,p,k,y),Dl(n,p,k)),k}function ic(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function nx(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<a?c:a}}function oh(n,a){nx(n,a),(n=n.alternate)&&nx(n,a)}function sS(){return null}var ax=typeof reportError=="function"?reportError:function(n){console.error(n)};function lh(n){this._internalRoot=n}oc.prototype.render=lh.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));ac(n,a,null,null)},oc.prototype.unmount=lh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Kn(function(){ac(null,n,null,null)}),a[Ts]=null}};function oc(n){this._internalRoot=n}oc.prototype.unstable_scheduleHydration=function(n){if(n){var a=Bp();n={blockedOn:null,target:n,priority:a};for(var c=0;c<tn.length&&a!==0&&a<tn[c].priority;c++);tn.splice(c,0,n),c===0&&qp(n)}};function ch(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ix(){}function nS(n,a,c,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var H=ic(k);y.call(H)}}var k=sx(a,h,n,0,null,!1,!1,"",ix);return n._reactRootContainer=k,n[Ts]=k.current,Qi(n.nodeType===8?n.parentNode:n),Kn(),k}for(;p=n.lastChild;)n.removeChild(p);if(typeof h=="function"){var R=h;h=function(){var H=ic(M);R.call(H)}}var M=ih(n,0,!1,null,null,!1,!1,"",ix);return n._reactRootContainer=M,n[Ts]=M.current,Qi(n.nodeType===8?n.parentNode:n),Kn(function(){ac(a,M,c,h)}),M}function cc(n,a,c,h,p){var y=c._reactRootContainer;if(y){var k=y;if(typeof p=="function"){var R=p;p=function(){var M=ic(k);R.call(M)}}ac(a,k,n,p)}else k=nS(c,a,n,p,h);return ic(k)}Up=function(n){switch(n.tag){case 3:var a=n.stateNode;if(a.current.memoizedState.isDehydrated){var c=Oi(a.pendingLanes);c!==0&&(Iu(a,c|1),Sr(a,Pt()),(rt&6)===0&&(Ua=Pt()+500,ln()))}break;case 13:Kn(function(){var h=Os(n,1);if(h!==null){var p=hr();Zr(h,n,1,p)}}),oh(n,1)}},Ou=function(n){if(n.tag===13){var a=Os(n,134217728);if(a!==null){var c=hr();Zr(a,n,134217728,c)}oh(n,134217728)}},zp=function(n){if(n.tag===13){var a=pn(n),c=Os(n,a);if(c!==null){var h=hr();Zr(c,n,a,h)}oh(n,a)}},Bp=function(){return ot},Vp=function(n,a){var c=ot;try{return ot=n,a()}finally{ot=c}},Qs=function(n,a,c){switch(a){case"input":if(lr(n,c),a=c.name,c.type==="radio"&&a!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==n&&h.form===n.form){var p=_l(h);if(!p)throw Error(r(90));Te(h),lr(h,p)}}}break;case"textarea":J(n,c);break;case"select":a=c.value,a!=null&&Ut(n,!!c.multiple,a,!1)}},nl=eh,ie=Kn;var aS={usingClientEntryPoint:!1,Events:[Xi,Ca,_l,Mn,va,eh]},fo={findFiberByHostInstance:Fn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iS={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ap(n),n===null?null:n.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||sS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{ol=uc.inject(iS),xs=uc}catch{}}return kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aS,kr.createPortal=function(n,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ch(a))throw Error(r(200));return rS(n,a,null,c)},kr.createRoot=function(n,a){if(!ch(n))throw Error(r(299));var c=!1,h="",p=ax;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(p=a.onRecoverableError)),a=ih(n,1,!1,null,null,c,!1,h,p),n[Ts]=a.current,Qi(n.nodeType===8?n.parentNode:n),new lh(a)},kr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=Ap(a),n=n===null?null:n.stateNode,n},kr.flushSync=function(n){return Kn(n)},kr.hydrate=function(n,a,c){if(!lc(a))throw Error(r(200));return cc(null,n,a,!0,c)},kr.hydrateRoot=function(n,a,c){if(!ch(n))throw Error(r(405));var h=c!=null&&c.hydratedSources||null,p=!1,y="",k=ax;if(c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),a=sx(a,null,n,1,c??null,p,!1,y,k),n[Ts]=a.current,Qi(n),h)for(n=0;n<h.length;n++)c=h[n],p=c._getVersion,p=p(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,p]:a.mutableSourceEagerHydrationData.push(c,p);return new oc(a)},kr.render=function(n,a,c){if(!lc(a))throw Error(r(200));return cc(null,n,a,!1,c)},kr.unmountComponentAtNode=function(n){if(!lc(n))throw Error(r(40));return n._reactRootContainer?(Kn(function(){cc(null,null,n,!1,function(){n._reactRootContainer=null,n[Ts]=null})}),!0):!1},kr.unstable_batchedUpdates=eh,kr.unstable_renderSubtreeIntoContainer=function(n,a,c,h){if(!lc(c))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return cc(n,a,c,!1,h)},kr.version="18.3.1-next-f1338f8080-20240426",kr}var px;function lv(){if(px)return hh.exports;px=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hh.exports=pS(),hh.exports}var mx;function mS(){if(mx)return dc;mx=1;var e=lv();return dc.createRoot=e.createRoot,dc.hydrateRoot=e.hydrateRoot,dc}var gS=mS(),x=Xc();const Be=ov(x),cv=lS({__proto__:null,default:Be},[x]);function xS(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,i,o,l,u=[],d="",f=e.split("/");for(f[0]||f.shift();o=f.shift();)r=o[0],r==="*"?(u.push(r),d+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(i=o.indexOf("?",1),l=o.indexOf(".",1),u.push(o.substring(1,~i?i:~l?l:o.length)),d+=~i&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(d+=(~i?"?":"")+"\\"+o.substring(l))):d+="/"+o;return{keys:u,pattern:new RegExp("^"+d+(t?"(?=$|/)":"/?$"),"i")}}var mh={exports:{}},gh={};var gx;function yS(){if(gx)return gh;gx=1;var e=Xc();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var r=typeof Object.is=="function"?Object.is:t,i=e.useState,o=e.useEffect,l=e.useLayoutEffect,u=e.useDebugValue;function d(v,b){var S=b(),N=i({inst:{value:S,getSnapshot:b}}),w=N[0].inst,j=N[1];return l(function(){w.value=S,w.getSnapshot=b,f(w)&&j({inst:w})},[v,S,b]),o(function(){return f(w)&&j({inst:w}),v(function(){f(w)&&j({inst:w})})},[v]),u(S),S}function f(v){var b=v.getSnapshot;v=v.value;try{var S=b();return!r(v,S)}catch{return!0}}function m(v,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return gh.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,gh}var xx;function vS(){return xx||(xx=1,mh.exports=yS()),mh.exports}var wS=vS();const bS=cv.useInsertionEffect,jS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NS=jS?x.useLayoutEffect:x.useEffect,SS=bS||NS,uv=e=>{const t=x.useRef([e,(...r)=>t[0](...r)]).current;return SS(()=>{t[0]=e}),t[1]},kS="popstate",Of="pushState",Lf="replaceState",_S="hashchange",yx=[kS,Of,Lf,_S],CS=e=>{for(const t of yx)addEventListener(t,e);return()=>{for(const t of yx)removeEventListener(t,e)}},dv=(e,t)=>wS.useSyncExternalStore(CS,e,t),ES=()=>location.search,PS=({ssrSearch:e=""}={})=>dv(ES,()=>e),vx=()=>location.pathname,TS=({ssrPath:e}={})=>dv(vx,e?()=>e:vx),RS=(e,{replace:t=!1,state:r=null}={})=>history[t?Lf:Of](r,"",e),AS=(e={})=>[TS(e),RS],wx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[wx]>"u"){for(const e of[Of,Lf]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),i=new Event(e);return i.arguments=arguments,dispatchEvent(i),r}}Object.defineProperty(window,wx,{value:!0})}const IS=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",hv=(e="")=>e==="/"?"":e,OS=(e,t)=>e[0]==="~"?e.slice(1):hv(t)+e,LS=(e="",t)=>IS(bx(hv(e)),bx(t)),bx=e=>{try{return decodeURI(e)}catch{return e}},fv={hook:AS,searchHook:PS,parser:xS,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},pv=x.createContext(fv),qo=()=>x.useContext(pv),mv={},gv=x.createContext(mv),Si=()=>x.useContext(gv),Zc=e=>{const[t,r]=e.hook(e);return[LS(e.base,t),uv((i,o)=>r(OS(i,e.base),o))]},An=()=>Zc(qo()),xv=(e,t,r,i)=>{const{pattern:o,keys:l}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",i),u=o.exec(r)||[],[d,...f]=u;return d!==void 0?[!0,(()=>{const m=l!==!1?Object.fromEntries(l.map((v,b)=>[v,f[b]])):u.groups;let g={...f};return m&&Object.assign(g,m),g})(),...i?[d]:[]]:[!1,null]},DS=({children:e,...t})=>{const r=qo(),i=t.hook?fv:r;let o=i;const[l,u]=t.ssrPath?.split("?")??[];u&&(t.ssrSearch=u,t.ssrPath=l),t.hrefs=t.hrefs??t.hook?.hrefs;let d=x.useRef({}),f=d.current,m=f;for(let g in i){const v=g==="base"?i[g]+(t[g]||""):t[g]||i[g];f===m&&v!==m[g]&&(d.current=m={...m}),m[g]=v,v!==i[g]&&(o=m)}return x.createElement(pv.Provider,{value:o,children:e})},jx=({children:e,component:t},r)=>t?x.createElement(t,{params:r}):typeof e=="function"?e(r):e,MS=e=>{let t=x.useRef(mv),r=t.current;for(const i in e)e[i]!==r[i]&&(r=e);return Object.keys(e).length===0&&(r=e),t.current=r},Lt=({path:e,nest:t,match:r,...i})=>{const o=qo(),[l]=Zc(o),[u,d,f]=r??xv(o.parser,e,l,t),m=MS({...Si(),...d});if(!u)return null;const g=f?x.createElement(DS,{base:f},jx(i,m)):jx(i,m);return x.createElement(gv.Provider,{value:m,children:g})},ye=x.forwardRef((e,t)=>{const r=qo(),[i,o]=Zc(r),{to:l="",href:u=l,onClick:d,asChild:f,children:m,className:g,replace:v,state:b,...S}=e,N=uv(j=>{j.ctrlKey||j.metaKey||j.altKey||j.shiftKey||j.button!==0||(d?.(j),j.defaultPrevented||(j.preventDefault(),o(u,e)))}),w=r.hrefs(u[0]==="~"?u.slice(1):r.base+u,r);return f&&x.isValidElement(m)?x.cloneElement(m,{onClick:N,href:w}):x.createElement("a",{...S,onClick:N,href:w,className:g?.call?g(i===u):g,children:m,ref:t})}),yv=e=>Array.isArray(e)?e.flatMap(t=>yv(t&&t.type===x.Fragment?t.props.children:t)):[e],$S=({children:e,location:t})=>{const r=qo(),[i]=Zc(r);for(const o of yv(e)){let l=0;if(x.isValidElement(o)&&(l=xv(r.parser,o.props.path,t||i,o.props.nest))[0])return x.cloneElement(o,{match:l})}return null};var ki=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ua=typeof window>"u"||"Deno"in globalThis;function qr(){}function FS(e,t){return typeof e=="function"?e(t):e}function Vh(e){return typeof e=="number"&&e>=0&&e!==1/0}function vv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ni(e,t){return typeof e=="function"?e(t):e}function ns(e,t){return typeof e=="function"?e(t):e}function Nx(e,t){const{type:r="all",exact:i,fetchStatus:o,predicate:l,queryKey:u,stale:d}=e;if(u){if(i){if(t.queryHash!==Df(u,t.options))return!1}else if(!Ao(t.queryKey,u))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||o&&o!==t.state.fetchStatus||l&&!l(t))}function Sx(e,t){const{exact:r,status:i,predicate:o,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(r){if(da(t.options.mutationKey)!==da(l))return!1}else if(!Ao(t.options.mutationKey,l))return!1}return!(i&&t.state.status!==i||o&&!o(t))}function Df(e,t){return(t?.queryKeyHashFn||da)(e)}function da(e){return JSON.stringify(e,(t,r)=>Wh(r)?Object.keys(r).sort().reduce((i,o)=>(i[o]=r[o],i),{}):r)}function Ao(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Ao(e[r],t[r])):!1}function wv(e,t){if(e===t)return e;const r=kx(e)&&kx(t);if(r||Wh(e)&&Wh(t)){const i=r?e:Object.keys(e),o=i.length,l=r?t:Object.keys(t),u=l.length,d=r?[]:{};let f=0;for(let m=0;m<u;m++){const g=r?m:l[m];(!r&&i.includes(g)||r)&&e[g]===void 0&&t[g]===void 0?(d[g]=void 0,f++):(d[g]=wv(e[g],t[g]),d[g]===e[g]&&e[g]!==void 0&&f++)}return o===u&&f===o?e:d}return t}function Oc(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function kx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Wh(e){if(!_x(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!_x(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _x(e){return Object.prototype.toString.call(e)==="[object Object]"}function US(e){return new Promise(t=>{setTimeout(t,e)})}function qh(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?wv(e,t):t}function zS(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function BS(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var Mf=Symbol();function bv(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Mf?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var VS=class extends ki{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!ua&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},$f=new VS,WS=class extends ki{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!ua&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Lc=new WS;function Hh(){let e,t;const r=new Promise((o,l)=>{e=o,t=l});r.status="pending",r.catch(()=>{});function i(o){Object.assign(r,o),delete r.resolve,delete r.reject}return r.resolve=o=>{i({status:"fulfilled",value:o}),e(o)},r.reject=o=>{i({status:"rejected",reason:o}),t(o)},r}function qS(e){return Math.min(1e3*2**e,3e4)}function jv(e){return(e??"online")==="online"?Lc.isOnline():!0}var Nv=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function xh(e){return e instanceof Nv}function Sv(e){let t=!1,r=0,i=!1,o;const l=Hh(),u=w=>{i||(b(new Nv(w)),e.abort?.())},d=()=>{t=!0},f=()=>{t=!1},m=()=>$f.isFocused()&&(e.networkMode==="always"||Lc.isOnline())&&e.canRun(),g=()=>jv(e.networkMode)&&e.canRun(),v=w=>{i||(i=!0,e.onSuccess?.(w),o?.(),l.resolve(w))},b=w=>{i||(i=!0,e.onError?.(w),o?.(),l.reject(w))},S=()=>new Promise(w=>{o=j=>{(i||m())&&w(j)},e.onPause?.()}).then(()=>{o=void 0,i||e.onContinue?.()}),N=()=>{if(i)return;let w;const j=r===0?e.initialPromise:void 0;try{w=j??e.fn()}catch(C){w=Promise.reject(C)}Promise.resolve(w).then(v).catch(C=>{if(i)return;const _=e.retry??(ua?0:3),P=e.retryDelay??qS,A=typeof P=="function"?P(r,C):P,$=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,C);if(t||!$){b(C);return}r++,e.onFail?.(r,C),US(A).then(()=>m()?void 0:S()).then(()=>{t?b(C):N()})})};return{promise:l,cancel:u,continue:()=>(o?.(),l),cancelRetry:d,continueRetry:f,canStart:g,start:()=>(g()?N():S().then(N),l)}}function HS(){let e=[],t=0,r=d=>{d()},i=d=>{d()},o=d=>setTimeout(d,0);const l=d=>{t?e.push(d):o(()=>{r(d)})},u=()=>{const d=e;e=[],d.length&&o(()=>{i(()=>{d.forEach(f=>{r(f)})})})};return{batch:d=>{let f;t++;try{f=d()}finally{t--,t||u()}return f},batchCalls:d=>(...f)=>{l(()=>{d(...f)})},schedule:l,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{i=d},setScheduler:d=>{o=d}}}var Ht=HS(),kv=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vh(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ua?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},KS=class extends kv{#e;#t;#s;#r;#i;#a;constructor(e){super(),this.#a=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=GS(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){const r=qh(this.state.data,e,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#n({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(qr).catch(qr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>ns(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!vv(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#a=!0,r.signal)})},o=()=>{const d=bv(this.options,t),f={queryKey:this.queryKey,meta:this.meta};return i(f),this.#a=!1,this.options.persister?this.options.persister(d,f,this):d(f)},l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#n({type:"fetch",meta:l.fetchOptions?.meta});const u=d=>{xh(d)&&d.silent||this.#n({type:"error",error:d}),xh(d)||(this.#s.config.onError?.(d,this),this.#s.config.onSettled?.(this.state.data,d,this)),this.scheduleGc()};return this.#r=Sv({initialPromise:t?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{if(d===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(f){u(f);return}this.#s.config.onSuccess?.(d,this),this.#s.config.onSettled?.(d,this.state.error,this),this.scheduleGc()},onError:u,onFail:(d,f)=>{this.#n({type:"failed",failureCount:d,error:f})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#r.start()}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,..._v(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return xh(i)&&i.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ht.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function _v(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function GS(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var QS=class extends ki{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const i=t.queryKey,o=t.queryHash??Df(i,t);let l=this.get(o);return l||(l=new KS({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Nx(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Nx(e,r)):t}notify(e){Ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},YS=class extends kv{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||Cv(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){this.#s=Sv({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#r({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",r=!this.#s.canStart();try{if(!t){this.#r({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);const o=await this.options.onMutate?.(e);o!==this.state.context&&this.#r({type:"pending",context:o,variables:e,isPaused:r})}const i=await this.#s.start();return await this.#t.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#t.config.onError?.(i,e,this.state.context,this),await this.options.onError?.(i,e,this.state.context),await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,e,this.state.context),i}finally{this.#r({type:"error",error:i})}}finally{this.#t.runNext(this)}}#r(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ht.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function Cv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var JS=class extends ki{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,r){const i=new YS({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){const t=hc(e),r=this.#e.get(t)??[];r.push(e),this.#e.set(t,r),this.notify({type:"added",mutation:e})}remove(e){const t=hc(e);if(this.#e.has(t)){const r=this.#e.get(t)?.filter(i=>i!==e);r&&(r.length===0?this.#e.delete(t):this.#e.set(t,r))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(hc(e))?.find(r=>r.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(hc(e))?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){Ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Sx(t,r))}findAll(e={}){return this.getAll().filter(t=>Sx(e,t))}notify(e){Ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ht.batch(()=>Promise.all(e.map(t=>t.continue().catch(qr))))}};function hc(e){return e.options.scope?.id??String(e.mutationId)}function Cx(e){return{onFetch:(t,r)=>{const i=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],u=t.state.data?.pageParams||[];let d={pages:[],pageParams:[]},f=0;const m=async()=>{let g=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},b=bv(t.options,t.fetchOptions),S=async(N,w,j)=>{if(g)return Promise.reject();if(w==null&&N.pages.length)return Promise.resolve(N);const C={queryKey:t.queryKey,pageParam:w,direction:j?"backward":"forward",meta:t.options.meta};v(C);const _=await b(C),{maxPages:P}=t.options,A=j?BS:zS;return{pages:A(N.pages,_,P),pageParams:A(N.pageParams,w,P)}};if(o&&l.length){const N=o==="backward",w=N?XS:Ex,j={pages:l,pageParams:u},C=w(i,j);d=await S(j,C,N)}else{const N=e??l.length;do{const w=f===0?u[0]??i.initialPageParam:Ex(i,d);if(f>0&&w==null)break;d=await S(d,w),f++}while(f<N)}return d};t.options.persister?t.fetchFn=()=>t.options.persister?.(m,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=m}}}function Ex(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function XS(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var ZS=class{#e;#t;#s;#r;#i;#a;#n;#o;constructor(e={}){this.#e=e.queryCache||new QS,this.#t=e.mutationCache||new JS,this.#s=e.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#n=$f.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Lc.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#n?.(),this.#n=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),i=this.#e.build(this,r);return e.revalidateIfStale&&i.isStaleByTime(ni(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(i.queryHash)?.state.data,u=FS(t,l);if(u!==void 0)return this.#e.build(this,i).setData(u,{...r,manual:!0})}setQueriesData(e,t,r){return Ht.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ht.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e,i={type:"active",...e};return Ht.batch(()=>(r.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries(i,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},i=Ht.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(i).then(qr).catch(qr)}invalidateQueries(e={},t={}){return Ht.batch(()=>{if(this.#e.findAll(e).forEach(i=>{i.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:t?.cancelRefetch??!0},i=Ht.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()).map(o=>{let l=o.fetch(void 0,r);return r.throwOnError||(l=l.catch(qr)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(i).then(qr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(ni(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(qr).catch(qr)}fetchInfiniteQuery(e){return e.behavior=Cx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(qr).catch(qr)}ensureInfiniteQueryData(e){return e.behavior=Cx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Lc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#r.set(da(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()];let r={};return t.forEach(i=>{Ao(e,i.queryKey)&&(r={...r,...i.defaultOptions})}),r}setMutationDefaults(e,t){this.#i.set(da(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()];let r={};return t.forEach(i=>{Ao(e,i.mutationKey)&&(r={...r,...i.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Df(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Mf&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},ek=class extends ki{constructor(e,t){super(),this.options=t,this.#e=e,this.#o=null,this.#n=Hh(),this.options.experimental_prefetchInRender||this.#n.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#s=void 0;#r=void 0;#i;#a;#n;#o;#m;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Px(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kh(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kh(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#b(),this.#t.removeObserver(this)}setOptions(e,t){const r=this.options,i=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ns(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),r._defaulted&&!Oc(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&Tx(this.#t,i,this.options,r)&&this.#d(),this.updateResult(t),o&&(this.#t!==i||ns(this.options.enabled,this.#t)!==ns(r.enabled,this.#t)||ni(this.options.staleTime,this.#t)!==ni(r.staleTime,this.#t))&&this.#g();const l=this.#x();o&&(this.#t!==i||ns(this.options.enabled,this.#t)!==ns(r.enabled,this.#t)||l!==this.#l)&&this.#y(l)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return rk(this,r)&&(this.#r=r,this.#a=this.options,this.#i=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(e,t){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),t?.(i),e[i])})}),r}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(e){this.#j();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(qr)),t}#g(){this.#w();const e=ni(this.options.staleTime,this.#t);if(ua||this.#r.isStale||!Vh(e))return;const r=vv(this.#r.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#l=e,!(ua||ns(this.options.enabled,this.#t)===!1||!Vh(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||$f.isFocused())&&this.#d()},this.#l))}#v(){this.#g(),this.#y(this.#x())}#w(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,i=this.options,o=this.#r,l=this.#i,u=this.#a,f=e!==r?e.state:this.#s,{state:m}=e;let g={...m},v=!1,b;if(t._optimisticResults){const L=this.hasListeners(),Q=!L&&Px(e,t),X=L&&Tx(e,r,t,i);(Q||X)&&(g={...g,..._v(m.data,e.options)}),t._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:S,errorUpdatedAt:N,status:w}=g;if(t.select&&g.data!==void 0)if(o&&g.data===l?.data&&t.select===this.#m)b=this.#h;else try{this.#m=t.select,b=t.select(g.data),b=qh(o?.data,b,t),this.#h=b,this.#o=null}catch(L){this.#o=L}else b=g.data;if(t.placeholderData!==void 0&&b===void 0&&w==="pending"){let L;if(o?.isPlaceholderData&&t.placeholderData===u?.placeholderData)L=o.data;else if(L=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,t.select&&L!==void 0)try{L=t.select(L),this.#o=null}catch(Q){this.#o=Q}L!==void 0&&(w="success",b=qh(o?.data,L,t),v=!0)}this.#o&&(S=this.#o,b=this.#h,N=Date.now(),w="error");const j=g.fetchStatus==="fetching",C=w==="pending",_=w==="error",P=C&&j,A=b!==void 0,E={status:w,fetchStatus:g.fetchStatus,isPending:C,isSuccess:w==="success",isError:_,isInitialLoading:P,isLoading:P,data:b,dataUpdatedAt:g.dataUpdatedAt,error:S,errorUpdatedAt:N,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!C,isLoadingError:_&&!A,isPaused:g.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:_&&A,isStale:Ff(e,t),refetch:this.refetch,promise:this.#n};if(this.options.experimental_prefetchInRender){const L=ee=>{E.status==="error"?ee.reject(E.error):E.data!==void 0&&ee.resolve(E.data)},Q=()=>{const ee=this.#n=E.promise=Hh();L(ee)},X=this.#n;switch(X.status){case"pending":e.queryHash===r.queryHash&&L(X);break;case"fulfilled":(E.status==="error"||E.data!==X.value)&&Q();break;case"rejected":(E.status!=="error"||E.error!==X.reason)&&Q();break}}return E}updateResult(e){const t=this.#r,r=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#f=this.#t),Oc(r,t))return;this.#r=r;const i={},o=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,u=typeof l=="function"?l():l;if(u==="all"||!u&&!this.#p.size)return!0;const d=new Set(u??this.#p);return this.options.throwOnError&&d.add("error"),Object.keys(this.#r).some(f=>{const m=f;return this.#r[m]!==t[m]&&d.has(m)})};e?.listeners!==!1&&o()&&(i.listeners=!0),this.#N({...i,...e})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#N(e){Ht.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function tk(e,t){return ns(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Px(e,t){return tk(e,t)||e.state.data!==void 0&&Kh(e,t,t.refetchOnMount)}function Kh(e,t,r){if(ns(t.enabled,e)!==!1){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&Ff(e,t)}return!1}function Tx(e,t,r,i){return(e!==t||ns(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ff(e,r)}function Ff(e,t){return ns(t.enabled,e)!==!1&&e.isStaleByTime(ni(t.staleTime,e))}function rk(e,t){return!Oc(e.getCurrentResult(),t)}var sk=class extends ki{#e;#t=void 0;#s;#r;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Oc(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&da(r.mutationKey)!==da(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(t,r){return this.#r=r,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(t)}#i(){const t=this.#s?.state??Cv();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){Ht.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#t.variables,i=this.#t.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,r,i),this.#r.onSettled?.(t.data,null,r,i)):t?.type==="error"&&(this.#r.onError?.(t.error,r,i),this.#r.onSettled?.(void 0,t.error,r,i))}this.listeners.forEach(r=>{r(this.#t)})})}},Ev=x.createContext(void 0),Ho=e=>{const t=x.useContext(Ev);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},nk=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Ev.Provider,{value:e,children:t})),Pv=x.createContext(!1),ak=()=>x.useContext(Pv);Pv.Provider;function ik(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ok=x.createContext(ik()),lk=()=>x.useContext(ok);function Tv(e,t){return typeof e=="function"?e(...t):!!e}function Gh(){}var ck=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},uk=e=>{x.useEffect(()=>{e.clearReset()},[e])},dk=({result:e,errorResetBoundary:t,throwOnError:r,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&Tv(r,[e.error,i]),hk=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},fk=(e,t)=>e.isLoading&&e.isFetching&&!t,pk=(e,t)=>e?.suspense&&t.isPending,Rx=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function mk(e,t,r){const i=Ho(),o=ak(),l=lk(),u=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=o?"isRestoring":"optimistic",hk(u),ck(u,l),uk(l);const d=!i.getQueryCache().get(u.queryHash),[f]=x.useState(()=>new t(i,u)),m=f.getOptimisticResult(u);if(x.useSyncExternalStore(x.useCallback(g=>{const v=o?Gh:f.subscribe(Ht.batchCalls(g));return f.updateResult(),v},[f,o]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),x.useEffect(()=>{f.setOptions(u,{listeners:!1})},[u,f]),pk(u,m))throw Rx(u,f,l);if(dk({result:m,errorResetBoundary:l,throwOnError:u.throwOnError,query:i.getQueryCache().get(u.queryHash)}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(u,m),u.experimental_prefetchInRender&&!ua&&fk(m,o)&&(d?Rx(u,f,l):i.getQueryCache().get(u.queryHash)?.promise)?.catch(Gh).finally(()=>{f.updateResult()}),u.notifyOnChangeProps?m:f.trackResult(m)}function ut(e,t){return mk(e,ek)}function Ft(e,t){const r=Ho(),[i]=x.useState(()=>new sk(r,e));x.useEffect(()=>{i.setOptions(e)},[i,e]);const o=x.useSyncExternalStore(x.useCallback(u=>i.subscribe(Ht.batchCalls(u)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=x.useCallback((u,d)=>{i.mutate(u,d).catch(Gh)},[i]);if(o.error&&Tv(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}var js=function(){return js=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},js.apply(this,arguments)};function _i(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r}function gk(e,t,r,i){function o(l){return l instanceof r?l:new r(function(u){u(l)})}return new(r||(r=Promise))(function(l,u){function d(g){try{m(i.next(g))}catch(v){u(v)}}function f(g){try{m(i.throw(g))}catch(v){u(v)}}function m(g){g.done?l(g.value):o(g.value).then(d,f)}m((i=i.apply(e,t||[])).next())})}function xk(e,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,l;i<o;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return e.concat(l||Array.prototype.slice.call(t))}const yk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Uf extends Error{constructor(t,r="FunctionsError",i){super(t),this.name=r,this.context=i}}class vk extends Uf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ax extends Uf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ix extends Uf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Qh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qh||(Qh={}));class wk{constructor(t,{headers:r={},customFetch:i,region:o=Qh.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=yk(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return gk(this,arguments,void 0,function*(r,i={}){var o;let l,u;try{const{headers:d,method:f,body:m,signal:g,timeout:v}=i;let b={},{region:S}=i;S||(S=this.region);const N=new URL(`${this.url}/${r}`);S&&S!=="any"&&(b["x-region"]=S,N.searchParams.set("forceFunctionRegion",S));let w;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",w=m):typeof m=="string"?(b["Content-Type"]="text/plain",w=m):typeof FormData<"u"&&m instanceof FormData?w=m:(b["Content-Type"]="application/json",w=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?w=JSON.stringify(m):w=m;let j=g;v&&(u=new AbortController,l=setTimeout(()=>u.abort(),v),g?(j=u.signal,g.addEventListener("abort",()=>u.abort())):j=u.signal);const C=yield this.fetch(N.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:w,signal:j}).catch($=>{throw new vk($)}),_=C.headers.get("x-relay-error");if(_&&_==="true")throw new Ax(C);if(!C.ok)throw new Ix(C);let P=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),A;return P==="application/json"?A=yield C.json():P==="application/octet-stream"||P==="application/pdf"?A=yield C.blob():P==="text/event-stream"?A=C:P==="multipart/form-data"?A=yield C.formData():A=yield C.text(),{data:A,error:null,response:C}}catch(d){return{data:null,error:d,response:d instanceof Ix||d instanceof Ax?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var bk=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},jk=class{constructor(e){var t,r,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(i=e.urlLengthLimit)!==null&&i!==void 0?i:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let u=null,d=null,f=null,m=l.status,g=l.statusText;if(l.ok){var v,b;if(r.method!=="HEAD"){var S;const C=await l.text();C===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((S=r.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?d=C:d=JSON.parse(C))}const w=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),j=(b=l.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");w&&j&&j.length>1&&(f=parseInt(j[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,m=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var N;const w=await l.text();try{u=JSON.parse(w),Array.isArray(u)&&l.status===404&&(d=[],u=null,m=200,g="OK")}catch{l.status===404&&w===""?(m=204,g="No Content"):u={message:w}}if(u&&r.isMaybeSingle&&(!(u==null||(N=u.details)===null||N===void 0)&&N.includes("0 rows"))&&(u=null,m=200,g="OK"),u&&r.shouldThrowOnError)throw new bk(u)}return{error:u,data:d,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(o=o.catch(l=>{var u;let d="",f="",m="";const g=l?.cause;if(g){var v,b,S,N;const C=(v=g?.message)!==null&&v!==void 0?v:"",_=(b=g?.code)!==null&&b!==void 0?b:"";d=`${(S=l?.name)!==null&&S!==void 0?S:"FetchError"}: ${l?.message}`,d+=`

Caused by: ${(N=g?.name)!==null&&N!==void 0?N:"Error"}: ${C}`,_&&(d+=` (${_})`),g?.stack&&(d+=`
${g.stack}`)}else{var w;d=(w=l?.stack)!==null&&w!==void 0?w:""}const j=this.url.toString().length;return l?.name==="AbortError"||l?.code==="ABORT_ERR"?(m="",f="Request was aborted (timeout or manual cancellation)",j>this.urlLengthLimit&&(f+=`. Note: Your request URL is ${j} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(g?.name==="HeadersOverflowError"||g?.code==="UND_ERR_HEADERS_OVERFLOW")&&(m="",f="HTTP headers exceeded server limits (typically 16KB)",j>this.urlLengthLimit&&(f+=`. Your request URL is ${j} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=l?.name)!==null&&u!==void 0?u:"FetchError"}: ${l?.message}`,details:d,hint:f,code:m},data:null,count:null,status:0,statusText:""}})),o.then(e,t)}returns(){return this}overrideTypes(){return this}},Nk=class extends jk{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(l,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:l="text"}={}){var u;const d=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Ox=new RegExp("[,()]");var ei=class extends Nk{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&Ox.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&Ox.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${l}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Sk=class{constructor(e,{headers:t={},schema:r,fetch:i,urlLengthLimit:o=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:i}=t??{},o=r?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join(""),{url:d,headers:f}=this.cloneRequestState();return d.searchParams.set("select",u),i&&f.append("Prefer",`count=${i}`),new ei({method:o,url:d,headers:f,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const o="POST",{url:l,headers:u}=this.cloneRequestState();if(t&&u.append("Prefer",`count=${t}`),r||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(d.length>0){const f=[...new Set(d)].map(m=>`"${m}"`);l.searchParams.set("columns",f.join(","))}}return new ei({method:o,url:l,headers:u,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var l;const u="POST",{url:d,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&d.searchParams.set("on_conflict",t),i&&f.append("Prefer",`count=${i}`),o||f.append("Prefer","missing=default"),Array.isArray(e)){const m=e.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(m.length>0){const g=[...new Set(m)].map(v=>`"${v}"`);d.searchParams.set("columns",g.join(","))}}return new ei({method:u,url:d,headers:f,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const i="PATCH",{url:o,headers:l}=this.cloneRequestState();return t&&l.append("Prefer",`count=${t}`),new ei({method:i,url:o,headers:l,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new ei({method:r,url:i,headers:o,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Io(e){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Io(e)}function kk(e,t){if(Io(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(Io(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _k(e){var t=kk(e,"string");return Io(t)=="symbol"?t:t+""}function Ck(e,t,r){return(t=_k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lx(Object(r),!0).forEach(function(i){Ck(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lx(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var Ek=class Rv{constructor(t,{headers:r={},schema:i,fetch:o,timeout:l,urlLengthLimit:u=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=i,this.urlLengthLimit=u;const d=o??globalThis.fetch;l!==void 0&&l>0?this.fetch=(f,m)=>{const g=new AbortController,v=setTimeout(()=>g.abort(),l),b=m?.signal;if(b){if(b.aborted)return clearTimeout(v),d(f,m);const S=()=>{clearTimeout(v),g.abort()};return b.addEventListener("abort",S,{once:!0}),d(f,fc(fc({},m),{},{signal:g.signal})).finally(()=>{clearTimeout(v),b.removeEventListener("abort",S)})}return d(f,fc(fc({},m),{},{signal:g.signal})).finally(()=>clearTimeout(v))}:this.fetch=d}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Sk(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Rv(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:i=!1,get:o=!1,count:l}={}){var u;let d;const f=new URL(`${this.url}/rpc/${t}`);let m;const g=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(g)),v=i&&Object.values(r).some(g);v?(d="POST",m=r):i||o?(d=i?"HEAD":"GET",Object.entries(r).filter(([S,N])=>N!==void 0).map(([S,N])=>[S,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([S,N])=>{f.searchParams.append(S,N)})):(d="POST",m=r);const b=new Headers(this.headers);return v?b.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&b.set("Prefer",`count=${l}`),new ei({method:d,url:f,headers:b,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class Pk{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const i=r.versions;if(i&&i.node){const o=i.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const i=this.getWebSocketConstructor();return new i(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Tk="2.95.3",Rk=`realtime-js/${Tk}`,Ak="1.0.0",Av="2.0.0",Dx=Av,Yh=1e4,Ik=1e3,Ok=100;var jn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(jn||(jn={}));var Vt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Vt||(Vt={}));var ss;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ss||(ss={}));var Jh;(function(e){e.websocket="websocket"})(Jh||(Jh={}));var na;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(na||(na={}));class Lk{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var r,i;const o=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(t,r,i){var o,l;const u=t.topic,d=(o=t.ref)!==null&&o!==void 0?o:"",f=(l=t.join_ref)!==null&&l!==void 0?l:"",m=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+d.length+u.length+m.length+v.length,S=new ArrayBuffer(this.HEADER_LENGTH+b);let N=new DataView(S),w=0;N.setUint8(w++,this.KINDS.userBroadcastPush),N.setUint8(w++,f.length),N.setUint8(w++,d.length),N.setUint8(w++,u.length),N.setUint8(w++,m.length),N.setUint8(w++,v.length),N.setUint8(w++,r),Array.from(f,C=>N.setUint8(w++,C.charCodeAt(0))),Array.from(d,C=>N.setUint8(w++,C.charCodeAt(0))),Array.from(u,C=>N.setUint8(w++,C.charCodeAt(0))),Array.from(m,C=>N.setUint8(w++,C.charCodeAt(0))),Array.from(v,C=>N.setUint8(w++,C.charCodeAt(0)));var j=new Uint8Array(S.byteLength+i.byteLength);return j.set(new Uint8Array(S),0),j.set(new Uint8Array(i),S.byteLength),j.buffer}decode(t,r){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return r(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,l,u,d,f]=i;return r({join_ref:o,ref:l,topic:u,event:d,payload:f})}return r({})}_binaryDecode(t){const r=new DataView(t),i=r.getUint8(0),o=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,r,o)}_decodeUserBroadcast(t,r,i){const o=r.getUint8(1),l=r.getUint8(2),u=r.getUint8(3),d=r.getUint8(4);let f=this.HEADER_LENGTH+4;const m=i.decode(t.slice(f,f+o));f=f+o;const g=i.decode(t.slice(f,f+l));f=f+l;const v=i.decode(t.slice(f,f+u));f=f+u;const b=t.slice(f,t.byteLength),S=d===this.JSON_ENCODING?JSON.parse(i.decode(b)):b,N={type:this.BROADCAST_EVENT,event:g,payload:S};return u>0&&(N.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>r.includes(i)))}}class Iv{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mt||(mt={}));const Mx=(e,t,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((l,u)=>(l[u]=Dk(u,e,t,o),l),{}):{}},Dk=(e,t,r,i)=>{const o=t.find(d=>d.name===e),l=o?.type,u=r[e];return l&&!i.includes(l)?Ov(l,u):Xh(u)},Ov=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Uk(t,r)}switch(e){case mt.bool:return Mk(t);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return $k(t);case mt.json:case mt.jsonb:return Fk(t);case mt.timestamp:return zk(t);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return Xh(t);default:return Xh(t)}},Xh=e=>e,Mk=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$k=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Fk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Uk=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,i=e[r];if(e[0]==="{"&&i==="}"){let l;const u=e.slice(1,r);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>Ov(t,d))}return e},zk=e=>typeof e=="string"?e.replace(" ","T"):e,Lv=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class yh{constructor(t,r,i={},o=Yh){this.channel=t,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $x;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})($x||($x={}));class _o{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_o.syncState(this.state,o,l,u),this.pendingDiffs.forEach(f=>{this.state=_o.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=_o.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,i,o){const l=this.cloneDeep(t),u=this.transformState(r),d={},f={};return this.map(l,(m,g)=>{u[m]||(f[m]=g)}),this.map(u,(m,g)=>{const v=l[m];if(v){const b=g.map(j=>j.presence_ref),S=v.map(j=>j.presence_ref),N=g.filter(j=>S.indexOf(j.presence_ref)<0),w=v.filter(j=>b.indexOf(j.presence_ref)<0);N.length>0&&(d[m]=N),w.length>0&&(f[m]=w)}else d[m]=g}),this.syncDiff(l,{joins:d,leaves:f},i,o)}static syncDiff(t,r,i,o){const{joins:l,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(d,f)=>{var m;const g=(m=t[d])!==null&&m!==void 0?m:[];if(t[d]=this.cloneDeep(f),g.length>0){const v=t[d].map(S=>S.presence_ref),b=g.filter(S=>v.indexOf(S.presence_ref)<0);t[d].unshift(...b)}i(d,g,f)}),this.map(u,(d,f)=>{let m=t[d];if(!m)return;const g=f.map(v=>v.presence_ref);m=m.filter(v=>g.indexOf(v.presence_ref)<0),t[d]=m,o(d,m,f),m.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(i=>r(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,i)=>{const o=t[i];return"metas"in o?r[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[i]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Fx||(Fx={}));var Co;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Co||(Co={}));var Us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Us||(Us={}));class si{constructor(t,r={config:{}},i){var o,l;if(this.topic=t,this.params=r,this.socket=i,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new yh(this,ss.join,this.params,this.timeout),this.rejoinTimer=new Iv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ss.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new _o(this),this.broadcastEndpointURL=Lv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:u,presence:d,private:f}}=this.params,m=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&o!==void 0?o:[],g=!!this.bindings[Co.PRESENCE]&&this.bindings[Co.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,v={},b={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(S=>t?.(Us.CHANNEL_ERROR,S)),this._onClose(()=>t?.(Us.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){t?.(Us.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(N=w?.length)!==null&&N!==void 0?N:0,C=[];for(let _=0;_<j;_++){const P=w[_],{filter:{event:A,schema:$,table:E,filter:L}}=P,Q=S&&S[_];if(Q&&Q.event===A&&si.isFilterValueEqual(Q.schema,$)&&si.isFilterValueEqual(Q.table,E)&&si.isFilterValueEqual(Q.filter,L))C.push(Object.assign(Object.assign({},P),{id:Q.id}));else{this.unsubscribe(),this.state=Vt.errored,t?.(Us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Us.SUBSCRIBED);return}}).receive("error",S=>{this.state=Vt.errored,t?.(Us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t?.(Us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,i){return this.state===Vt.joined&&t===Co.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,i)}async httpSend(t,r,i={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const m=await d.json();f=m.error||m.message||f}catch{}return Promise.reject(new Error(f))}async send(t,r={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,f;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Vt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ss.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new yh(this,ss.leave,{},t),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(t,r,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(l),u}_push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new yh(this,t,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ok){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,i){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,i){var o,l;const u=t.toLocaleLowerCase(),{close:d,error:f,leave:m,join:g}=ss;if(i&&[d,f,m,g].indexOf(u)>=0&&i!==this._joinRef())return;let b=this._onMessage(u,r,i);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var N,w,j;return((N=S.filter)===null||N===void 0?void 0:N.event)==="*"||((j=(w=S.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(S=>S.callback(b,i)):(l=this.bindings[u])===null||l===void 0||l.filter(S=>{var N,w,j,C,_,P;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const A=S.id,$=(N=S.filter)===null||N===void 0?void 0:N.event;return A&&((w=r.ids)===null||w===void 0?void 0:w.includes(A))&&($==="*"||$?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const A=(_=(C=S?.filter)===null||C===void 0?void 0:C.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return A==="*"||A===((P=r?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:w,table:j,commit_timestamp:C,type:_,errors:P}=N;b=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:C,eventType:_,new:{},old:{},errors:P}),this._getPayloadRecords(N))}S.callback(b,i)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,i){const o=t.toLocaleLowerCase(),l={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,r){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&si.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(t[i]!==r[i])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ss.close,{},t)}_onError(t){this._on(ss.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Mx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Mx(t.columns,t.old_record)),r}}const vh=()=>{},pc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bk=[1e3,2e3,5e3,1e4],Vk=1e4,Wk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qk{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yh,this.transport=null,this.heartbeatIntervalMs=pc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vh,this.ref=0,this.reconnectTimer=null,this.vsn=Dx,this.logger=vh,this.conn=null,this.sendBuffer=[],this.serializer=new Lk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Jh.websocket}`,this.httpEndpoint=Lv(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pk.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return r==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,i){this.logger(t,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case jn.connecting:return na.Connecting;case jn.open:return na.Open;case jn.closing:return na.Closing;default:return na.Closed}}isConnected(){return this.connectionState()===na.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new si(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:i,payload:o,ref:l}=t,u=()=>{this.encode(t,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${r} ${i} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ik,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",m)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:l,ref:u}=r,d=u?`(${u})`:"",f=l.status||"";this.log("receive",`${f} ${i} ${o} ${d}`.trim(),l),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(o,l,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===jn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===jn.open||this.conn.readyState===jn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ss.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${i}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const i=new Blob([Wk],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,i=!1;if(t)r=t,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const l={access_token:r,version:Rk};r&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(ss.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Iv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,i,o,l,u,d,f,m,g,v,b,S;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=t?.timeout)!==null&&i!==void 0?i:Yh,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:pc.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=t?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=t?.heartbeatCallback)!==null&&d!==void 0?d:vh,this.vsn=(f=t?.vsn)!==null&&f!==void 0?f:Dx,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=t?.reconnectAfterMs)!==null&&m!==void 0?m:(N=>Bk[N-1]||Vk),this.vsn){case Ak:this.encode=(g=t?.encode)!==null&&g!==void 0?g:((N,w)=>w(JSON.stringify(N))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((N,w)=>w(JSON.parse(N)));break;case Av:this.encode=(b=t?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(S=t?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Oo=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Hk(e,t,r){const i=new URL(t,e);if(r)for(const[o,l]of Object.entries(r))l!==void 0&&i.searchParams.set(o,l);return i.toString()}async function Kk(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Gk(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:o,body:l,headers:u}){const d=Hk(e.baseUrl,i,o),f=await Kk(e.auth),m=await t(d,{method:r,headers:{...l?{"Content-Type":"application/json"}:{},...f,...u},body:l?JSON.stringify(l):void 0}),g=await m.text(),v=(m.headers.get("content-type")||"").includes("application/json"),b=v&&g?JSON.parse(g):g;if(!m.ok){const S=v?b:void 0,N=S?.error;throw new Oo(N?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:N?.type,icebergCode:N?.code,details:S})}return{status:m.status,headers:m.headers,data:b}}}}function mc(e){return e.join("")}var Qk=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:mc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${mc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${mc(e.namespace)}`}),!0}catch(t){if(t instanceof Oo&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Oo&&r.status===409)return;throw r}}};function Ba(e){return e.join("")}var Yk=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ba(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ba(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ba(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ba(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ba(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ba(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Oo&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Oo&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Jk=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Gk({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new Qk(this.client,t),this.tableOps=new Yk(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},eu=class extends Error{constructor(e,t="storage",r,i){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=i}};function tu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var gc=class extends eu{constructor(e,t,r,i="storage"){super(e,i,t,r),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dv=class extends eu{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const Xk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Zk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Zh=e=>{if(Array.isArray(e))return e.map(r=>Zh(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=Zh(i)}),t},e_=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Lo(e){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lo(e)}function t_(e,t){if(Lo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(Lo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r_(e){var t=t_(e,"string");return Lo(t)=="symbol"?t:t+""}function s_(e,t,r){return(t=r_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ux(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ux(Object(r),!0).forEach(function(i){s_(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ux(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}const zx=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},n_=async(e,t,r,i)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const o=e,l=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const d=u?.statusCode||u?.code||l+"";t(new gc(zx(u),l,d,i))}).catch(()=>{if(i==="vectors"){const u=l+"";t(new gc(o.statusText||`HTTP ${l} error`,l,u,i))}else{const u=l+"";t(new gc(o.statusText||`HTTP ${l} error`,l,u,i))}});else{const u=l+"";t(new gc(o.statusText||`HTTP ${l} error`,l,u,i))}}else t(new Dv(zx(e),e,i))},a_=(e,t,r,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!i?ze(ze({},o),r):(Zk(i)?(o.headers=ze({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(i)):o.body=i,t?.duplex&&(o.duplex=t.duplex),ze(ze({},o),r))};async function mo(e,t,r,i,o,l,u){return new Promise((d,f)=>{e(r,a_(t,i,o,l)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;if(u==="vectors"){const g=m.headers.get("content-type");if(m.headers.get("content-length")==="0"||m.status===204)return{};if(!g||!g.includes("application/json"))return{}}return m.json()}).then(m=>d(m)).catch(m=>n_(m,f,i,u))})}function Mv(e="storage"){return{get:async(t,r,i,o)=>mo(t,"GET",r,i,o,void 0,e),post:async(t,r,i,o,l)=>mo(t,"POST",r,o,l,i,e),put:async(t,r,i,o,l)=>mo(t,"PUT",r,o,l,i,e),head:async(t,r,i,o)=>mo(t,"HEAD",r,ze(ze({},i),{},{noResolveJson:!0}),o,void 0,e),remove:async(t,r,i,o,l)=>mo(t,"DELETE",r,o,l,i,e)}}const i_=Mv("storage"),{get:Do,post:rs,put:ef,head:o_,remove:zf}=i_,Mr=Mv("vectors");var Ci=class{constructor(e,t={},r,i="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=Xk(r),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tu(r))return{data:null,error:r};throw r}}},l_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(tu(t))return{data:null,error:t};throw t}}};let $v;$v=Symbol.toStringTag;var c_=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[$v]="BlobDownloadBuilder",this.promise=null}asStream(){return new l_(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(tu(t))return{data:null,error:t};throw t}}};const u_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var d_=class extends Ci{constructor(e,t={},r,i){super(e,t,i,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,i){var o=this;return o.handleOperation(async()=>{let l;const u=ze(ze({},Bx),i);let d=ze(ze({},o.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",o.encodeMetadata(f)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),f&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(f))):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,f&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),i?.headers&&(d=ze(ze({},d),i.headers));const m=o._removeEmptyFolders(t),g=o._getFinalPath(m),v=await(e=="PUT"?ef:rs)(o.fetch,`${o.url}/object/${g}`,l,ze({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{path:m,id:v.Id,fullPath:v.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,i){var o=this;const l=o._removeEmptyFolders(e),u=o._getFinalPath(l),d=new URL(o.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",t),o.handleOperation(async()=>{let f;const m=ze({upsert:Bx.upsert},i),g=ze(ze({},o.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",m.cacheControl)):(f=r,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType),{path:l,fullPath:(await ef(o.fetch,d.toString(),f,{headers:g})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e);const o=ze({},r.headers);t?.upsert&&(o["x-upsert"]="true");const l=await rs(r.fetch,`${r.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(r.url+l.url),d=u.searchParams.get("token");if(!d)throw new eu("No token returned by API");return{signedUrl:u.toString(),path:e,token:d}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var i=this;return i.handleOperation(async()=>await rs(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:i.headers}))}async copy(e,t,r){var i=this;return i.handleOperation(async()=>({path:(await rs(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(e,t,r){var i=this;return i.handleOperation(async()=>{let o=i._getFinalPath(e),l=await rs(i.fetch,`${i.url}/object/sign/${o}`,ze({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:i.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${i.url}${l.signedURL}${u}`)}})}async createSignedUrls(e,t,r){var i=this;return i.handleOperation(async()=>{const o=await rs(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:e},{headers:i.headers}),l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o.map(u=>ze(ze({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${l}`):null}))})}download(e,t,r){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),l=o?`?${o}`:"",u=this._getFinalPath(e),d=()=>Do(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0},r);return new c_(d,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Zh(await Do(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await o_(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(tu(i)&&i instanceof Dv){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const l=typeof t?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(t?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await zf(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var i=this;return i.handleOperation(async()=>{const o=ze(ze(ze({},u_),t),{},{prefix:e||""});return await rs(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const i=ze({},e);return await rs(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,i,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const h_="2.95.3",Ko={"X-Client-Info":`storage-js/${h_}`};var f_=class extends Ci{constructor(e,t={},r,i){const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const l=o.href.replace(/\/$/,""),u=ze(ze({},Ko),t);super(l,u,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Do(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Do(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await rs(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await ef(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await rs(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await zf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},p_=class extends Ci{constructor(e,t={},r){const i=e.replace(/\/$/,""),o=ze(ze({},Ko),t);super(i,o,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await rs(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const i=r.toString(),o=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return await Do(t.fetch,o,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await zf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!e_(e))throw new eu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Jk({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(o,l){const u=o[l];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(f){if(i)throw f;return{data:null,error:f}}}}})}},m_=class extends Ci{constructor(e,t={},r){const i=e.replace(/\/$/,""),o=ze(ze({},Ko),{},{"Content-Type":"application/json"},t);super(i,o,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Mr.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Mr.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},g_=class extends Ci{constructor(e,t={},r){const i=e.replace(/\/$/,""),o=ze(ze({},Ko),{},{"Content-Type":"application/json"},t);super(i,o,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},x_=class extends Ci{constructor(e,t={},r){const i=e.replace(/\/$/,""),o=ze(ze({},Ko),{},{"Content-Type":"application/json"},t);super(i,o,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Mr.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},y_=class extends x_{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new v_(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},v_=class extends m_{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,ze(ze({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,ze(ze({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new w_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},w_=class extends g_{constructor(e,t,r,i,o){super(e,t,o),this.vectorBucketName=r,this.indexName=i}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,ze(ze({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,ze(ze({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,ze(ze({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,ze(ze({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,ze(ze({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},b_=class extends f_{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new d_(this.url,this.headers,e,this.fetch)}get vectors(){return new y_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new p_(this.url+"/iceberg",this.headers,this.fetch)}};const Fv="2.95.3",ti=30*1e3,tf=3,wh=tf*ti,j_="http://localhost:9999",N_="supabase.auth.token",S_={"X-Client-Info":`gotrue-js/${Fv}`},rf="X-Supabase-Api-Version",Uv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},k_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,__=600*1e3;class Mo extends Error{constructor(t,r,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function Oe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class C_ extends Mo{constructor(t,r,i){super(t,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function E_(e){return Oe(e)&&e.name==="AuthApiError"}class aa extends Mo{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ks extends Mo{constructor(t,r,i,o){super(t,i,o),this.name=r,this.status=i}}class Or extends Ks{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bh(e){return Oe(e)&&e.name==="AuthSessionMissingError"}class Va extends Ks{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xc extends Ks{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yc extends Ks{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function P_(e){return Oe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Vx extends Ks{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class T_ extends Ks{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sf extends Ks{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function jh(e){return Oe(e)&&e.name==="AuthRetryableFetchError"}class Wx extends Ks{constructor(t,r,i){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class nf extends Ks{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qx=` 	
\r=`.split(""),R_=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qx.length;t+=1)e[qx[t].charCodeAt(0)]=-2;for(let t=0;t<Dc.length;t+=1)e[Dc[t].charCodeAt(0)]=t;return e})();function Hx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(Dc[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(Dc[i]),t.queuedBits-=6}}function zv(e,t,r){const i=R_[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Kx(e){const t=[],r=u=>{t.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{O_(u,i,r)};for(let u=0;u<e.length;u+=1)zv(e.charCodeAt(u),o,l);return t.join("")}function A_(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function I_(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}A_(i,t)}}function O_(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ai(e){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)zv(e.charCodeAt(o),r,i);return new Uint8Array(t)}function L_(e){const t=[];return I_(e,r=>t.push(r)),new Uint8Array(t)}function ia(e){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};return e.forEach(o=>Hx(o,r,i)),Hx(null,r,i),t.join("")}function D_(e){return Math.round(Date.now()/1e3)+e}function M_(){return Symbol("auth-callback")}const tr=()=>typeof window<"u"&&typeof document<"u",Jn={tested:!1,writable:!1},Bv=()=>{if(!tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jn.tested)return Jn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jn.tested=!0,Jn.writable=!0}catch{Jn.tested=!0,Jn.writable=!1}return Jn.writable};function $_(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return r.searchParams.forEach((i,o)=>{t[o]=i}),t}const Vv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),F_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ri=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},er=async(e,t)=>{await e.removeItem(t)};class ru{constructor(){this.promise=new ru.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ru.promiseConstructor=Promise;function vc(e){const t=e.split(".");if(t.length!==3)throw new nf("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!k_.test(t[i]))throw new nf("JWT not in base64url format");return{header:JSON.parse(Kx(t[0])),payload:JSON.parse(Kx(t[1])),signature:ai(t[2]),raw:{header:t[0],payload:t[1]}}}async function U_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function z_(e,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await e(l);if(!t(l,null,u)){i(u);return}}catch(u){if(!t(l,u)){o(u);return}}})()})}function B_(e){return("0"+e.toString(16)).substr(-2)}function V_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let l=0;l<56;l++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,B_).join("")}async function W_(e){const r=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function q_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await W_(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wa(e,t,r=!1){const i=V_();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await ri(e,`${t}-code-verifier`,o);const l=await q_(i);return[l,i===l?"plain":"s256"]}const H_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K_(e){const t=e.headers.get(rf);if(!t||!t.match(H_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function G_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Q_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Y_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qa(e){if(!Y_.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J_(e,t){return new Proxy(e,{get:(r,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,i,o)}})}function Gx(e){return JSON.parse(JSON.stringify(e))}const sa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),X_=[502,503,504];async function Qx(e){var t;if(!F_(e))throw new sf(sa(e),0);if(X_.includes(e.status))throw new sf(sa(e),e.status);let r;try{r=await e.json()}catch(l){throw new aa(sa(l),l)}let i;const o=K_(e);if(o&&o.getTime()>=Uv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Wx(sa(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Or}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Wx(sa(r),e.status,r.weak_password.reasons);throw new C_(sa(r),e.status||500,i)}const Z_=(e,t,r,i)=>{const o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function Ue(e,t,r,i){var o;const l=Object.assign({},i?.headers);l[rf]||(l[rf]=Uv["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await e2(e,t,r+d,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(f):{data:Object.assign({},f),error:null}}async function e2(e,t,r,i,o,l){const u=Z_(t,i,o,l);let d;try{d=await e(r,Object.assign({},u))}catch(f){throw console.error(f),new sf(sa(f),0)}if(d.ok||await Qx(d),i?.noResolveJson)return d;try{return await d.json()}catch(f){await Qx(f)}}function es(e){var t;let r=null;s2(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=D_(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:i},error:null}}function Yx(e){const t=es(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Nn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function t2(e){return{data:e,error:null}}function r2(e){const{action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l}=e,u=_i(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l},f=Object.assign({},u);return{data:{properties:d,user:f},error:null}}function Jx(e){return e}function s2(e){return e.access_token&&e.refresh_token&&e.expires_in}const Sh=["global","local","others"];class n2{constructor({url:t="",headers:r={},fetch:i}){this.url=t,this.headers=r,this.fetch=Vv(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Sh[0]){if(Sh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sh.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,r={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nn})}catch(i){if(Oe(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:r}=t,i=_i(t,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:r2,redirectTo:r?.redirectTo})}catch(r){if(Oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nn})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,i,o,l,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Jx});if(g.error)throw g.error;const v=await g.json(),b=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return S.length>0&&(S.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(N.split(";")[1].split("=")[1]);m[`${j}Page`]=w}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Oe(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){qa(t);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nn})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){qa(t);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Nn})}catch(i){if(Oe(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,r=!1){qa(t);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nn})}catch(i){if(Oe(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){qa(t.userId);try{const{data:r,error:i}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(Oe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){qa(t.userId),qa(t.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,i,o,l,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},g=await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Jx});if(g.error)throw g.error;const v=await g.json(),b=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return S.length>0&&(S.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(N.split(";")[1].split("=")[1]);m[`${j}Page`]=w}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Oe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Oe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Oe(r))return{data:null,error:r};throw r}}}function Xx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ha={debug:!!(globalThis&&Bv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class a2 extends Wv{}async function i2(e,t,r){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new a2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ha.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function o2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qv(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function l2(e){return parseInt(e,16)}function c2(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function u2(e){var t;const{chainId:r,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:f,resources:m,scheme:g,uri:v,version:b}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=qv(e.address),N=g?`${g}://${i}`:i,w=e.statement?`${e.statement}
`:"",j=`${N} wants you to sign in with your Ethereum account:
${S}

${w}`;let C=`URI: ${v}
Version: ${b}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),d&&(C+=`
Not Before: ${d.toISOString()}`),f&&(C+=`
Request ID: ${f}`),m){let _=`
Resources:`;for(const P of m){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);_+=`
- ${P}`}C+=_}return`${j}
${C}`}class Dt extends Error{constructor({message:t,code:r,cause:i,name:o}){var l;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Mc extends Dt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function d2({error:e,options:t}){var r,i,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Dt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Dt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Dt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Dt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Dt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Dt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Dt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Dt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(Hv(u)){if(l.rp.id!==u)return new Dt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Dt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function h2({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Dt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Dt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(Hv(i)){if(r.rpId!==i)return new Dt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class f2{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const p2=new f2;function m2(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:i}=e,o=_i(e,["challenge","user","excludeCredentials"]),l=ai(t).buffer,u=Object.assign(Object.assign({},r),{id:ai(r.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:l,user:u});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const m=i[f];d.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:ai(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function g2(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,i=_i(e,["challenge","allowCredentials"]),o=ai(t).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:ai(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function x2(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ia(new Uint8Array(e.response.attestationObject)),clientDataJSON:ia(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function y2(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ia(new Uint8Array(o.authenticatorData)),clientDataJSON:ia(new Uint8Array(o.clientDataJSON)),signature:ia(new Uint8Array(o.signature)),userHandle:o.userHandle?ia(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Hv(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Zx(){var e,t;return!!(tr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function v2(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mc("Browser returned unexpected credential type",t)}:{data:null,error:new Mc("Empty credential response",t)}}catch(t){return{data:null,error:d2({error:t,options:e})}}}async function w2(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mc("Browser returned unexpected credential type",t)}:{data:null,error:new Mc("Empty credential response",t)}}catch(t){return{data:null,error:h2({error:t,options:e})}}}const b2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},j2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $c(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))i[l]=u;else if(r(u))i[l]=u;else if(t(u)){const d=i[l];t(d)?i[l]=$c(d,u):i[l]=$c(u)}else i[l]=u}return i}function N2(e,t){return $c(b2,e,t||{})}function S2(e,t){return $c(j2,e,t||{})}class k2{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:i,signal:o},l){var u;try{const{data:d,error:f}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:f};const m=o??p2.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:g}=d.webauthn.credential_options.publicKey;if(!g.name){const v=i;if(v)g.name=`${g.id}:${v}`;else{const S=(await this.client.getUser()).data.user,N=((u=S?.user_metadata)===null||u===void 0?void 0:u.name)||S?.email||S?.id||"User";g.name=`${g.id}:${N}`}}g.displayName||(g.displayName=g.name)}switch(d.webauthn.type){case"create":{const g=N2(d.webauthn.credential_options.publicKey,l?.create),{data:v,error:b}=await v2({publicKey:g,signal:m});return v?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const g=S2(d.webauthn.credential_options.publicKey,l?.request),{data:v,error:b}=await w2(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g,signal:m}));return v?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(d){return Oe(d)?{data:null,error:d}:{data:null,error:new aa("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!r)return{data:null,error:new Mo("rpId is required for WebAuthn authentication")};try{if(!Zx())return{data:null,error:new aa("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:i},signal:o},{request:l});if(!u)return{data:null,error:d};const{webauthn:f}=u;return this._verify({factorId:t,challengeId:u.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:i,credential_response:f.credential_response}})}catch(u){return Oe(u)?{data:null,error:u}:{data:null,error:new aa("Unexpected error in authenticate",u)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!r)return{data:null,error:new Mo("rpId is required for WebAuthn registration")};try{if(!Zx())return{data:null,error:new aa("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:t});if(!u)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:f,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:o},{create:l});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:i,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(u){return Oe(u)?{data:null,error:u}:{data:null,error:new aa("Unexpected error in register",u)}}}}o2();const _2={url:j_,storageKey:N_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ey(e,t,r){return await r()}const Ka={};class $o{get jwks(){var t,r;return(r=(t=Ka[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ka[this.storageKey]=Object.assign(Object.assign({},Ka[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ka[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ka[this.storageKey]=Object.assign(Object.assign({},Ka[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},_2),t);if(this.storageKey=l.storageKey,this.instanceID=(r=$o.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,$o.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&tr()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new n2({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Vv(l.fetch),this.lock=l.lock||ey,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&tr()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=i2:this.lock=ey,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new k2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Bv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xx(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Xx(this.memoryStorage)),tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Fv}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},i="none";if(tr()&&(r=$_(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),tr()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(r,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),P_(l)){const f=(t=l.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Oe(r)?this._returnResult({error:r}):this._returnResult({error:new aa("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,o;try{const l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:es}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(l){if(Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var r,i,o;try{let l;if("email"in t){const{email:g,password:v,options:b}=t;let S=null,N=null;this.flowType==="pkce"&&([S,N]=await Wa(this.storage,this.storageKey)),l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:g,password:v,data:(r=b?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:S,code_challenge_method:N},xform:es})}else if("phone"in t){const{phone:g,password:v,options:b}=t;l=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(i=b?.data)!==null&&i!==void 0?i:{},channel:(o=b?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:es})}else throw new xc("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return await er(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(l){if(await er(this.storage,`${this.storageKey}-code-verifier`),Oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:u,options:d}=t;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Yx})}else if("phone"in t){const{phone:l,password:u,options:d}=t;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Yx})}else throw new xc("You must provide either an email or phone number and a password");const{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new Va;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(Oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,i,o,l,u,d,f,m,g,v,b;let S,N;if("message"in t)S=t.message,N=t.signature;else{const{chain:w,wallet:j,statement:C,options:_}=t;let P;if(tr())if(typeof j=="object")P=j;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")P=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=j}const A=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href),$=await P.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=qv($[0]);let L=(i=_?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!L){const X=await P.request({method:"eth_chainId"});L=l2(X)}const Q={domain:A.host,address:E,statement:C,uri:A.href,version:"1",chainId:L,nonce:(o=_?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=_?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=_?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=_?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=_?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=_?.signInWithEthereum)===null||g===void 0?void 0:g.resources};S=u2(Q),N=await P.request({method:"personal_sign",params:[c2(S),E]})}try{const{data:w,error:j}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:N},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:es});if(j)throw j;if(!w||!w.session||!w.user){const C=new Va;return this._returnResult({data:{user:null,session:null},error:C})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:j})}catch(w){if(Oe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,i,o,l,u,d,f,m,g,v,b,S;let N,w;if("message"in t)N=t.message,w=t.signature;else{const{chain:j,wallet:C,statement:_,options:P}=t;let A;if(tr())if(typeof C=="object")A=C;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))A=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const $=new URL((r=P?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const E=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),_?{statement:_}:null));let L;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")L=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)L=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)N=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),w=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${$.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(o=(i=P?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=P?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((u=P?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((d=P?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((f=P?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((m=P?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((v=(g=P?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...P.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const E=await A.signMessage(new TextEncoder().encode(N),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:j,error:C}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:ia(w)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:es});if(C)throw C;if(!j||!j.session||!j.user){const _=new Va;return this._returnResult({data:{user:null,session:null},error:_})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:C})}catch(j){if(Oe(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(t){const r=await Xn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new T_;const{data:l,error:u}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:es});if(await er(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new Va;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(await er(this.storage,`${this.storageKey}-code-verifier`),Oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:r,provider:i,token:o,access_token:l,nonce:u}=t,d=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:es}),{data:f,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f||!f.session||!f.user){const g=new Va;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:m})}catch(r){if(Oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,i,o,l,u;try{if("email"in t){const{email:d,options:f}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Wa(this.storage,this.storageKey));const{error:v}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=f?.data)!==null&&r!==void 0?r:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:d,options:f}=t,{data:m,error:g}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:g})}throw new xc("You must provide either an email or phone number.")}catch(d){if(await er(this.storage,`${this.storageKey}-code-verifier`),Oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,i;try{let o,l;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:es});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,m=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(o){if(Oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,i,o,l,u;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Wa(this.storage,this.storageKey));const m=await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:t2});return!((l=m.data)===null||l===void 0)&&l.url&&tr()&&!(!((u=t.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await er(this.storage,`${this.storageKey}-code-verifier`),Oe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new Or;const{error:o}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(Oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:u}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:u,error:d}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new xc("You must provide either an email or phone number and a type")}catch(r){if(Oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Xn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<wh:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const u=await Xn(this.userStorage,this.storageKey+"-user");u?.user?t.user=u.user:t.user=Nh()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};t.user=J_(t.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nn}):await this._useSession(async r=>{var i,o,l;const{data:u,error:d}=r;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Or}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Nn})})}catch(r){if(Oe(r))return bh(r)&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Or;const u=o.session;let d=null,f=null;this.flowType==="pkce"&&t.email!=null&&([d,f]=await Wa(this.storage,this.storageKey));const{data:m,error:g}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:f}),jwt:u.access_token,xform:Nn});if(g)throw g;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await er(this.storage,`${this.storageKey}-code-verifier`),Oe(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Or;const r=Date.now()/1e3;let i=r,o=!0,l=null;const{payload:u}=vc(t.access_token);if(u.exp&&(i=u.exp,o=i<=r),o){const{data:d,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:f}=await this._getUser(t.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});l={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(Oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){const{data:u,error:d}=r;if(d)throw d;t=(i=u.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new Or;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!tr())throw new yc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Vx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vx("No code detected.");const{data:_,error:P}=await this._exchangeCodeForSession(t.code);if(P)throw P;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:f,token_type:m}=t;if(!l||!d||!u||!m)throw new yc("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(d);let b=g+v;f&&(b=parseInt(f));const S=b-g;S*1e3<=ti&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${v}s`);const N=b-v;g-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,g):g-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,g);const{data:w,error:j}=await this._getUser(l);if(j)throw j;const C={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:v,expires_at:b,refresh_token:u,token_type:m,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:t.type},error:null})}catch(i){if(Oe(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Xn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l&&!bh(l))return this._returnResult({error:l});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,t);if(d&&!(E_(d)&&(d.status===404||d.status===401||d.status===403)||bh(d)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=M_(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,o;try{const{data:{session:l},error:u}=r;if(u)throw u;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Wa(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(await er(this.storage,`${this.storageKey}-code-verifier`),Oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:i,error:o}=await this._useSession(async l=>{var u,d,f,m,g;const{data:v,error:b}=l;if(b)throw b;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(u=t.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",S,{headers:this.headers,jwt:(g=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(o)throw o;return tr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(Oe(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var i;try{const{error:o,data:{session:l}}=r;if(o)throw o;const{options:u,provider:d,token:f,access_token:m,nonce:g}=t,v=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:f,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:es}),{data:b,error:S}=v;return S?this._returnResult({data:{user:null,session:null},error:S}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Va}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:S}))}catch(o){if(await er(this.storage,`${this.storageKey}-code-verifier`),Oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,o;const{data:l,error:u}=r;if(u)throw u;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await z_(async o=>(o>0&&await U_(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:es})),(o,l)=>{const u=200*Math.pow(2,o);return l&&jh(l)&&Date.now()+u-i<ti})}catch(i){if(this._debug(r,"error",i),Oe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),tr()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Xn(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Xn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await ri(this.userStorage,this.storageKey+"-user",u)),o.user=(t=u?.user)!==null&&t!==void 0?t:Nh()}else if(o&&!o.user&&!o.user){const u=await Xn(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await er(this.storage,this.storageKey+"-user"),await ri(this.storage,this.storageKey,o)):o.user=Nh()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<wh;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${wh}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),jh(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new Or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ru;const{data:l,error:u}=await this._refreshAccessToken(t);if(u)throw u;if(!l.session)throw new Or;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),Oe(l)){const u={data:null,error:l};return jh(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await er(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await ri(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const l=Gx(o);await ri(this.storage,this.storageKey,l)}else{const o=Gx(r);await ri(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await er(this.storage,this.storageKey),await er(this.storage,this.storageKey+"-code-verifier"),await er(this.storage,this.storageKey+"-user"),this.userStorage&&await er(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&tr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ti);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/ti);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ti}ms, refresh threshold is ${tf} ticks`),o<=tf&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Wv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await Wa(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?this._returnResult({data:null,error:l}):await Ue(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,o;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:m}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(t.factorType==="totp"&&f.type==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?x2(t.webauthn.credential_response):y2(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:f}=await Ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({data:null,error:l});const u=await Ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:m2(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g2(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=r?.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,i,o,l;if(t)try{const{payload:S}=vc(t);let N=null;S.aal&&(N=S.aal);let w=N;const{data:{user:j},error:C}=await this.getUser(t);if(C)return this._returnResult({data:null,error:C});((i=(r=j?.factors)===null||r===void 0?void 0:r.filter(A=>A.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(w="aal2");const P=S.amr||[];return{data:{currentLevel:N,nextLevel:w,currentAuthenticationMethods:P},error:null}}catch(S){if(Oe(S))return this._returnResult({data:null,error:S});throw S}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=vc(u.access_token);let m=null;f.aal&&(m=f.aal);let g=m;((l=(o=u.user.factors)===null||o===void 0?void 0:o.filter(S=>S.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(g="aal2");const b=f.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await Ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Or})})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Or});const u=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&tr()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(Oe(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Or});const u=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&tr()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(Oe(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await Ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Or})})}catch(t){if(Oe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await Ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Or})})}catch(r){if(Oe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(d=>d.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===t),i&&this.jwks_cached_at+__>o)return i;const{data:l,error:u}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(d=>d.kid===t),!i)?null:i}async getClaims(t,r={}){try{let i=t;if(!i){const{data:S,error:N}=await this.getSession();if(N||!S.session)return this._returnResult({data:null,error:N});i=S.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:f}}=vc(i);r?.allowExpired||G_(l.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:l,header:o,signature:u},error:null}}const g=Q_(o.alg),v=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,u,L_(`${d}.${f}`)))throw new nf("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(i){if(Oe(i))return this._returnResult({data:null,error:i});throw i}}}$o.nextInstanceID={};const C2=$o,E2="2.95.3";let jo="";typeof Deno<"u"?jo="deno":typeof document<"u"?jo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jo="react-native":jo="node";const P2={"X-Client-Info":`supabase-js-${jo}/${E2}`},T2={headers:P2},R2={schema:"public"},A2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I2={};function Fo(e){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fo(e)}function O2(e,t){if(Fo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(Fo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L2(e){var t=O2(e,"string");return Fo(t)=="symbol"?t:t+""}function D2(e,t,r){return(t=L2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ty(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ty(Object(r),!0).forEach(function(i){D2(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ty(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}const M2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$2=()=>Headers,F2=(e,t,r)=>{const i=M2(r),o=$2();return async(l,u)=>{var d;const f=(d=await t())!==null&&d!==void 0?d:e;let m=new o(u?.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),i(l,Et(Et({},u),{},{headers:m}))}};function U2(e){return e.endsWith("/")?e:e+"/"}function z2(e,t){var r,i;const{db:o,auth:l,realtime:u,global:d}=e,{db:f,auth:m,realtime:g,global:v}=t,b={db:Et(Et({},f),o),auth:Et(Et({},m),l),realtime:Et(Et({},g),u),storage:{},global:Et(Et(Et({},v),d),{},{headers:Et(Et({},(r=v?.headers)!==null&&r!==void 0?r:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?b.accessToken=e.accessToken:delete b.accessToken,b}function B2(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U2(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var V2=class extends C2{constructor(e){super(e)}},W2=class{constructor(e,t,r){var i,o;this.supabaseUrl=e,this.supabaseKey=t;const l=B2(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:R2,realtime:I2,auth:Et(Et({},A2),{},{storageKey:u}),global:T2},f=z2(r??{},d);if(this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=f.auth)!==null&&m!==void 0?m:{},this.headers,f.global.fetch)}this.fetch=F2(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Et({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new Ek(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch,timeout:f.db.timeout,urlLengthLimit:f.db.urlLengthLimit}),this.storage=new b_(this.storageUrl.href,this.headers,this.fetch,r?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new wk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(t=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:l,flowType:u,lock:d,debug:f,throwOnError:m},g,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new V2({url:this.authUrl.href,headers:Et(Et({},b),g),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:d,debug:f,throwOnError:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new qk(this.realtimeUrl.href,Et(Et({},e),{},{params:Et(Et({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const q2=(e,t,r)=>new W2(e,t,r);function H2(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}H2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const K2=void 0,G2=void 0,ii=q2(K2,G2);async function mr(){const{data:{session:e}}=await ii.auth.getSession();return e?.access_token?{Authorization:`Bearer ${e.access_token}`}:{}}async function Kv(e){if(!e.ok){if(e.status===401)throw window.location.href="/login",new Error("Session expired. Redirecting to login...");const t=await e.text()||e.statusText;let r=`${e.status}: ${t}`;try{const i=JSON.parse(t);i.error&&(r=typeof i.error=="string"?i.error:JSON.stringify(i.error))}catch{}throw new Error(r)}}async function $t(e,t,r){const o={...await mr()};r&&(o["Content-Type"]="application/json");const l=await fetch(t,{method:e,headers:o,body:r?JSON.stringify(r):void 0});return await Kv(l),l}const Q2=({on401:e})=>async({queryKey:t})=>{const r=await mr(),i=await fetch(t.join("/"),{headers:r});return await Kv(i),await i.json()},tt=new ZS({defaultOptions:{queries:{queryFn:Q2({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Y2=1,J2=1e6;let kh=0;function X2(){return kh=(kh+1)%Number.MAX_SAFE_INTEGER,kh.toString()}const _h=new Map,ry=e=>{if(_h.has(e))return;const t=setTimeout(()=>{_h.delete(e),Eo({type:"REMOVE_TOAST",toastId:e})},J2);_h.set(e,t)},Z2=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Y2)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?ry(r):e.toasts.forEach(i=>{ry(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Cc=[];let Ec={toasts:[]};function Eo(e){Ec=Z2(Ec,e),Cc.forEach(t=>{t(Ec)})}function eC({...e}){const t=X2(),r=o=>Eo({type:"UPDATE_TOAST",toast:{...o,id:t}}),i=()=>Eo({type:"DISMISS_TOAST",toastId:t});return Eo({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||i()}}}),{id:t,dismiss:i,update:r}}function Pr(){const[e,t]=x.useState(Ec);return x.useEffect(()=>(Cc.push(t),()=>{const r=Cc.indexOf(t);r>-1&&Cc.splice(r,1)}),[e]),{...e,toast:eC,dismiss:r=>Eo({type:"DISMISS_TOAST",toastId:r})}}var Ei=lv();const tC=ov(Ei);function $e(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return t?.(o)}}function sy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Gv(...e){return t=>{let r=!1;const i=e.map(o=>{const l=sy(o,t);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():sy(e[o],null)}}}}function lt(...e){return x.useCallback(Gv(...e),e)}function rC(e,t){const r=x.createContext(t),i=l=>{const{children:u,...d}=l,f=x.useMemo(()=>d,Object.values(d));return s.jsx(r.Provider,{value:f,children:u})};i.displayName=e+"Provider";function o(l){const u=x.useContext(r);if(u)return u;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return[i,o]}function us(e,t=[]){let r=[];function i(l,u){const d=x.createContext(u),f=r.length;r=[...r,u];const m=v=>{const{scope:b,children:S,...N}=v,w=b?.[e]?.[f]||d,j=x.useMemo(()=>N,Object.values(N));return s.jsx(w.Provider,{value:j,children:S})};m.displayName=l+"Provider";function g(v,b){const S=b?.[e]?.[f]||d,N=x.useContext(S);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[m,g]}const o=()=>{const l=r.map(u=>x.createContext(u));return function(d){const f=d?.[e]||l;return x.useMemo(()=>({[`__scope${e}`]:{...d,[e]:f}}),[d,f])}};return o.scopeName=e,[i,sC(o,...t)]}function sC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const u=i.reduce((d,{useScope:f,scopeName:m})=>{const v=f(l)[`__scope${m}`];return{...d,...v}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:u}),[u])}};return r.scopeName=t.scopeName,r}function pi(e){const t=nC(e),r=x.forwardRef((i,o)=>{const{children:l,...u}=i,d=x.Children.toArray(l),f=d.find(aC);if(f){const m=f.props.children,g=d.map(v=>v===f?x.Children.count(m)>1?x.Children.only(null):x.isValidElement(m)?m.props.children:null:v);return s.jsx(t,{...u,ref:o,children:x.isValidElement(m)?x.cloneElement(m,void 0,g):null})}return s.jsx(t,{...u,ref:o,children:l})});return r.displayName=`${e}.Slot`,r}var Qv=pi("Slot");function nC(e){const t=x.forwardRef((r,i)=>{const{children:o,...l}=r;if(x.isValidElement(o)){const u=oC(o),d=iC(l,o.props);return o.type!==x.Fragment&&(d.ref=i?Gv(i,u):u),x.cloneElement(o,d)}return x.Children.count(o)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Yv=Symbol("radix.slottable");function Jv(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=Yv,t}function aC(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Yv}function iC(e,t){const r={...t};for(const i in t){const o=e[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...d)=>{l(...d),o(...d)}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...e,...r}}function oC(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Bf(e){const t=e+"CollectionProvider",[r,i]=us(t),[o,l]=r(t,{collectionRef:{current:null},itemMap:new Map}),u=w=>{const{scope:j,children:C}=w,_=Be.useRef(null),P=Be.useRef(new Map).current;return s.jsx(o,{scope:j,itemMap:P,collectionRef:_,children:C})};u.displayName=t;const d=e+"CollectionSlot",f=pi(d),m=Be.forwardRef((w,j)=>{const{scope:C,children:_}=w,P=l(d,C),A=lt(j,P.collectionRef);return s.jsx(f,{ref:A,children:_})});m.displayName=d;const g=e+"CollectionItemSlot",v="data-radix-collection-item",b=pi(g),S=Be.forwardRef((w,j)=>{const{scope:C,children:_,...P}=w,A=Be.useRef(null),$=lt(j,A),E=l(g,C);return Be.useEffect(()=>(E.itemMap.set(A,{ref:A,...P}),()=>{E.itemMap.delete(A)})),s.jsx(b,{[v]:"",ref:$,children:_})});S.displayName=g;function N(w){const j=l(e+"CollectionConsumer",w);return Be.useCallback(()=>{const _=j.collectionRef.current;if(!_)return[];const P=Array.from(_.querySelectorAll(`[${v}]`));return Array.from(j.itemMap.values()).sort((E,L)=>P.indexOf(E.ref.current)-P.indexOf(L.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:u,Slot:m,ItemSlot:S},N,i]}var lC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=lC.reduce((e,t)=>{const r=pi(`Primitive.${t}`),i=x.forwardRef((o,l)=>{const{asChild:u,...d}=o,f=u?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(f,{...d,ref:l})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function Xv(e,t){e&&Ei.flushSync(()=>e.dispatchEvent(t))}function xr(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>t.current?.(...r),[])}function cC(e,t=globalThis?.document){const r=xr(e);x.useEffect(()=>{const i=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[r,t])}var uC="DismissableLayer",af="dismissableLayer.update",dC="dismissableLayer.pointerDownOutside",hC="dismissableLayer.focusOutside",ny,Zv=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Go=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:u,onDismiss:d,...f}=e,m=x.useContext(Zv),[g,v]=x.useState(null),b=g?.ownerDocument??globalThis?.document,[,S]=x.useState({}),N=lt(t,L=>v(L)),w=Array.from(m.layers),[j]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(j),_=g?w.indexOf(g):-1,P=m.layersWithOutsidePointerEventsDisabled.size>0,A=_>=C,$=pC(L=>{const Q=L.target,X=[...m.branches].some(ee=>ee.contains(Q));!A||X||(o?.(L),u?.(L),L.defaultPrevented||d?.())},b),E=mC(L=>{const Q=L.target;[...m.branches].some(ee=>ee.contains(Q))||(l?.(L),u?.(L),L.defaultPrevented||d?.())},b);return cC(L=>{_===m.layers.size-1&&(i?.(L),!L.defaultPrevented&&d&&(L.preventDefault(),d()))},b),x.useEffect(()=>{if(g)return r&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(ny=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),ay(),()=>{r&&m.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=ny)}},[g,b,r,m]),x.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),ay())},[g,m]),x.useEffect(()=>{const L=()=>S({});return document.addEventListener(af,L),()=>document.removeEventListener(af,L)},[]),s.jsx(Ge.div,{...f,ref:N,style:{pointerEvents:P?A?"auto":"none":void 0,...e.style},onFocusCapture:$e(e.onFocusCapture,E.onFocusCapture),onBlurCapture:$e(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:$e(e.onPointerDownCapture,$.onPointerDownCapture)})});Go.displayName=uC;var fC="DismissableLayerBranch",ew=x.forwardRef((e,t)=>{const r=x.useContext(Zv),i=x.useRef(null),o=lt(t,i);return x.useEffect(()=>{const l=i.current;if(l)return r.branches.add(l),()=>{r.branches.delete(l)}},[r.branches]),s.jsx(Ge.div,{...e,ref:o})});ew.displayName=fC;function pC(e,t=globalThis?.document){const r=xr(e),i=x.useRef(!1),o=x.useRef(()=>{});return x.useEffect(()=>{const l=d=>{if(d.target&&!i.current){let f=function(){tw(dC,r,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=f,t.addEventListener("click",o.current,{once:!0})):f()}else t.removeEventListener("click",o.current);i.current=!1},u=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(u),t.removeEventListener("pointerdown",l),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}function mC(e,t=globalThis?.document){const r=xr(e),i=x.useRef(!1);return x.useEffect(()=>{const o=l=>{l.target&&!i.current&&tw(hC,r,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ay(){const e=new CustomEvent(af);document.dispatchEvent(e)}function tw(e,t,r,{discrete:i}){const o=r.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),i?Xv(o,l):o.dispatchEvent(l)}var gC=Go,xC=ew,Gt=globalThis?.document?x.useLayoutEffect:()=>{},yC="Portal",su=x.forwardRef((e,t)=>{const{container:r,...i}=e,[o,l]=x.useState(!1);Gt(()=>l(!0),[]);const u=r||o&&globalThis?.document?.body;return u?tC.createPortal(s.jsx(Ge.div,{...i,ref:t}),u):null});su.displayName=yC;function vC(e,t){return x.useReducer((r,i)=>t[r][i]??r,e)}var ga=e=>{const{present:t,children:r}=e,i=wC(t),o=typeof r=="function"?r({present:i.isPresent}):x.Children.only(r),l=lt(i.ref,bC(o));return typeof r=="function"||i.isPresent?x.cloneElement(o,{ref:l}):null};ga.displayName="Presence";function wC(e){const[t,r]=x.useState(),i=x.useRef({}),o=x.useRef(e),l=x.useRef("none"),u=e?"mounted":"unmounted",[d,f]=vC(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const m=wc(i.current);l.current=d==="mounted"?m:"none"},[d]),Gt(()=>{const m=i.current,g=o.current;if(g!==e){const b=l.current,S=wc(m);e?f("MOUNT"):S==="none"||m?.display==="none"?f("UNMOUNT"):f(g&&b!==S?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,f]),Gt(()=>{if(t){let m;const g=t.ownerDocument.defaultView??window,v=S=>{const w=wc(i.current).includes(S.animationName);if(S.target===t&&w&&(f("ANIMATION_END"),!o.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",m=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},b=S=>{S.target===t&&(l.current=wc(i.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{g.clearTimeout(m),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:x.useCallback(m=>{m&&(i.current=getComputedStyle(m)),r(m)},[])}}function wc(e){return e?.animationName||"none"}function bC(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Cn({prop:e,defaultProp:t,onChange:r=()=>{}}){const[i,o]=jC({defaultProp:t,onChange:r}),l=e!==void 0,u=l?e:i,d=xr(r),f=x.useCallback(m=>{if(l){const v=typeof m=="function"?m(e):m;v!==e&&d(v)}else o(m)},[l,e,o,d]);return[u,f]}function jC({defaultProp:e,onChange:t}){const r=x.useState(e),[i]=r,o=x.useRef(i),l=xr(t);return x.useEffect(()=>{o.current!==i&&(l(i),o.current=i)},[i,o,l]),r}var NC="VisuallyHidden",Qo=x.forwardRef((e,t)=>s.jsx(Ge.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Qo.displayName=NC;var SC=Qo,Vf="ToastProvider",[Wf,kC,_C]=Bf("Toast"),[rw]=us("Toast",[_C]),[CC,nu]=rw(Vf),sw=e=>{const{__scopeToast:t,label:r="Notification",duration:i=5e3,swipeDirection:o="right",swipeThreshold:l=50,children:u}=e,[d,f]=x.useState(null),[m,g]=x.useState(0),v=x.useRef(!1),b=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Vf}\`. Expected non-empty \`string\`.`),s.jsx(Wf.Provider,{scope:t,children:s.jsx(CC,{scope:t,label:r,duration:i,swipeDirection:o,swipeThreshold:l,toastCount:m,viewport:d,onViewportChange:f,onToastAdd:x.useCallback(()=>g(S=>S+1),[]),onToastRemove:x.useCallback(()=>g(S=>S-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:b,children:u})})};sw.displayName=Vf;var nw="ToastViewport",EC=["F8"],of="toast.viewportPause",lf="toast.viewportResume",aw=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:i=EC,label:o="Notifications ({hotkey})",...l}=e,u=nu(nw,r),d=kC(r),f=x.useRef(null),m=x.useRef(null),g=x.useRef(null),v=x.useRef(null),b=lt(t,v,u.onViewportChange),S=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=u.toastCount>0;x.useEffect(()=>{const j=C=>{i.length!==0&&i.every(P=>C[P]||C.code===P)&&v.current?.focus()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[i]),x.useEffect(()=>{const j=f.current,C=v.current;if(N&&j&&C){const _=()=>{if(!u.isClosePausedRef.current){const E=new CustomEvent(of);C.dispatchEvent(E),u.isClosePausedRef.current=!0}},P=()=>{if(u.isClosePausedRef.current){const E=new CustomEvent(lf);C.dispatchEvent(E),u.isClosePausedRef.current=!1}},A=E=>{!j.contains(E.relatedTarget)&&P()},$=()=>{j.contains(document.activeElement)||P()};return j.addEventListener("focusin",_),j.addEventListener("focusout",A),j.addEventListener("pointermove",_),j.addEventListener("pointerleave",$),window.addEventListener("blur",_),window.addEventListener("focus",P),()=>{j.removeEventListener("focusin",_),j.removeEventListener("focusout",A),j.removeEventListener("pointermove",_),j.removeEventListener("pointerleave",$),window.removeEventListener("blur",_),window.removeEventListener("focus",P)}}},[N,u.isClosePausedRef]);const w=x.useCallback(({tabbingDirection:j})=>{const _=d().map(P=>{const A=P.ref.current,$=[A,...zC(A)];return j==="forwards"?$:$.reverse()});return(j==="forwards"?_.reverse():_).flat()},[d]);return x.useEffect(()=>{const j=v.current;if(j){const C=_=>{const P=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!P){const $=document.activeElement,E=_.shiftKey;if(_.target===j&&E){m.current?.focus();return}const X=w({tabbingDirection:E?"backwards":"forwards"}),ee=X.findIndex(le=>le===$);Ch(X.slice(ee+1))?_.preventDefault():E?m.current?.focus():g.current?.focus()}};return j.addEventListener("keydown",C),()=>j.removeEventListener("keydown",C)}},[d,w]),s.jsxs(xC,{ref:f,role:"region","aria-label":o.replace("{hotkey}",S),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&s.jsx(cf,{ref:m,onFocusFromOutsideViewport:()=>{const j=w({tabbingDirection:"forwards"});Ch(j)}}),s.jsx(Wf.Slot,{scope:r,children:s.jsx(Ge.ol,{tabIndex:-1,...l,ref:b})}),N&&s.jsx(cf,{ref:g,onFocusFromOutsideViewport:()=>{const j=w({tabbingDirection:"backwards"});Ch(j)}})]})});aw.displayName=nw;var iw="ToastFocusProxy",cf=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:i,...o}=e,l=nu(iw,r);return s.jsx(Qo,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:u=>{const d=u.relatedTarget;!l.viewport?.contains(d)&&i()}})});cf.displayName=iw;var au="Toast",PC="toast.swipeStart",TC="toast.swipeMove",RC="toast.swipeCancel",AC="toast.swipeEnd",ow=x.forwardRef((e,t)=>{const{forceMount:r,open:i,defaultOpen:o,onOpenChange:l,...u}=e,[d=!0,f]=Cn({prop:i,defaultProp:o,onChange:l});return s.jsx(ga,{present:r||d,children:s.jsx(LC,{open:d,...u,ref:t,onClose:()=>f(!1),onPause:xr(e.onPause),onResume:xr(e.onResume),onSwipeStart:$e(e.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(e.onSwipeMove,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:$e(e.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(e.onSwipeEnd,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),f(!1)})})})});ow.displayName=au;var[IC,OC]=rw(au,{onClose(){}}),LC=x.forwardRef((e,t)=>{const{__scopeToast:r,type:i="foreground",duration:o,open:l,onClose:u,onEscapeKeyDown:d,onPause:f,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:b,onSwipeEnd:S,...N}=e,w=nu(au,r),[j,C]=x.useState(null),_=lt(t,Y=>C(Y)),P=x.useRef(null),A=x.useRef(null),$=o||w.duration,E=x.useRef(0),L=x.useRef($),Q=x.useRef(0),{onToastAdd:X,onToastRemove:ee}=w,le=xr(()=>{j?.contains(document.activeElement)&&w.viewport?.focus(),u()}),T=x.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(Q.current),E.current=new Date().getTime(),Q.current=window.setTimeout(le,Y))},[le]);x.useEffect(()=>{const Y=w.viewport;if(Y){const ge=()=>{T(L.current),m?.()},K=()=>{const z=new Date().getTime()-E.current;L.current=L.current-z,window.clearTimeout(Q.current),f?.()};return Y.addEventListener(of,K),Y.addEventListener(lf,ge),()=>{Y.removeEventListener(of,K),Y.removeEventListener(lf,ge)}}},[w.viewport,$,f,m,T]),x.useEffect(()=>{l&&!w.isClosePausedRef.current&&T($)},[l,$,w.isClosePausedRef,T]),x.useEffect(()=>(X(),()=>ee()),[X,ee]);const Z=x.useMemo(()=>j?pw(j):null,[j]);return w.viewport?s.jsxs(s.Fragment,{children:[Z&&s.jsx(DC,{__scopeToast:r,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:Z}),s.jsx(IC,{scope:r,onClose:le,children:Ei.createPortal(s.jsx(Wf.ItemSlot,{scope:r,children:s.jsx(gC,{asChild:!0,onEscapeKeyDown:$e(d,()=>{w.isFocusedToastEscapeKeyDownRef.current||le(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":w.swipeDirection,...N,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:$e(e.onKeyDown,Y=>{Y.key==="Escape"&&(d?.(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,le()))}),onPointerDown:$e(e.onPointerDown,Y=>{Y.button===0&&(P.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:$e(e.onPointerMove,Y=>{if(!P.current)return;const ge=Y.clientX-P.current.x,K=Y.clientY-P.current.y,z=!!A.current,U=["left","right"].includes(w.swipeDirection),G=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,te=U?G(0,ge):0,D=U?0:G(0,K),I=Y.pointerType==="touch"?10:2,fe={x:te,y:D},ue={originalEvent:Y,delta:fe};z?(A.current=fe,bc(TC,v,ue,{discrete:!1})):iy(fe,w.swipeDirection,I)?(A.current=fe,bc(PC,g,ue,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(ge)>I||Math.abs(K)>I)&&(P.current=null)}),onPointerUp:$e(e.onPointerUp,Y=>{const ge=A.current,K=Y.target;if(K.hasPointerCapture(Y.pointerId)&&K.releasePointerCapture(Y.pointerId),A.current=null,P.current=null,ge){const z=Y.currentTarget,U={originalEvent:Y,delta:ge};iy(ge,w.swipeDirection,w.swipeThreshold)?bc(AC,S,U,{discrete:!0}):bc(RC,b,U,{discrete:!0}),z.addEventListener("click",G=>G.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),DC=e=>{const{__scopeToast:t,children:r,...i}=e,o=nu(au,t),[l,u]=x.useState(!1),[d,f]=x.useState(!1);return FC(()=>u(!0)),x.useEffect(()=>{const m=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(m)},[]),d?null:s.jsx(su,{asChild:!0,children:s.jsx(Qo,{...i,children:l&&s.jsxs(s.Fragment,{children:[o.label," ",r]})})})},MC="ToastTitle",lw=x.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return s.jsx(Ge.div,{...i,ref:t})});lw.displayName=MC;var $C="ToastDescription",cw=x.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return s.jsx(Ge.div,{...i,ref:t})});cw.displayName=$C;var uw="ToastAction",dw=x.forwardRef((e,t)=>{const{altText:r,...i}=e;return r.trim()?s.jsx(fw,{altText:r,asChild:!0,children:s.jsx(qf,{...i,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${uw}\`. Expected non-empty \`string\`.`),null)});dw.displayName=uw;var hw="ToastClose",qf=x.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e,o=OC(hw,r);return s.jsx(fw,{asChild:!0,children:s.jsx(Ge.button,{type:"button",...i,ref:t,onClick:$e(e.onClick,o.onClose)})})});qf.displayName=hw;var fw=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:i,...o}=e;return s.jsx(Ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...o,ref:t})});function pw(e){const t=[];return Array.from(e.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&t.push(i.textContent),UC(i)){const o=i.ariaHidden||i.hidden||i.style.display==="none",l=i.dataset.radixToastAnnounceExclude==="";if(!o)if(l){const u=i.dataset.radixToastAnnounceAlt;u&&t.push(u)}else t.push(...pw(i))}}),t}function bc(e,t,r,{discrete:i}){const o=r.originalEvent.currentTarget,l=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),i?Xv(o,l):o.dispatchEvent(l)}var iy=(e,t,r=0)=>{const i=Math.abs(e.x),o=Math.abs(e.y),l=i>o;return t==="left"||t==="right"?l&&i>r:!l&&o>r};function FC(e=()=>{}){const t=xr(e);Gt(()=>{let r=0,i=0;return r=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(i)}},[t])}function UC(e){return e.nodeType===e.ELEMENT_NODE}function zC(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ch(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var BC=sw,mw=aw,gw=ow,xw=lw,yw=cw,vw=dw,ww=qf;function bw(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=bw(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function jw(){for(var e,t,r=0,i="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=bw(e))&&(i&&(i+=" "),i+=t);return i}const oy=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ly=jw,Yo=(e,t)=>r=>{var i;if(t?.variants==null)return ly(e,r?.class,r?.className);const{variants:o,defaultVariants:l}=t,u=Object.keys(o).map(m=>{const g=r?.[m],v=l?.[m];if(g===null)return null;const b=oy(g)||oy(v);return o[m][b]}),d=r&&Object.entries(r).reduce((m,g)=>{let[v,b]=g;return b===void 0||(m[v]=b),m},{}),f=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((m,g)=>{let{class:v,className:b,...S}=g;return Object.entries(S).every(N=>{let[w,j]=N;return Array.isArray(j)?j.includes({...l,...d}[w]):{...l,...d}[w]===j})?[...m,v,b]:m},[]);return ly(e,u,f,r?.class,r?.className)};const VC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nw=(...e)=>e.filter((t,r,i)=>!!t&&i.indexOf(t)===r).join(" ");var WC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qC=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:u,...d},f)=>x.createElement("svg",{ref:f,...WC,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:Nw("lucide",o),...d},[...u.map(([m,g])=>x.createElement(m,g)),...Array.isArray(l)?l:[l]]));const je=(e,t)=>{const r=x.forwardRef(({className:i,...o},l)=>x.createElement(qC,{ref:l,iconNode:t,className:Nw(`lucide-${VC(e)}`,i),...o}));return r.displayName=`${e}`,r};const Er=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const iu=je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const En=je("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const HC=je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const et=je("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);const Rt=je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Hf=je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const KC=je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const GC=je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Sw=je("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const QC=je("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Bs=je("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const Ve=je("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]);const YC=je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const mi=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const kn=je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const uf=je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Uo=je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const JC=je("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const df=je("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const sr=je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const XC=je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const ou=je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const ZC=je("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const No=je("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const eE=je("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const kw=je("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const oi=je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const tE=je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const cy=je("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const zo=je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Kf=je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Gf=je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const rE=je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const uy=je("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const sE=je("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const nE=je("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const aE=je("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const iE=je("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);const _w=je("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);const os=je("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const oE=je("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);const li=je("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);const Cw=je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const lE=je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Cr=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ew=je("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);const cE=je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Pw=je("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const hf=je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const uE=je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const dE=je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const hE=je("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const fE=je("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Vs=je("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Eh=je("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const _t=je("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const pE=je("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const mE=je("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);const gE=je("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Tw=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const xE=je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Qf=je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const yE=je("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);const gi=je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const ff=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Fc=je("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);const In=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Rw=je("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);const vE=je("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const wE=je("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Yf="-",bE=e=>{const t=NE(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:u=>{const d=u.split(Yf);return d[0]===""&&d.length!==1&&d.shift(),Aw(d,t)||jE(u)},getConflictingClassGroupIds:(u,d)=>{const f=r[u]||[];return d&&i[u]?[...f,...i[u]]:f}}},Aw=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),o=i?Aw(e.slice(1),i):void 0;if(o)return o;if(t.validators.length===0)return;const l=e.join(Yf);return t.validators.find(({validator:u})=>u(l))?.classGroupId},dy=/^\[(.+)\]$/,jE=e=>{if(dy.test(e)){const t=dy.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},NE=e=>{const{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return kE(Object.entries(e.classGroups),r).forEach(([l,u])=>{pf(u,i,l,t)}),i},pf=(e,t,r,i)=>{e.forEach(o=>{if(typeof o=="string"){const l=o===""?t:hy(t,o);l.classGroupId=r;return}if(typeof o=="function"){if(SE(o)){pf(o(i),t,r,i);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([l,u])=>{pf(u,hy(t,l),r,i)})})},hy=(e,t)=>{let r=e;return t.split(Yf).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},SE=e=>e.isThemeGetter,kE=(e,t)=>t?e.map(([r,i])=>{const o=i.map(l=>typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([u,d])=>[t+u,d])):l);return[r,o]}):e,_E=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const o=(l,u)=>{r.set(l,u),t++,t>e&&(t=0,i=r,r=new Map)};return{get(l){let u=r.get(l);if(u!==void 0)return u;if((u=i.get(l))!==void 0)return o(l,u),u},set(l,u){r.has(l)?r.set(l,u):o(l,u)}}},Iw="!",CE=e=>{const{separator:t,experimentalParseClassName:r}=e,i=t.length===1,o=t[0],l=t.length,u=d=>{const f=[];let m=0,g=0,v;for(let j=0;j<d.length;j++){let C=d[j];if(m===0){if(C===o&&(i||d.slice(j,j+l)===t)){f.push(d.slice(g,j)),g=j+l;continue}if(C==="/"){v=j;continue}}C==="["?m++:C==="]"&&m--}const b=f.length===0?d:d.substring(g),S=b.startsWith(Iw),N=S?b.substring(1):b,w=v&&v>g?v-g:void 0;return{modifiers:f,hasImportantModifier:S,baseClassName:N,maybePostfixModifierPosition:w}};return r?d=>r({className:d,parseClassName:u}):u},EE=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(i=>{i[0]==="["?(t.push(...r.sort(),i),r=[]):r.push(i)}),t.push(...r.sort()),t},PE=e=>({cache:_E(e.cacheSize),parseClassName:CE(e),...bE(e)}),TE=/\s+/,RE=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:o}=t,l=[],u=e.trim().split(TE);let d="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{modifiers:g,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:S}=r(m);let N=!!S,w=i(N?b.substring(0,S):b);if(!w){if(!N){d=m+(d.length>0?" "+d:d);continue}if(w=i(b),!w){d=m+(d.length>0?" "+d:d);continue}N=!1}const j=EE(g).join(":"),C=v?j+Iw:j,_=C+w;if(l.includes(_))continue;l.push(_);const P=o(w,N);for(let A=0;A<P.length;++A){const $=P[A];l.push(C+$)}d=m+(d.length>0?" "+d:d)}return d};function AE(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Ow(t))&&(i&&(i+=" "),i+=r);return i}const Ow=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=Ow(e[i]))&&(r&&(r+=" "),r+=t);return r};function IE(e,...t){let r,i,o,l=u;function u(f){const m=t.reduce((g,v)=>v(g),e());return r=PE(m),i=r.cache.get,o=r.cache.set,l=d,d(f)}function d(f){const m=i(f);if(m)return m;const g=RE(f,r);return o(f,g),g}return function(){return l(AE.apply(null,arguments))}}const yt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Lw=/^\[(?:([a-z-]+):)?(.+)\]$/i,OE=/^\d+\/\d+$/,LE=new Set(["px","full","screen"]),DE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ME=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$E=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,FE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,UE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$s=e=>ci(e)||LE.has(e)||OE.test(e),yn=e=>Pi(e,"length",GE),ci=e=>!!e&&!Number.isNaN(Number(e)),Ph=e=>Pi(e,"number",ci),go=e=>!!e&&Number.isInteger(Number(e)),zE=e=>e.endsWith("%")&&ci(e.slice(0,-1)),Ye=e=>Lw.test(e),vn=e=>DE.test(e),BE=new Set(["length","size","percentage"]),VE=e=>Pi(e,BE,Dw),WE=e=>Pi(e,"position",Dw),qE=new Set(["image","url"]),HE=e=>Pi(e,qE,YE),KE=e=>Pi(e,"",QE),xo=()=>!0,Pi=(e,t,r)=>{const i=Lw.exec(e);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):r(i[2]):!1},GE=e=>ME.test(e)&&!$E.test(e),Dw=()=>!1,QE=e=>FE.test(e),YE=e=>UE.test(e),JE=()=>{const e=yt("colors"),t=yt("spacing"),r=yt("blur"),i=yt("brightness"),o=yt("borderColor"),l=yt("borderRadius"),u=yt("borderSpacing"),d=yt("borderWidth"),f=yt("contrast"),m=yt("grayscale"),g=yt("hueRotate"),v=yt("invert"),b=yt("gap"),S=yt("gradientColorStops"),N=yt("gradientColorStopPositions"),w=yt("inset"),j=yt("margin"),C=yt("opacity"),_=yt("padding"),P=yt("saturate"),A=yt("scale"),$=yt("sepia"),E=yt("skew"),L=yt("space"),Q=yt("translate"),X=()=>["auto","contain","none"],ee=()=>["auto","hidden","clip","visible","scroll"],le=()=>["auto",Ye,t],T=()=>[Ye,t],Z=()=>["",$s,yn],Y=()=>["auto",ci,Ye],ge=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",Ye],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[ci,Ye];return{cacheSize:500,separator:":",theme:{colors:[xo],spacing:[$s,yn],blur:["none","",vn,Ye],brightness:D(),borderColor:[e],borderRadius:["none","","full",vn,Ye],borderSpacing:T(),borderWidth:Z(),contrast:D(),grayscale:G(),hueRotate:D(),invert:G(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[zE,yn],inset:le(),margin:le(),opacity:D(),padding:T(),saturate:D(),scale:D(),sepia:G(),skew:D(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[vn]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ge(),Ye]}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",go,Ye]}],basis:[{basis:le()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",go,Ye]}],"grid-cols":[{"grid-cols":[xo]}],"col-start-end":[{col:["auto",{span:["full",go,Ye]},Ye]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[xo]}],"row-start-end":[{row:["auto",{span:[go,Ye]},Ye]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ye,t]}],"min-w":[{"min-w":[Ye,t,"min","max","fit"]}],"max-w":[{"max-w":[Ye,t,"none","full","min","max","fit","prose",{screen:[vn]},vn]}],h:[{h:[Ye,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ye,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ye,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ye,t,"auto","min","max","fit"]}],"font-size":[{text:["base",vn,yn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ph]}],"font-family":[{font:[xo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",ci,Ph]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$s,Ye]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$s,yn]}],"underline-offset":[{"underline-offset":["auto",$s,Ye]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ge(),WE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",VE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},HE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:K()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[$s,Ye]}],"outline-w":[{outline:[$s,yn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[$s,yn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",vn,KE]}],"shadow-color":[{shadow:[xo]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",vn,Ye]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[P]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[go,Ye]}],"translate-x":[{"translate-x":[Q]}],"translate-y":[{"translate-y":[Q]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$s,yn,Ph]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},XE=IE(JE);function Le(...e){return XE(jw(e))}const ZE=BC,Mw=x.forwardRef(({className:e,...t},r)=>s.jsx(mw,{ref:r,className:Le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Mw.displayName=mw.displayName;const eP=Yo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$w=x.forwardRef(({className:e,variant:t,...r},i)=>s.jsx(gw,{ref:i,className:Le(eP({variant:t}),e),...r}));$w.displayName=gw.displayName;const tP=x.forwardRef(({className:e,...t},r)=>s.jsx(vw,{ref:r,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));tP.displayName=vw.displayName;const Fw=x.forwardRef(({className:e,...t},r)=>s.jsx(ww,{ref:r,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(In,{className:"h-4 w-4"})}));Fw.displayName=ww.displayName;const Uw=x.forwardRef(({className:e,...t},r)=>s.jsx(xw,{ref:r,className:Le("text-sm font-semibold",e),...t}));Uw.displayName=xw.displayName;const zw=x.forwardRef(({className:e,...t},r)=>s.jsx(yw,{ref:r,className:Le("text-sm opacity-90",e),...t}));zw.displayName=yw.displayName;function rP(){const{toasts:e}=Pr();return s.jsxs(ZE,{children:[e.map(function({id:t,title:r,description:i,action:o,...l}){return s.jsxs($w,{...l,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(Uw,{children:r}),i&&s.jsx(zw,{children:i})]}),o,s.jsx(Fw,{})]},t)}),s.jsx(Mw,{})]})}var sP=cv[" useId ".trim().toString()]||(()=>{}),nP=0;function Ws(e){const[t,r]=x.useState(sP());return Gt(()=>{r(i=>i??String(nP++))},[e]),t?`radix-${t}`:""}const aP=["top","right","bottom","left"],Pn=Math.min,Dr=Math.max,Uc=Math.round,jc=Math.floor,_s=e=>({x:e,y:e}),iP={left:"right",right:"left",bottom:"top",top:"bottom"},oP={start:"end",end:"start"};function mf(e,t,r){return Dr(e,Pn(t,r))}function qs(e,t){return typeof e=="function"?e(t):e}function Hs(e){return e.split("-")[0]}function Ti(e){return e.split("-")[1]}function Jf(e){return e==="x"?"y":"x"}function Xf(e){return e==="y"?"height":"width"}function Tn(e){return["top","bottom"].includes(Hs(e))?"y":"x"}function Zf(e){return Jf(Tn(e))}function lP(e,t,r){r===void 0&&(r=!1);const i=Ti(e),o=Zf(e),l=Xf(o);let u=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(u=zc(u)),[u,zc(u)]}function cP(e){const t=zc(e);return[gf(e),t,gf(t)]}function gf(e){return e.replace(/start|end/g,t=>oP[t])}function uP(e,t,r){const i=["left","right"],o=["right","left"],l=["top","bottom"],u=["bottom","top"];switch(e){case"top":case"bottom":return r?t?o:i:t?i:o;case"left":case"right":return t?l:u;default:return[]}}function dP(e,t,r,i){const o=Ti(e);let l=uP(Hs(e),r==="start",i);return o&&(l=l.map(u=>u+"-"+o),t&&(l=l.concat(l.map(gf)))),l}function zc(e){return e.replace(/left|right|bottom|top/g,t=>iP[t])}function hP(e){return{top:0,right:0,bottom:0,left:0,...e}}function Bw(e){return typeof e!="number"?hP(e):{top:e,right:e,bottom:e,left:e}}function Bc(e){const{x:t,y:r,width:i,height:o}=e;return{width:i,height:o,top:r,left:t,right:t+i,bottom:r+o,x:t,y:r}}function fy(e,t,r){let{reference:i,floating:o}=e;const l=Tn(t),u=Zf(t),d=Xf(u),f=Hs(t),m=l==="y",g=i.x+i.width/2-o.width/2,v=i.y+i.height/2-o.height/2,b=i[d]/2-o[d]/2;let S;switch(f){case"top":S={x:g,y:i.y-o.height};break;case"bottom":S={x:g,y:i.y+i.height};break;case"right":S={x:i.x+i.width,y:v};break;case"left":S={x:i.x-o.width,y:v};break;default:S={x:i.x,y:i.y}}switch(Ti(t)){case"start":S[u]-=b*(r&&m?-1:1);break;case"end":S[u]+=b*(r&&m?-1:1);break}return S}const fP=async(e,t,r)=>{const{placement:i="bottom",strategy:o="absolute",middleware:l=[],platform:u}=r,d=l.filter(Boolean),f=await(u.isRTL==null?void 0:u.isRTL(t));let m=await u.getElementRects({reference:e,floating:t,strategy:o}),{x:g,y:v}=fy(m,i,f),b=i,S={},N=0;for(let w=0;w<d.length;w++){const{name:j,fn:C}=d[w],{x:_,y:P,data:A,reset:$}=await C({x:g,y:v,initialPlacement:i,placement:b,strategy:o,middlewareData:S,rects:m,platform:u,elements:{reference:e,floating:t}});g=_??g,v=P??v,S={...S,[j]:{...S[j],...A}},$&&N<=50&&(N++,typeof $=="object"&&($.placement&&(b=$.placement),$.rects&&(m=$.rects===!0?await u.getElementRects({reference:e,floating:t,strategy:o}):$.rects),{x:g,y:v}=fy(m,b,f)),w=-1)}return{x:g,y:v,placement:b,strategy:o,middlewareData:S}};async function Bo(e,t){var r;t===void 0&&(t={});const{x:i,y:o,platform:l,rects:u,elements:d,strategy:f}=e,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:b=!1,padding:S=0}=qs(t,e),N=Bw(S),j=d[b?v==="floating"?"reference":"floating":v],C=Bc(await l.getClippingRect({element:(r=await(l.isElement==null?void 0:l.isElement(j)))==null||r?j:j.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(d.floating)),boundary:m,rootBoundary:g,strategy:f})),_=v==="floating"?{x:i,y:o,width:u.floating.width,height:u.floating.height}:u.reference,P=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d.floating)),A=await(l.isElement==null?void 0:l.isElement(P))?await(l.getScale==null?void 0:l.getScale(P))||{x:1,y:1}:{x:1,y:1},$=Bc(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:_,offsetParent:P,strategy:f}):_);return{top:(C.top-$.top+N.top)/A.y,bottom:($.bottom-C.bottom+N.bottom)/A.y,left:(C.left-$.left+N.left)/A.x,right:($.right-C.right+N.right)/A.x}}const pP=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:o,rects:l,platform:u,elements:d,middlewareData:f}=t,{element:m,padding:g=0}=qs(e,t)||{};if(m==null)return{};const v=Bw(g),b={x:r,y:i},S=Zf(o),N=Xf(S),w=await u.getDimensions(m),j=S==="y",C=j?"top":"left",_=j?"bottom":"right",P=j?"clientHeight":"clientWidth",A=l.reference[N]+l.reference[S]-b[S]-l.floating[N],$=b[S]-l.reference[S],E=await(u.getOffsetParent==null?void 0:u.getOffsetParent(m));let L=E?E[P]:0;(!L||!await(u.isElement==null?void 0:u.isElement(E)))&&(L=d.floating[P]||l.floating[N]);const Q=A/2-$/2,X=L/2-w[N]/2-1,ee=Pn(v[C],X),le=Pn(v[_],X),T=ee,Z=L-w[N]-le,Y=L/2-w[N]/2+Q,ge=mf(T,Y,Z),K=!f.arrow&&Ti(o)!=null&&Y!==ge&&l.reference[N]/2-(Y<T?ee:le)-w[N]/2<0,z=K?Y<T?Y-T:Y-Z:0;return{[S]:b[S]+z,data:{[S]:ge,centerOffset:Y-ge-z,...K&&{alignmentOffset:z}},reset:K}}}),mP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:o,middlewareData:l,rects:u,initialPlacement:d,platform:f,elements:m}=t,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:b,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:w=!0,...j}=qs(e,t);if((r=l.arrow)!=null&&r.alignmentOffset)return{};const C=Hs(o),_=Tn(d),P=Hs(d)===d,A=await(f.isRTL==null?void 0:f.isRTL(m.floating)),$=b||(P||!w?[zc(d)]:cP(d)),E=N!=="none";!b&&E&&$.push(...dP(d,w,N,A));const L=[d,...$],Q=await Bo(t,j),X=[];let ee=((i=l.flip)==null?void 0:i.overflows)||[];if(g&&X.push(Q[C]),v){const Y=lP(o,u,A);X.push(Q[Y[0]],Q[Y[1]])}if(ee=[...ee,{placement:o,overflows:X}],!X.every(Y=>Y<=0)){var le,T;const Y=(((le=l.flip)==null?void 0:le.index)||0)+1,ge=L[Y];if(ge)return{data:{index:Y,overflows:ee},reset:{placement:ge}};let K=(T=ee.filter(z=>z.overflows[0]<=0).sort((z,U)=>z.overflows[1]-U.overflows[1])[0])==null?void 0:T.placement;if(!K)switch(S){case"bestFit":{var Z;const z=(Z=ee.filter(U=>{if(E){const G=Tn(U.placement);return G===_||G==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(G=>G>0).reduce((G,te)=>G+te,0)]).sort((U,G)=>U[1]-G[1])[0])==null?void 0:Z[0];z&&(K=z);break}case"initialPlacement":K=d;break}if(o!==K)return{reset:{placement:K}}}return{}}}};function py(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function my(e){return aP.some(t=>e[t]>=0)}const gP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...o}=qs(e,t);switch(i){case"referenceHidden":{const l=await Bo(t,{...o,elementContext:"reference"}),u=py(l,r.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:my(u)}}}case"escaped":{const l=await Bo(t,{...o,altBoundary:!0}),u=py(l,r.floating);return{data:{escapedOffsets:u,escaped:my(u)}}}default:return{}}}}};async function xP(e,t){const{placement:r,platform:i,elements:o}=e,l=await(i.isRTL==null?void 0:i.isRTL(o.floating)),u=Hs(r),d=Ti(r),f=Tn(r)==="y",m=["left","top"].includes(u)?-1:1,g=l&&f?-1:1,v=qs(t,e);let{mainAxis:b,crossAxis:S,alignmentAxis:N}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return d&&typeof N=="number"&&(S=d==="end"?N*-1:N),f?{x:S*g,y:b*m}:{x:b*m,y:S*g}}const yP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:o,y:l,placement:u,middlewareData:d}=t,f=await xP(t,e);return u===((r=d.offset)==null?void 0:r.placement)&&(i=d.arrow)!=null&&i.alignmentOffset?{}:{x:o+f.x,y:l+f.y,data:{...f,placement:u}}}}},vP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:o}=t,{mainAxis:l=!0,crossAxis:u=!1,limiter:d={fn:j=>{let{x:C,y:_}=j;return{x:C,y:_}}},...f}=qs(e,t),m={x:r,y:i},g=await Bo(t,f),v=Tn(Hs(o)),b=Jf(v);let S=m[b],N=m[v];if(l){const j=b==="y"?"top":"left",C=b==="y"?"bottom":"right",_=S+g[j],P=S-g[C];S=mf(_,S,P)}if(u){const j=v==="y"?"top":"left",C=v==="y"?"bottom":"right",_=N+g[j],P=N-g[C];N=mf(_,N,P)}const w=d.fn({...t,[b]:S,[v]:N});return{...w,data:{x:w.x-r,y:w.y-i,enabled:{[b]:l,[v]:u}}}}}},wP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:o,rects:l,middlewareData:u}=t,{offset:d=0,mainAxis:f=!0,crossAxis:m=!0}=qs(e,t),g={x:r,y:i},v=Tn(o),b=Jf(v);let S=g[b],N=g[v];const w=qs(d,t),j=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(f){const P=b==="y"?"height":"width",A=l.reference[b]-l.floating[P]+j.mainAxis,$=l.reference[b]+l.reference[P]-j.mainAxis;S<A?S=A:S>$&&(S=$)}if(m){var C,_;const P=b==="y"?"width":"height",A=["top","left"].includes(Hs(o)),$=l.reference[v]-l.floating[P]+(A&&((C=u.offset)==null?void 0:C[v])||0)+(A?0:j.crossAxis),E=l.reference[v]+l.reference[P]+(A?0:((_=u.offset)==null?void 0:_[v])||0)-(A?j.crossAxis:0);N<$?N=$:N>E&&(N=E)}return{[b]:S,[v]:N}}}},bP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:o,rects:l,platform:u,elements:d}=t,{apply:f=()=>{},...m}=qs(e,t),g=await Bo(t,m),v=Hs(o),b=Ti(o),S=Tn(o)==="y",{width:N,height:w}=l.floating;let j,C;v==="top"||v==="bottom"?(j=v,C=b===(await(u.isRTL==null?void 0:u.isRTL(d.floating))?"start":"end")?"left":"right"):(C=v,j=b==="end"?"top":"bottom");const _=w-g.top-g.bottom,P=N-g.left-g.right,A=Pn(w-g[j],_),$=Pn(N-g[C],P),E=!t.middlewareData.shift;let L=A,Q=$;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(Q=P),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(L=_),E&&!b){const ee=Dr(g.left,0),le=Dr(g.right,0),T=Dr(g.top,0),Z=Dr(g.bottom,0);S?Q=N-2*(ee!==0||le!==0?ee+le:Dr(g.left,g.right)):L=w-2*(T!==0||Z!==0?T+Z:Dr(g.top,g.bottom))}await f({...t,availableWidth:Q,availableHeight:L});const X=await u.getDimensions(d.floating);return N!==X.width||w!==X.height?{reset:{rects:!0}}:{}}}};function lu(){return typeof window<"u"}function Ri(e){return Vw(e)?(e.nodeName||"").toLowerCase():"#document"}function $r(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Es(e){var t;return(t=(Vw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Vw(e){return lu()?e instanceof Node||e instanceof $r(e).Node:!1}function ls(e){return lu()?e instanceof Element||e instanceof $r(e).Element:!1}function Cs(e){return lu()?e instanceof HTMLElement||e instanceof $r(e).HTMLElement:!1}function gy(e){return!lu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $r(e).ShadowRoot}function Jo(e){const{overflow:t,overflowX:r,overflowY:i,display:o}=cs(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!["inline","contents"].includes(o)}function jP(e){return["table","td","th"].includes(Ri(e))}function cu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ep(e){const t=tp(),r=ls(e)?cs(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(r.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(r.contain||"").includes(i))}function NP(e){let t=Rn(e);for(;Cs(t)&&!xi(t);){if(ep(t))return t;if(cu(t))return null;t=Rn(t)}return null}function tp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xi(e){return["html","body","#document"].includes(Ri(e))}function cs(e){return $r(e).getComputedStyle(e)}function uu(e){return ls(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Rn(e){if(Ri(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gy(e)&&e.host||Es(e);return gy(t)?t.host:t}function Ww(e){const t=Rn(e);return xi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cs(t)&&Jo(t)?t:Ww(t)}function Vo(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=Ww(e),l=o===((i=e.ownerDocument)==null?void 0:i.body),u=$r(o);if(l){const d=xf(u);return t.concat(u,u.visualViewport||[],Jo(o)?o:[],d&&r?Vo(d):[])}return t.concat(o,Vo(o,[],r))}function xf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qw(e){const t=cs(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const o=Cs(e),l=o?e.offsetWidth:r,u=o?e.offsetHeight:i,d=Uc(r)!==l||Uc(i)!==u;return d&&(r=l,i=u),{width:r,height:i,$:d}}function rp(e){return ls(e)?e:e.contextElement}function ui(e){const t=rp(e);if(!Cs(t))return _s(1);const r=t.getBoundingClientRect(),{width:i,height:o,$:l}=qw(t);let u=(l?Uc(r.width):r.width)/i,d=(l?Uc(r.height):r.height)/o;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const SP=_s(0);function Hw(e){const t=$r(e);return!tp()||!t.visualViewport?SP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kP(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==$r(e)?!1:t}function ha(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),l=rp(e);let u=_s(1);t&&(i?ls(i)&&(u=ui(i)):u=ui(e));const d=kP(l,r,i)?Hw(l):_s(0);let f=(o.left+d.x)/u.x,m=(o.top+d.y)/u.y,g=o.width/u.x,v=o.height/u.y;if(l){const b=$r(l),S=i&&ls(i)?$r(i):i;let N=b,w=xf(N);for(;w&&i&&S!==N;){const j=ui(w),C=w.getBoundingClientRect(),_=cs(w),P=C.left+(w.clientLeft+parseFloat(_.paddingLeft))*j.x,A=C.top+(w.clientTop+parseFloat(_.paddingTop))*j.y;f*=j.x,m*=j.y,g*=j.x,v*=j.y,f+=P,m+=A,N=$r(w),w=xf(N)}}return Bc({width:g,height:v,x:f,y:m})}function sp(e,t){const r=uu(e).scrollLeft;return t?t.left+r:ha(Es(e)).left+r}function Kw(e,t,r){r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=i.left+t.scrollLeft-(r?0:sp(e,i)),l=i.top+t.scrollTop;return{x:o,y:l}}function _P(e){let{elements:t,rect:r,offsetParent:i,strategy:o}=e;const l=o==="fixed",u=Es(i),d=t?cu(t.floating):!1;if(i===u||d&&l)return r;let f={scrollLeft:0,scrollTop:0},m=_s(1);const g=_s(0),v=Cs(i);if((v||!v&&!l)&&((Ri(i)!=="body"||Jo(u))&&(f=uu(i)),Cs(i))){const S=ha(i);m=ui(i),g.x=S.x+i.clientLeft,g.y=S.y+i.clientTop}const b=u&&!v&&!l?Kw(u,f,!0):_s(0);return{width:r.width*m.x,height:r.height*m.y,x:r.x*m.x-f.scrollLeft*m.x+g.x+b.x,y:r.y*m.y-f.scrollTop*m.y+g.y+b.y}}function CP(e){return Array.from(e.getClientRects())}function EP(e){const t=Es(e),r=uu(e),i=e.ownerDocument.body,o=Dr(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),l=Dr(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let u=-r.scrollLeft+sp(e);const d=-r.scrollTop;return cs(i).direction==="rtl"&&(u+=Dr(t.clientWidth,i.clientWidth)-o),{width:o,height:l,x:u,y:d}}function PP(e,t){const r=$r(e),i=Es(e),o=r.visualViewport;let l=i.clientWidth,u=i.clientHeight,d=0,f=0;if(o){l=o.width,u=o.height;const m=tp();(!m||m&&t==="fixed")&&(d=o.offsetLeft,f=o.offsetTop)}return{width:l,height:u,x:d,y:f}}function TP(e,t){const r=ha(e,!0,t==="fixed"),i=r.top+e.clientTop,o=r.left+e.clientLeft,l=Cs(e)?ui(e):_s(1),u=e.clientWidth*l.x,d=e.clientHeight*l.y,f=o*l.x,m=i*l.y;return{width:u,height:d,x:f,y:m}}function xy(e,t,r){let i;if(t==="viewport")i=PP(e,r);else if(t==="document")i=EP(Es(e));else if(ls(t))i=TP(t,r);else{const o=Hw(e);i={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Bc(i)}function Gw(e,t){const r=Rn(e);return r===t||!ls(r)||xi(r)?!1:cs(r).position==="fixed"||Gw(r,t)}function RP(e,t){const r=t.get(e);if(r)return r;let i=Vo(e,[],!1).filter(d=>ls(d)&&Ri(d)!=="body"),o=null;const l=cs(e).position==="fixed";let u=l?Rn(e):e;for(;ls(u)&&!xi(u);){const d=cs(u),f=ep(u);!f&&d.position==="fixed"&&(o=null),(l?!f&&!o:!f&&d.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Jo(u)&&!f&&Gw(e,u))?i=i.filter(g=>g!==u):o=d,u=Rn(u)}return t.set(e,i),i}function AP(e){let{element:t,boundary:r,rootBoundary:i,strategy:o}=e;const u=[...r==="clippingAncestors"?cu(t)?[]:RP(t,this._c):[].concat(r),i],d=u[0],f=u.reduce((m,g)=>{const v=xy(t,g,o);return m.top=Dr(v.top,m.top),m.right=Pn(v.right,m.right),m.bottom=Pn(v.bottom,m.bottom),m.left=Dr(v.left,m.left),m},xy(t,d,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function IP(e){const{width:t,height:r}=qw(e);return{width:t,height:r}}function OP(e,t,r){const i=Cs(t),o=Es(t),l=r==="fixed",u=ha(e,!0,l,t);let d={scrollLeft:0,scrollTop:0};const f=_s(0);if(i||!i&&!l)if((Ri(t)!=="body"||Jo(o))&&(d=uu(t)),i){const b=ha(t,!0,l,t);f.x=b.x+t.clientLeft,f.y=b.y+t.clientTop}else o&&(f.x=sp(o));const m=o&&!i&&!l?Kw(o,d):_s(0),g=u.left+d.scrollLeft-f.x-m.x,v=u.top+d.scrollTop-f.y-m.y;return{x:g,y:v,width:u.width,height:u.height}}function Th(e){return cs(e).position==="static"}function yy(e,t){if(!Cs(e)||cs(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Es(e)===r&&(r=r.ownerDocument.body),r}function Qw(e,t){const r=$r(e);if(cu(e))return r;if(!Cs(e)){let o=Rn(e);for(;o&&!xi(o);){if(ls(o)&&!Th(o))return o;o=Rn(o)}return r}let i=yy(e,t);for(;i&&jP(i)&&Th(i);)i=yy(i,t);return i&&xi(i)&&Th(i)&&!ep(i)?r:i||NP(e)||r}const LP=async function(e){const t=this.getOffsetParent||Qw,r=this.getDimensions,i=await r(e.floating);return{reference:OP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function DP(e){return cs(e).direction==="rtl"}const MP={convertOffsetParentRelativeRectToViewportRelativeRect:_P,getDocumentElement:Es,getClippingRect:AP,getOffsetParent:Qw,getElementRects:LP,getClientRects:CP,getDimensions:IP,getScale:ui,isElement:ls,isRTL:DP};function Yw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $P(e,t){let r=null,i;const o=Es(e);function l(){var d;clearTimeout(i),(d=r)==null||d.disconnect(),r=null}function u(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),l();const m=e.getBoundingClientRect(),{left:g,top:v,width:b,height:S}=m;if(d||t(),!b||!S)return;const N=jc(v),w=jc(o.clientWidth-(g+b)),j=jc(o.clientHeight-(v+S)),C=jc(g),P={rootMargin:-N+"px "+-w+"px "+-j+"px "+-C+"px",threshold:Dr(0,Pn(1,f))||1};let A=!0;function $(E){const L=E[0].intersectionRatio;if(L!==f){if(!A)return u();L?u(!1,L):i=setTimeout(()=>{u(!1,1e-7)},1e3)}L===1&&!Yw(m,e.getBoundingClientRect())&&u(),A=!1}try{r=new IntersectionObserver($,{...P,root:o.ownerDocument})}catch{r=new IntersectionObserver($,P)}r.observe(e)}return u(!0),l}function FP(e,t,r,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,m=rp(e),g=o||l?[...m?Vo(m):[],...Vo(t)]:[];g.forEach(C=>{o&&C.addEventListener("scroll",r,{passive:!0}),l&&C.addEventListener("resize",r)});const v=m&&d?$P(m,r):null;let b=-1,S=null;u&&(S=new ResizeObserver(C=>{let[_]=C;_&&_.target===m&&S&&(S.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var P;(P=S)==null||P.observe(t)})),r()}),m&&!f&&S.observe(m),S.observe(t));let N,w=f?ha(e):null;f&&j();function j(){const C=ha(e);w&&!Yw(w,C)&&r(),w=C,N=requestAnimationFrame(j)}return r(),()=>{var C;g.forEach(_=>{o&&_.removeEventListener("scroll",r),l&&_.removeEventListener("resize",r)}),v?.(),(C=S)==null||C.disconnect(),S=null,f&&cancelAnimationFrame(N)}}const UP=yP,zP=vP,BP=mP,VP=bP,WP=gP,vy=pP,qP=wP,HP=(e,t,r)=>{const i=new Map,o={platform:MP,...r},l={...o.platform,_c:i};return fP(e,t,{...o,platform:l})};var Pc=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Vc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,i,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(i=r;i--!==0;)if(!Vc(e[i],t[i]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(t,o[i]))return!1;for(i=r;i--!==0;){const l=o[i];if(!(l==="_owner"&&e.$$typeof)&&!Vc(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function Jw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wy(e,t){const r=Jw(e);return Math.round(t*r)/r}function Rh(e){const t=x.useRef(e);return Pc(()=>{t.current=e}),t}function KP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:l,floating:u}={},transform:d=!0,whileElementsMounted:f,open:m}=e,[g,v]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[b,S]=x.useState(i);Vc(b,i)||S(i);const[N,w]=x.useState(null),[j,C]=x.useState(null),_=x.useCallback(U=>{U!==E.current&&(E.current=U,w(U))},[]),P=x.useCallback(U=>{U!==L.current&&(L.current=U,C(U))},[]),A=l||N,$=u||j,E=x.useRef(null),L=x.useRef(null),Q=x.useRef(g),X=f!=null,ee=Rh(f),le=Rh(o),T=Rh(m),Z=x.useCallback(()=>{if(!E.current||!L.current)return;const U={placement:t,strategy:r,middleware:b};le.current&&(U.platform=le.current),HP(E.current,L.current,U).then(G=>{const te={...G,isPositioned:T.current!==!1};Y.current&&!Vc(Q.current,te)&&(Q.current=te,Ei.flushSync(()=>{v(te)}))})},[b,t,r,le,T]);Pc(()=>{m===!1&&Q.current.isPositioned&&(Q.current.isPositioned=!1,v(U=>({...U,isPositioned:!1})))},[m]);const Y=x.useRef(!1);Pc(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Pc(()=>{if(A&&(E.current=A),$&&(L.current=$),A&&$){if(ee.current)return ee.current(A,$,Z);Z()}},[A,$,Z,ee,X]);const ge=x.useMemo(()=>({reference:E,floating:L,setReference:_,setFloating:P}),[_,P]),K=x.useMemo(()=>({reference:A,floating:$}),[A,$]),z=x.useMemo(()=>{const U={position:r,left:0,top:0};if(!K.floating)return U;const G=wy(K.floating,g.x),te=wy(K.floating,g.y);return d?{...U,transform:"translate("+G+"px, "+te+"px)",...Jw(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:G,top:te}},[r,d,K.floating,g.x,g.y]);return x.useMemo(()=>({...g,update:Z,refs:ge,elements:K,floatingStyles:z}),[g,Z,ge,K,z])}const GP=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:i,padding:o}=typeof e=="function"?e(r):e;return i&&t(i)?i.current!=null?vy({element:i.current,padding:o}).fn(r):{}:i?vy({element:i,padding:o}).fn(r):{}}}},QP=(e,t)=>({...UP(e),options:[e,t]}),YP=(e,t)=>({...zP(e),options:[e,t]}),JP=(e,t)=>({...qP(e),options:[e,t]}),XP=(e,t)=>({...BP(e),options:[e,t]}),ZP=(e,t)=>({...VP(e),options:[e,t]}),eT=(e,t)=>({...WP(e),options:[e,t]}),tT=(e,t)=>({...GP(e),options:[e,t]});var rT="Arrow",Xw=x.forwardRef((e,t)=>{const{children:r,width:i=10,height:o=5,...l}=e;return s.jsx(Ge.svg,{...l,ref:t,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Xw.displayName=rT;var sT=Xw;function Zw(e){const[t,r]=x.useState(void 0);return Gt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let u,d;if("borderBoxSize"in l){const f=l.borderBoxSize,m=Array.isArray(f)?f[0]:f;u=m.inlineSize,d=m.blockSize}else u=e.offsetWidth,d=e.offsetHeight;r({width:u,height:d})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else r(void 0)},[e]),t}var np="Popper",[eb,du]=us(np),[nT,tb]=eb(np),rb=e=>{const{__scopePopper:t,children:r}=e,[i,o]=x.useState(null);return s.jsx(nT,{scope:t,anchor:i,onAnchorChange:o,children:r})};rb.displayName=np;var sb="PopperAnchor",nb=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:i,...o}=e,l=tb(sb,r),u=x.useRef(null),d=lt(t,u);return x.useEffect(()=>{l.onAnchorChange(i?.current||u.current)}),i?null:s.jsx(Ge.div,{...o,ref:d})});nb.displayName=sb;var ap="PopperContent",[aT,iT]=eb(ap),ab=x.forwardRef((e,t)=>{const{__scopePopper:r,side:i="bottom",sideOffset:o=0,align:l="center",alignOffset:u=0,arrowPadding:d=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:b=!1,updatePositionStrategy:S="optimized",onPlaced:N,...w}=e,j=tb(ap,r),[C,_]=x.useState(null),P=lt(t,ae=>_(ae)),[A,$]=x.useState(null),E=Zw(A),L=E?.width??0,Q=E?.height??0,X=i+(l!=="center"?"-"+l:""),ee=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},le=Array.isArray(m)?m:[m],T=le.length>0,Z={padding:ee,boundary:le.filter(lT),altBoundary:T},{refs:Y,floatingStyles:ge,placement:K,isPositioned:z,middlewareData:U}=KP({strategy:"fixed",placement:X,whileElementsMounted:(...ae)=>FP(...ae,{animationFrame:S==="always"}),elements:{reference:j.anchor},middleware:[QP({mainAxis:o+Q,alignmentAxis:u}),f&&YP({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?JP():void 0,...Z}),f&&XP({...Z}),ZP({...Z,apply:({elements:ae,rects:we,availableWidth:Pe,availableHeight:Ae})=>{const{width:Qe,height:Te}=we.reference,Je=ae.floating.style;Je.setProperty("--radix-popper-available-width",`${Pe}px`),Je.setProperty("--radix-popper-available-height",`${Ae}px`),Je.setProperty("--radix-popper-anchor-width",`${Qe}px`),Je.setProperty("--radix-popper-anchor-height",`${Te}px`)}}),A&&tT({element:A,padding:d}),cT({arrowWidth:L,arrowHeight:Q}),b&&eT({strategy:"referenceHidden",...Z})]}),[G,te]=lb(K),D=xr(N);Gt(()=>{z&&D?.()},[z,D]);const I=U.arrow?.x,fe=U.arrow?.y,ue=U.arrow?.centerOffset!==0,[xe,ve]=x.useState();return Gt(()=>{C&&ve(window.getComputedStyle(C).zIndex)},[C]),s.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:z?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(aT,{scope:r,placedSide:G,onArrowChange:$,arrowX:I,arrowY:fe,shouldHideArrow:ue,children:s.jsx(Ge.div,{"data-side":G,"data-align":te,...w,ref:P,style:{...w.style,animation:z?void 0:"none"}})})})});ab.displayName=ap;var ib="PopperArrow",oT={top:"bottom",right:"left",bottom:"top",left:"right"},ob=x.forwardRef(function(t,r){const{__scopePopper:i,...o}=t,l=iT(ib,i),u=oT[l.placedSide];return s.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:s.jsx(sT,{...o,ref:r,style:{...o.style,display:"block"}})})});ob.displayName=ib;function lT(e){return e!==null}var cT=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:i,middlewareData:o}=t,u=o.arrow?.centerOffset!==0,d=u?0:e.arrowWidth,f=u?0:e.arrowHeight,[m,g]=lb(r),v={start:"0%",center:"50%",end:"100%"}[g],b=(o.arrow?.x??0)+d/2,S=(o.arrow?.y??0)+f/2;let N="",w="";return m==="bottom"?(N=u?v:`${b}px`,w=`${-f}px`):m==="top"?(N=u?v:`${b}px`,w=`${i.floating.height+f}px`):m==="right"?(N=`${-f}px`,w=u?v:`${S}px`):m==="left"&&(N=`${i.floating.width+f}px`,w=u?v:`${S}px`),{data:{x:N,y:w}}}});function lb(e){const[t,r="center"]=e.split("-");return[t,r]}var cb=rb,ub=nb,db=ab,hb=ob,[hu]=us("Tooltip",[du]),fu=du(),fb="TooltipProvider",uT=700,yf="tooltip.open",[dT,ip]=hu(fb),pb=e=>{const{__scopeTooltip:t,delayDuration:r=uT,skipDelayDuration:i=300,disableHoverableContent:o=!1,children:l}=e,u=x.useRef(!0),d=x.useRef(!1),f=x.useRef(0);return x.useEffect(()=>{const m=f.current;return()=>window.clearTimeout(m)},[]),s.jsx(dT,{scope:t,isOpenDelayedRef:u,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(f.current),u.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u.current=!0,i)},[i]),isPointerInTransitRef:d,onPointerInTransitChange:x.useCallback(m=>{d.current=m},[]),disableHoverableContent:o,children:l})};pb.displayName=fb;var pu="Tooltip",[hT,mu]=hu(pu),mb=e=>{const{__scopeTooltip:t,children:r,open:i,defaultOpen:o=!1,onOpenChange:l,disableHoverableContent:u,delayDuration:d}=e,f=ip(pu,e.__scopeTooltip),m=fu(t),[g,v]=x.useState(null),b=Ws(),S=x.useRef(0),N=u??f.disableHoverableContent,w=d??f.delayDuration,j=x.useRef(!1),[C=!1,_]=Cn({prop:i,defaultProp:o,onChange:L=>{L?(f.onOpen(),document.dispatchEvent(new CustomEvent(yf))):f.onClose(),l?.(L)}}),P=x.useMemo(()=>C?j.current?"delayed-open":"instant-open":"closed",[C]),A=x.useCallback(()=>{window.clearTimeout(S.current),S.current=0,j.current=!1,_(!0)},[_]),$=x.useCallback(()=>{window.clearTimeout(S.current),S.current=0,_(!1)},[_]),E=x.useCallback(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{j.current=!0,_(!0),S.current=0},w)},[w,_]);return x.useEffect(()=>()=>{S.current&&(window.clearTimeout(S.current),S.current=0)},[]),s.jsx(cb,{...m,children:s.jsx(hT,{scope:t,contentId:b,open:C,stateAttribute:P,trigger:g,onTriggerChange:v,onTriggerEnter:x.useCallback(()=>{f.isOpenDelayedRef.current?E():A()},[f.isOpenDelayedRef,E,A]),onTriggerLeave:x.useCallback(()=>{N?$():(window.clearTimeout(S.current),S.current=0)},[$,N]),onOpen:A,onClose:$,disableHoverableContent:N,children:r})})};mb.displayName=pu;var vf="TooltipTrigger",gb=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,o=mu(vf,r),l=ip(vf,r),u=fu(r),d=x.useRef(null),f=lt(t,d,o.onTriggerChange),m=x.useRef(!1),g=x.useRef(!1),v=x.useCallback(()=>m.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),s.jsx(ub,{asChild:!0,...u,children:s.jsx(Ge.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...i,ref:f,onPointerMove:$e(e.onPointerMove,b=>{b.pointerType!=="touch"&&!g.current&&!l.isPointerInTransitRef.current&&(o.onTriggerEnter(),g.current=!0)}),onPointerLeave:$e(e.onPointerLeave,()=>{o.onTriggerLeave(),g.current=!1}),onPointerDown:$e(e.onPointerDown,()=>{o.open&&o.onClose(),m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:$e(e.onFocus,()=>{m.current||o.onOpen()}),onBlur:$e(e.onBlur,o.onClose),onClick:$e(e.onClick,o.onClose)})})});gb.displayName=vf;var fT="TooltipPortal",[CI,pT]=hu(fT,{forceMount:void 0}),yi="TooltipContent",xb=x.forwardRef((e,t)=>{const r=pT(yi,e.__scopeTooltip),{forceMount:i=r.forceMount,side:o="top",...l}=e,u=mu(yi,e.__scopeTooltip);return s.jsx(ga,{present:i||u.open,children:u.disableHoverableContent?s.jsx(yb,{side:o,...l,ref:t}):s.jsx(mT,{side:o,...l,ref:t})})}),mT=x.forwardRef((e,t)=>{const r=mu(yi,e.__scopeTooltip),i=ip(yi,e.__scopeTooltip),o=x.useRef(null),l=lt(t,o),[u,d]=x.useState(null),{trigger:f,onClose:m}=r,g=o.current,{onPointerInTransitChange:v}=i,b=x.useCallback(()=>{d(null),v(!1)},[v]),S=x.useCallback((N,w)=>{const j=N.currentTarget,C={x:N.clientX,y:N.clientY},_=wT(C,j.getBoundingClientRect()),P=bT(C,_),A=jT(w.getBoundingClientRect()),$=ST([...P,...A]);d($),v(!0)},[v]);return x.useEffect(()=>()=>b(),[b]),x.useEffect(()=>{if(f&&g){const N=j=>S(j,g),w=j=>S(j,f);return f.addEventListener("pointerleave",N),g.addEventListener("pointerleave",w),()=>{f.removeEventListener("pointerleave",N),g.removeEventListener("pointerleave",w)}}},[f,g,S,b]),x.useEffect(()=>{if(u){const N=w=>{const j=w.target,C={x:w.clientX,y:w.clientY},_=f?.contains(j)||g?.contains(j),P=!NT(C,u);_?b():P&&(b(),m())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[f,g,u,m,b]),s.jsx(yb,{...e,ref:l})}),[gT,xT]=hu(pu,{isInside:!1}),yT=Jv("TooltipContent"),yb=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:i,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:u,...d}=e,f=mu(yi,r),m=fu(r),{onClose:g}=f;return x.useEffect(()=>(document.addEventListener(yf,g),()=>document.removeEventListener(yf,g)),[g]),x.useEffect(()=>{if(f.trigger){const v=b=>{b.target?.contains(f.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[f.trigger,g]),s.jsx(Go,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:s.jsxs(db,{"data-state":f.stateAttribute,...m,...d,ref:t,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(yT,{children:i}),s.jsx(gT,{scope:r,isInside:!0,children:s.jsx(SC,{id:f.contentId,role:"tooltip",children:o||i})})]})})});xb.displayName=yi;var vb="TooltipArrow",vT=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,o=fu(r);return xT(vb,r).isInside?null:s.jsx(hb,{...o,...i,ref:t})});vT.displayName=vb;function wT(e,t){const r=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),l=Math.abs(t.left-e.x);switch(Math.min(r,i,o,l)){case l:return"left";case o:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function bT(e,t,r=5){const i=[];switch(t){case"top":i.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":i.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":i.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":i.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return i}function jT(e){const{top:t,right:r,bottom:i,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:i},{x:o,y:i}]}function NT(e,t){const{x:r,y:i}=e;let o=!1;for(let l=0,u=t.length-1;l<t.length;u=l++){const d=t[l].x,f=t[l].y,m=t[u].x,g=t[u].y;f>i!=g>i&&r<(m-d)*(i-f)/(g-f)+d&&(o=!o)}return o}function ST(e){const t=e.slice();return t.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),kT(t)}function kT(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const o=e[i];for(;t.length>=2;){const l=t[t.length-1],u=t[t.length-2];if((l.x-u.x)*(o.y-u.y)>=(l.y-u.y)*(o.x-u.x))t.pop();else break}t.push(o)}t.pop();const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i];for(;r.length>=2;){const l=r[r.length-1],u=r[r.length-2];if((l.x-u.x)*(o.y-u.y)>=(l.y-u.y)*(o.x-u.x))r.pop();else break}r.push(o)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var _T=pb,CT=mb,ET=gb,wb=xb;const PT=_T,Zn=CT,ea=ET,wn=x.forwardRef(({className:e,sideOffset:t=4,...r},i)=>s.jsx(wb,{ref:i,sideOffset:t,className:Le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));wn.displayName=wb.displayName;const bb=x.createContext(void 0);function TT({children:e,defaultTheme:t="system",storageKey:r="pawportraits-theme"}){const[i,o]=x.useState(()=>localStorage.getItem(r)||t);x.useEffect(()=>{const u=window.document.documentElement;if(u.classList.remove("light","dark"),i==="system"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u.classList.add(d);return}u.classList.add(i)},[i]);const l={theme:i,setTheme:u=>{localStorage.setItem(r,u),o(u)}};return s.jsx(bb.Provider,{value:l,children:e})}const RT=()=>{const e=x.useContext(bb);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},_e=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Le("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));_e.displayName="Card";const Mt=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Le("flex flex-col space-y-1.5 p-6",e),...t}));Mt.displayName="CardHeader";const qt=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Le("text-2xl font-semibold leading-none tracking-tight",e),...t}));qt.displayName="CardTitle";const _r=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));_r.displayName="CardDescription";const Ee=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Le("p-6 pt-0",e),...t}));Ee.displayName="CardContent";const gu=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Le("flex items-center p-6 pt-0",e),...t}));gu.displayName="CardFooter";const He=x.forwardRef(({className:e,type:t,...r},i)=>s.jsx("input",{type:t,className:Le("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));He.displayName="Input";const op=Yo("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),B=x.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...o},l)=>{const u=i?Qv:"button";return s.jsx(u,{className:Le(op({variant:t,size:r,className:e})),ref:l,...o})});B.displayName="Button";const AT="",IT="pawtrait-pals-access-verified";function OT({children:e}){const[t,r]=x.useState(!1),[i,o]=x.useState(""),[l,u]=x.useState(""),[d,f]=x.useState(!0),[m,g]=x.useState(!1);x.useEffect(()=>{{r(!0),f(!1);return}},[]);const v=b=>{b.preventDefault(),u(""),i.trim()===AT.trim()?(localStorage.setItem(IT,"true"),r(!0)):(u("Invalid access code. Please try again."),o(""))};return d?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-50",children:s.jsx("div",{className:"animate-pulse",children:s.jsx(Ve,{className:"h-16 w-16 text-orange-500"})})}):t?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-amber-50 p-4",children:s.jsxs(_e,{className:"w-full max-w-md",children:[s.jsxs(Mt,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-orange-100",children:s.jsx(tE,{className:"h-8 w-8 text-orange-600"})}),s.jsx(qt,{className:"text-2xl font-bold text-foreground",children:"Pawtrait Pals Preview"}),s.jsx(_r,{children:"This site is currently in private beta. Please enter the access code to continue."})]}),s.jsx(Ee,{children:s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(He,{type:m?"text":"password",placeholder:"Enter access code",value:i,onChange:b=>o(b.target.value),className:"text-center text-lg tracking-widest pr-10","data-testid":"input-access-code",autoFocus:!0}),s.jsx(B,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>g(!m),"data-testid":"button-toggle-code-visibility",children:m?s.jsx(uf,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Uo,{className:"h-4 w-4 text-muted-foreground"})})]}),l&&s.jsx("p",{className:"text-sm text-destructive text-center",children:l})]}),s.jsx(B,{type:"submit",className:"w-full","data-testid":"button-submit-code",children:"Enter Site"})]})})]})})}function LT(){return s.jsx("footer",{className:"py-8 border-t",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Built for Rescue Organizations"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsx("span",{children:"Helping rescue pets find their furever homes through art"}),s.jsx("span",{className:"hidden md:inline",children:""}),s.jsx(ye,{href:"/privacy",className:"hover:text-primary transition-colors",children:"Privacy Policy"}),s.jsx(ye,{href:"/terms",className:"hover:text-primary transition-colors",children:"Terms of Service"})]})]})})})}const by="pawtrait-pals-cookie-consent";function DT(){const[e,t]=x.useState(!1);x.useEffect(()=>{localStorage.getItem(by)||t(!0)},[]);function r(){localStorage.setItem(by,"accepted"),t(!1)}return e?s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card border-t shadow-lg p-4",children:s.jsxs("div",{className:"container mx-auto flex flex-col sm:flex-row items-center justify-between gap-3 max-w-4xl",children:[s.jsxs("p",{className:"text-sm text-muted-foreground text-center sm:text-left",children:["We use essential cookies and local storage for authentication and preferences. No advertising or tracking cookies are used."," ",s.jsx("a",{href:"/privacy",className:"text-primary underline",children:"Privacy Policy"})]}),s.jsx(B,{onClick:r,size:"sm",className:"shrink-0",children:"Got it"})]})}):null}function MT(){return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center px-4 max-w-md",children:[s.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[s.jsx(Ve,{className:"h-12 w-12 text-primary/40"}),s.jsx(et,{className:"h-12 w-12 text-primary/40"})]}),s.jsx("h1",{className:"text-5xl font-serif font-bold text-primary mb-3",children:"404"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Page Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-8",children:"This page wandered off. Let's get you back on track."}),s.jsx(B,{className:"gap-2",asChild:!0,children:s.jsxs(ye,{href:"/",children:[s.jsx(XC,{className:"h-4 w-4"}),"Back to Home"]})})]})})}async function $T(e){if(!e?.access_token)return null;const t=await fetch("/api/auth/user",{headers:{Authorization:`Bearer ${e.access_token}`}});if(t.status===401)return null;if(!t.ok)throw new Error(`${t.status}: ${t.statusText}`);return t.json()}function yr(){const e=Ho(),[t,r]=x.useState(null),[i,o]=x.useState(!0);x.useEffect(()=>{ii.auth.getSession().then(({data:{session:b}})=>{r(b),o(!1)});const{data:{subscription:v}}=ii.auth.onAuthStateChange((b,S)=>{r(S),o(!1),e.invalidateQueries({queryKey:["/api/auth/user"]})});return()=>v.unsubscribe()},[e]);const{data:l,isLoading:u}=ut({queryKey:["/api/auth/user"],queryFn:()=>$T(t),enabled:!i,retry:!1,staleTime:1e3*60*5}),d=Ft({mutationFn:async()=>{await ii.auth.signOut()},onSuccess:()=>{e.setQueryData(["/api/auth/user"],null),window.location.href="/"}}),f=i||u,m=!!l&&!!t,g=m&&!!l?.isAdmin;return{user:l,isLoading:f,isAuthenticated:m,isAdmin:g,logout:d.mutate,isLoggingOut:d.isPending,session:t}}var lp="Avatar",[FT]=us(lp),[UT,jb]=FT(lp),Nb=x.forwardRef((e,t)=>{const{__scopeAvatar:r,...i}=e,[o,l]=x.useState("idle");return s.jsx(UT,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:l,children:s.jsx(Ge.span,{...i,ref:t})})});Nb.displayName=lp;var Sb="AvatarImage",kb=x.forwardRef((e,t)=>{const{__scopeAvatar:r,src:i,onLoadingStatusChange:o=()=>{},...l}=e,u=jb(Sb,r),d=zT(i,l),f=xr(m=>{o(m),u.onImageLoadingStatusChange(m)});return Gt(()=>{d!=="idle"&&f(d)},[d,f]),d==="loaded"?s.jsx(Ge.img,{...l,ref:t,src:i}):null});kb.displayName=Sb;var _b="AvatarFallback",Cb=x.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:i,...o}=e,l=jb(_b,r),[u,d]=x.useState(i===void 0);return x.useEffect(()=>{if(i!==void 0){const f=window.setTimeout(()=>d(!0),i);return()=>window.clearTimeout(f)}},[i]),u&&l.imageLoadingStatus!=="loaded"?s.jsx(Ge.span,{...o,ref:t}):null});Cb.displayName=_b;function jy(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function zT(e,{referrerPolicy:t,crossOrigin:r}){const i=VT(),o=x.useRef(null),l=i?(o.current||(o.current=new window.Image),o.current):null,[u,d]=x.useState(()=>jy(l,e));return Gt(()=>{d(jy(l,e))},[l,e]),Gt(()=>{const f=v=>()=>{d(v)};if(!l)return;const m=f("loaded"),g=f("error");return l.addEventListener("load",m),l.addEventListener("error",g),t&&(l.referrerPolicy=t),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",m),l.removeEventListener("error",g)}},[l,r,t]),u}function BT(){return()=>{}}function VT(){return x.useSyncExternalStore(BT,()=>!0,()=>!1)}var Eb=Nb,Pb=kb,Tb=Cb;const Ns=x.forwardRef(({className:e,...t},r)=>s.jsx(Eb,{ref:r,className:Le(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...t}));Ns.displayName=Eb.displayName;const Hr=x.forwardRef(({className:e,...t},r)=>s.jsx(Pb,{ref:r,className:Le("aspect-square h-full w-full",e),...t}));Hr.displayName=Pb.displayName;const Ss=x.forwardRef(({className:e,...t},r)=>s.jsx(Tb,{ref:r,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ss.displayName=Tb.displayName;var Ah="focusScope.autoFocusOnMount",Ih="focusScope.autoFocusOnUnmount",Ny={bubbles:!1,cancelable:!0},WT="FocusScope",cp=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...u}=e,[d,f]=x.useState(null),m=xr(o),g=xr(l),v=x.useRef(null),b=lt(t,w=>f(w)),S=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let w=function(P){if(S.paused||!d)return;const A=P.target;d.contains(A)?v.current=A:bn(v.current,{select:!0})},j=function(P){if(S.paused||!d)return;const A=P.relatedTarget;A!==null&&(d.contains(A)||bn(v.current,{select:!0}))},C=function(P){if(document.activeElement===document.body)for(const $ of P)$.removedNodes.length>0&&bn(d)};document.addEventListener("focusin",w),document.addEventListener("focusout",j);const _=new MutationObserver(C);return d&&_.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",j),_.disconnect()}}},[i,d,S.paused]),x.useEffect(()=>{if(d){ky.add(S);const w=document.activeElement;if(!d.contains(w)){const C=new CustomEvent(Ah,Ny);d.addEventListener(Ah,m),d.dispatchEvent(C),C.defaultPrevented||(qT(YT(Rb(d)),{select:!0}),document.activeElement===w&&bn(d))}return()=>{d.removeEventListener(Ah,m),setTimeout(()=>{const C=new CustomEvent(Ih,Ny);d.addEventListener(Ih,g),d.dispatchEvent(C),C.defaultPrevented||bn(w??document.body,{select:!0}),d.removeEventListener(Ih,g),ky.remove(S)},0)}}},[d,m,g,S]);const N=x.useCallback(w=>{if(!r&&!i||S.paused)return;const j=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(j&&C){const _=w.currentTarget,[P,A]=HT(_);P&&A?!w.shiftKey&&C===A?(w.preventDefault(),r&&bn(P,{select:!0})):w.shiftKey&&C===P&&(w.preventDefault(),r&&bn(A,{select:!0})):C===_&&w.preventDefault()}},[r,i,S.paused]);return s.jsx(Ge.div,{tabIndex:-1,...u,ref:b,onKeyDown:N})});cp.displayName=WT;function qT(e,{select:t=!1}={}){const r=document.activeElement;for(const i of e)if(bn(i,{select:t}),document.activeElement!==r)return}function HT(e){const t=Rb(e),r=Sy(t,e),i=Sy(t.reverse(),e);return[r,i]}function Rb(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Sy(e,t){for(const r of e)if(!KT(r,{upTo:t}))return r}function KT(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function GT(e){return e instanceof HTMLInputElement&&"select"in e}function bn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&GT(e)&&t&&e.select()}}var ky=QT();function QT(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=_y(e,t),e.unshift(t)},remove(t){e=_y(e,t),e[0]?.resume()}}}function _y(e,t){const r=[...e],i=r.indexOf(t);return i!==-1&&r.splice(i,1),r}function YT(e){return e.filter(t=>t.tagName!=="A")}var Oh=0;function Ab(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Cy()),document.body.insertAdjacentElement("beforeend",e[1]??Cy()),Oh++,()=>{Oh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Oh--}},[])}function Cy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Tc="right-scroll-bar-position",Rc="width-before-scroll-bar",JT="with-scroll-bars-hidden",XT="--removed-body-scroll-bar-size";function Lh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ZT(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(i){var o=r.value;o!==i&&(r.value=i,r.callback(i,o))}}}})[0];return r.callback=t,r.facade}var eR=typeof window<"u"?x.useLayoutEffect:x.useEffect,Ey=new WeakMap;function tR(e,t){var r=ZT(null,function(i){return e.forEach(function(o){return Lh(o,i)})});return eR(function(){var i=Ey.get(r);if(i){var o=new Set(i),l=new Set(e),u=r.current;o.forEach(function(d){l.has(d)||Lh(d,null)}),l.forEach(function(d){o.has(d)||Lh(d,u)})}Ey.set(r,e)},[e]),r}function rR(e){return e}function sR(e,t){t===void 0&&(t=rR);var r=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(l){var u=t(l,i);return r.push(u),function(){r=r.filter(function(d){return d!==u})}},assignSyncMedium:function(l){for(i=!0;r.length;){var u=r;r=[],u.forEach(l)}r={push:function(d){return l(d)},filter:function(){return r}}},assignMedium:function(l){i=!0;var u=[];if(r.length){var d=r;r=[],d.forEach(l),u=r}var f=function(){var g=u;u=[],g.forEach(l)},m=function(){return Promise.resolve().then(f)};m(),r={push:function(g){u.push(g),m()},filter:function(g){return u=u.filter(g),r}}}};return o}function nR(e){e===void 0&&(e={});var t=sR(null);return t.options=js({async:!0,ssr:!1},e),t}var Ib=function(e){var t=e.sideCar,r=_i(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,js({},r))};Ib.isSideCarExport=!0;function aR(e,t){return e.useMedium(t),Ib}var Ob=nR(),Dh=function(){},xu=x.forwardRef(function(e,t){var r=x.useRef(null),i=x.useState({onScrollCapture:Dh,onWheelCapture:Dh,onTouchMoveCapture:Dh}),o=i[0],l=i[1],u=e.forwardProps,d=e.children,f=e.className,m=e.removeScrollBar,g=e.enabled,v=e.shards,b=e.sideCar,S=e.noIsolation,N=e.inert,w=e.allowPinchZoom,j=e.as,C=j===void 0?"div":j,_=e.gapMode,P=_i(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=b,$=tR([r,t]),E=js(js({},P),o);return x.createElement(x.Fragment,null,g&&x.createElement(A,{sideCar:Ob,removeScrollBar:m,shards:v,noIsolation:S,inert:N,setCallbacks:l,allowPinchZoom:!!w,lockRef:r,gapMode:_}),u?x.cloneElement(x.Children.only(d),js(js({},E),{ref:$})):x.createElement(C,js({},E,{className:f,ref:$}),d))});xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xu.classNames={fullWidth:Rc,zeroRight:Tc};var iR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=iR();return t&&e.setAttribute("nonce",t),e}function lR(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function cR(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var uR=function(){var e=0,t=null;return{add:function(r){e==0&&(t=oR())&&(lR(t,r),cR(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dR=function(){var e=uR();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Lb=function(){var e=dR(),t=function(r){var i=r.styles,o=r.dynamic;return e(i,o),null};return t},hR={left:0,top:0,right:0,gap:0},Mh=function(e){return parseInt(e||"",10)||0},fR=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Mh(r),Mh(i),Mh(o)]},pR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return hR;var t=fR(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},mR=Lb(),di="data-scroll-locked",gR=function(e,t,r,i){var o=e.left,l=e.top,u=e.right,d=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(JT,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(d,"px ").concat(i,`;
  }
  body[`).concat(di,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(d,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tc,` {
    right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Rc,` {
    margin-right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Rc," .").concat(Rc,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(di,`] {
    `).concat(XT,": ").concat(d,`px;
  }
`)},Py=function(){var e=parseInt(document.body.getAttribute(di)||"0",10);return isFinite(e)?e:0},xR=function(){x.useEffect(function(){return document.body.setAttribute(di,(Py()+1).toString()),function(){var e=Py()-1;e<=0?document.body.removeAttribute(di):document.body.setAttribute(di,e.toString())}},[])},yR=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,o=i===void 0?"margin":i;xR();var l=x.useMemo(function(){return pR(o)},[o]);return x.createElement(mR,{styles:gR(l,!t,o,r?"":"!important")})},wf=!1;if(typeof window<"u")try{var Nc=Object.defineProperty({},"passive",{get:function(){return wf=!0,!0}});window.addEventListener("test",Nc,Nc),window.removeEventListener("test",Nc,Nc)}catch{wf=!1}var Ga=wf?{passive:!1}:!1,vR=function(e){return e.tagName==="TEXTAREA"},Db=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!vR(e)&&r[t]==="visible")},wR=function(e){return Db(e,"overflowY")},bR=function(e){return Db(e,"overflowX")},Ty=function(e,t){var r=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var o=Mb(e,i);if(o){var l=$b(e,i),u=l[1],d=l[2];if(u>d)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},jR=function(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return[t,r,i]},NR=function(e){var t=e.scrollLeft,r=e.scrollWidth,i=e.clientWidth;return[t,r,i]},Mb=function(e,t){return e==="v"?wR(t):bR(t)},$b=function(e,t){return e==="v"?jR(t):NR(t)},SR=function(e,t){return e==="h"&&t==="rtl"?-1:1},kR=function(e,t,r,i,o){var l=SR(e,window.getComputedStyle(t).direction),u=l*i,d=r.target,f=t.contains(d),m=!1,g=u>0,v=0,b=0;do{var S=$b(e,d),N=S[0],w=S[1],j=S[2],C=w-j-l*N;(N||C)&&Mb(e,d)&&(v+=C,b+=N),d instanceof ShadowRoot?d=d.host:d=d.parentNode}while(!f&&d!==document.body||f&&(t.contains(d)||t===d));return(g&&Math.abs(v)<1||!g&&Math.abs(b)<1)&&(m=!0),m},Sc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ry=function(e){return[e.deltaX,e.deltaY]},Ay=function(e){return e&&"current"in e?e.current:e},_R=function(e,t){return e[0]===t[0]&&e[1]===t[1]},CR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ER=0,Qa=[];function PR(e){var t=x.useRef([]),r=x.useRef([0,0]),i=x.useRef(),o=x.useState(ER++)[0],l=x.useState(Lb)[0],u=x.useRef(e);x.useEffect(function(){u.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var w=xk([e.lockRef.current],(e.shards||[]).map(Ay),!0).filter(Boolean);return w.forEach(function(j){return j.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),w.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var d=x.useCallback(function(w,j){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!u.current.allowPinchZoom;var C=Sc(w),_=r.current,P="deltaX"in w?w.deltaX:_[0]-C[0],A="deltaY"in w?w.deltaY:_[1]-C[1],$,E=w.target,L=Math.abs(P)>Math.abs(A)?"h":"v";if("touches"in w&&L==="h"&&E.type==="range")return!1;var Q=Ty(L,E);if(!Q)return!0;if(Q?$=L:($=L==="v"?"h":"v",Q=Ty(L,E)),!Q)return!1;if(!i.current&&"changedTouches"in w&&(P||A)&&(i.current=$),!$)return!0;var X=i.current||$;return kR(X,j,w,X==="h"?P:A)},[]),f=x.useCallback(function(w){var j=w;if(!(!Qa.length||Qa[Qa.length-1]!==l)){var C="deltaY"in j?Ry(j):Sc(j),_=t.current.filter(function($){return $.name===j.type&&($.target===j.target||j.target===$.shadowParent)&&_R($.delta,C)})[0];if(_&&_.should){j.cancelable&&j.preventDefault();return}if(!_){var P=(u.current.shards||[]).map(Ay).filter(Boolean).filter(function($){return $.contains(j.target)}),A=P.length>0?d(j,P[0]):!u.current.noIsolation;A&&j.cancelable&&j.preventDefault()}}},[]),m=x.useCallback(function(w,j,C,_){var P={name:w,delta:j,target:C,should:_,shadowParent:TR(C)};t.current.push(P),setTimeout(function(){t.current=t.current.filter(function(A){return A!==P})},1)},[]),g=x.useCallback(function(w){r.current=Sc(w),i.current=void 0},[]),v=x.useCallback(function(w){m(w.type,Ry(w),w.target,d(w,e.lockRef.current))},[]),b=x.useCallback(function(w){m(w.type,Sc(w),w.target,d(w,e.lockRef.current))},[]);x.useEffect(function(){return Qa.push(l),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",f,Ga),document.addEventListener("touchmove",f,Ga),document.addEventListener("touchstart",g,Ga),function(){Qa=Qa.filter(function(w){return w!==l}),document.removeEventListener("wheel",f,Ga),document.removeEventListener("touchmove",f,Ga),document.removeEventListener("touchstart",g,Ga)}},[]);var S=e.removeScrollBar,N=e.inert;return x.createElement(x.Fragment,null,N?x.createElement(l,{styles:CR(o)}):null,S?x.createElement(yR,{gapMode:e.gapMode}):null)}function TR(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const RR=aR(Ob,PR);var up=x.forwardRef(function(e,t){return x.createElement(xu,js({},e,{ref:t,sideCar:RR}))});up.classNames=xu.classNames;var AR=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ya=new WeakMap,kc=new WeakMap,_c={},$h=0,Fb=function(e){return e&&(e.host||Fb(e.parentNode))},IR=function(e,t){return t.map(function(r){if(e.contains(r))return r;var i=Fb(r);return i&&e.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},OR=function(e,t,r,i){var o=IR(t,Array.isArray(e)?e:[e]);_c[r]||(_c[r]=new WeakMap);var l=_c[r],u=[],d=new Set,f=new Set(o),m=function(v){!v||d.has(v)||(d.add(v),m(v.parentNode))};o.forEach(m);var g=function(v){!v||f.has(v)||Array.prototype.forEach.call(v.children,function(b){if(d.has(b))g(b);else try{var S=b.getAttribute(i),N=S!==null&&S!=="false",w=(Ya.get(b)||0)+1,j=(l.get(b)||0)+1;Ya.set(b,w),l.set(b,j),u.push(b),w===1&&N&&kc.set(b,!0),j===1&&b.setAttribute(r,"true"),N||b.setAttribute(i,"true")}catch(C){console.error("aria-hidden: cannot operate on ",b,C)}})};return g(t),d.clear(),$h++,function(){u.forEach(function(v){var b=Ya.get(v)-1,S=l.get(v)-1;Ya.set(v,b),l.set(v,S),b||(kc.has(v)||v.removeAttribute(i),kc.delete(v)),S||v.removeAttribute(r)}),$h--,$h||(Ya=new WeakMap,Ya=new WeakMap,kc=new WeakMap,_c={})}},Ub=function(e,t,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),o=AR(e);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live]"))),OR(i,o,r,"aria-hidden")):function(){return null}},dp="Dialog",[zb,Bb]=us(dp),[LR,ds]=zb(dp),Vb=e=>{const{__scopeDialog:t,children:r,open:i,defaultOpen:o,onOpenChange:l,modal:u=!0}=e,d=x.useRef(null),f=x.useRef(null),[m=!1,g]=Cn({prop:i,defaultProp:o,onChange:l});return s.jsx(LR,{scope:t,triggerRef:d,contentRef:f,contentId:Ws(),titleId:Ws(),descriptionId:Ws(),open:m,onOpenChange:g,onOpenToggle:x.useCallback(()=>g(v=>!v),[g]),modal:u,children:r})};Vb.displayName=dp;var Wb="DialogTrigger",qb=x.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,o=ds(Wb,r),l=lt(t,o.triggerRef);return s.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":pp(o.open),...i,ref:l,onClick:$e(e.onClick,o.onOpenToggle)})});qb.displayName=Wb;var hp="DialogPortal",[DR,Hb]=zb(hp,{forceMount:void 0}),Kb=e=>{const{__scopeDialog:t,forceMount:r,children:i,container:o}=e,l=ds(hp,t);return s.jsx(DR,{scope:t,forceMount:r,children:x.Children.map(i,u=>s.jsx(ga,{present:r||l.open,children:s.jsx(su,{asChild:!0,container:o,children:u})}))})};Kb.displayName=hp;var Wc="DialogOverlay",Gb=x.forwardRef((e,t)=>{const r=Hb(Wc,e.__scopeDialog),{forceMount:i=r.forceMount,...o}=e,l=ds(Wc,e.__scopeDialog);return l.modal?s.jsx(ga,{present:i||l.open,children:s.jsx($R,{...o,ref:t})}):null});Gb.displayName=Wc;var MR=pi("DialogOverlay.RemoveScroll"),$R=x.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,o=ds(Wc,r);return s.jsx(up,{as:MR,allowPinchZoom:!0,shards:[o.contentRef],children:s.jsx(Ge.div,{"data-state":pp(o.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),fa="DialogContent",Qb=x.forwardRef((e,t)=>{const r=Hb(fa,e.__scopeDialog),{forceMount:i=r.forceMount,...o}=e,l=ds(fa,e.__scopeDialog);return s.jsx(ga,{present:i||l.open,children:l.modal?s.jsx(FR,{...o,ref:t}):s.jsx(UR,{...o,ref:t})})});Qb.displayName=fa;var FR=x.forwardRef((e,t)=>{const r=ds(fa,e.__scopeDialog),i=x.useRef(null),o=lt(t,r.contentRef,i);return x.useEffect(()=>{const l=i.current;if(l)return Ub(l)},[]),s.jsx(Yb,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(e.onCloseAutoFocus,l=>{l.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:$e(e.onPointerDownOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&l.preventDefault()}),onFocusOutside:$e(e.onFocusOutside,l=>l.preventDefault())})}),UR=x.forwardRef((e,t)=>{const r=ds(fa,e.__scopeDialog),i=x.useRef(!1),o=x.useRef(!1);return s.jsx(Yb,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(i.current||r.triggerRef.current?.focus(),l.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=l.target;r.triggerRef.current?.contains(u)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),Yb=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,...u}=e,d=ds(fa,r),f=x.useRef(null),m=lt(t,f);return Ab(),s.jsxs(s.Fragment,{children:[s.jsx(cp,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:l,children:s.jsx(Go,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":pp(d.open),...u,ref:m,onDismiss:()=>d.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(BR,{titleId:d.titleId}),s.jsx(WR,{contentRef:f,descriptionId:d.descriptionId})]})]})}),fp="DialogTitle",Jb=x.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,o=ds(fp,r);return s.jsx(Ge.h2,{id:o.titleId,...i,ref:t})});Jb.displayName=fp;var Xb="DialogDescription",Zb=x.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,o=ds(Xb,r);return s.jsx(Ge.p,{id:o.descriptionId,...i,ref:t})});Zb.displayName=Xb;var e0="DialogClose",t0=x.forwardRef((e,t)=>{const{__scopeDialog:r,...i}=e,o=ds(e0,r);return s.jsx(Ge.button,{type:"button",...i,ref:t,onClick:$e(e.onClick,()=>o.onOpenChange(!1))})});t0.displayName=e0;function pp(e){return e?"open":"closed"}var r0="DialogTitleWarning",[zR,s0]=rC(r0,{contentName:fa,titleName:fp,docsSlug:"dialog"}),BR=({titleId:e})=>{const t=s0(r0),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},VR="DialogDescriptionWarning",WR=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s0(VR).contentName}}.`;return x.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},mp=Vb,n0=qb,gp=Kb,Xo=Gb,Zo=Qb,el=Jb,tl=Zb,yu=t0;const qR=mp,HR=n0,KR=gp,a0=x.forwardRef(({className:e,...t},r)=>s.jsx(Xo,{className:Le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));a0.displayName=Xo.displayName;const GR=Yo("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),i0=x.forwardRef(({side:e="right",className:t,children:r,...i},o)=>s.jsxs(KR,{children:[s.jsx(a0,{}),s.jsxs(Zo,{ref:o,className:Le(GR({side:e}),t),...i,children:[r,s.jsxs(yu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(In,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));i0.displayName=Zo.displayName;const QR=x.forwardRef(({className:e,...t},r)=>s.jsx(el,{ref:r,className:Le("text-lg font-semibold text-foreground",e),...t}));QR.displayName=el.displayName;const YR=x.forwardRef(({className:e,...t},r)=>s.jsx(tl,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));YR.displayName=tl.displayName;function JR(){const{user:e,isLoading:t,isAuthenticated:r,logout:i,isLoggingOut:o}=yr(),[l,u]=x.useState(!1);return s.jsxs("div",{className:"min-h-screen",children:[s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif text-2xl font-bold text-primary","data-testid":"link-home",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-6 w-6"}),s.jsx(et,{className:"h-6 w-6"})]}),"Pawtrait Pals"]}),s.jsxs("nav",{className:"hidden sm:flex items-center gap-2",children:[s.jsx(B,{variant:"ghost","data-testid":"link-gallery",asChild:!0,children:s.jsx(ye,{href:"/gallery",children:"Gallery"})}),t?s.jsx("div",{className:"w-24 h-9 bg-muted animate-pulse rounded-md"}):r?s.jsxs(s.Fragment,{children:[s.jsx(B,{variant:"ghost",className:"gap-2","data-testid":"link-dashboard",asChild:!0,children:s.jsxs(ye,{href:"/dashboard",children:[s.jsx(No,{className:"h-4 w-4"}),"Dashboard"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ns,{className:"h-8 w-8",children:[s.jsx(Hr,{src:e?.profileImageUrl||void 0,alt:e?.firstName||"User"}),s.jsx(Ss,{children:e?.firstName?.[0]||e?.email?.[0]||"U"})]}),s.jsx(B,{variant:"ghost",size:"icon","data-testid":"button-logout",onClick:()=>i(),disabled:o,children:s.jsx(zo,{className:"h-4 w-4"})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("a",{href:"/login",children:s.jsx(B,{variant:"ghost","data-testid":"button-login",children:"Log In"})}),s.jsx("a",{href:"/login",children:s.jsx(B,{"data-testid":"button-get-started",children:"Get Started"})})]})]}),s.jsxs(qR,{open:l,onOpenChange:u,children:[s.jsx(HR,{asChild:!0,children:s.jsx(B,{variant:"ghost",size:"icon",className:"sm:hidden","aria-label":"Open menu",children:s.jsx(rE,{className:"h-5 w-5"})})}),s.jsx(i0,{side:"right",className:"w-64 pt-12",children:s.jsxs("nav",{className:"flex flex-col gap-2",children:[s.jsx(B,{variant:"ghost",className:"justify-start",asChild:!0,children:s.jsx(ye,{href:"/gallery",onClick:()=>u(!1),children:"Gallery"})}),s.jsx(B,{variant:"ghost",className:"justify-start",asChild:!0,children:s.jsx(ye,{href:"/styles",onClick:()=>u(!1),children:"Styles"})}),r?s.jsxs(s.Fragment,{children:[s.jsx(B,{variant:"ghost",className:"justify-start gap-2",asChild:!0,children:s.jsxs(ye,{href:"/dashboard",onClick:()=>u(!1),children:[s.jsx(No,{className:"h-4 w-4"}),"Dashboard"]})}),s.jsxs(B,{variant:"ghost",className:"justify-start gap-2",onClick:()=>{i(),u(!1)},disabled:o,children:[s.jsx(zo,{className:"h-4 w-4"}),"Log Out"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("a",{href:"/login",onClick:()=>u(!1),children:s.jsx(B,{variant:"ghost",className:"w-full justify-start",children:"Log In"})}),s.jsx("a",{href:"/login",onClick:()=>u(!1),children:s.jsx(B,{className:"w-full",children:"Get Started"})})]})]})})]})]})}),s.jsxs("section",{className:"relative pt-32 pb-20 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-accent/10"}),s.jsxs("div",{className:"container mx-auto px-4 relative",children:[s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-2 rounded-full mb-6",children:[s.jsx(_t,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"AI-Powered Pet Portraits"})]}),s.jsxs("h1",{className:"text-4xl md:text-6xl font-serif font-bold mb-6 leading-tight",children:["Transform Rescue Pets into"," ",s.jsx("span",{className:"text-primary",children:"Adoptable Art"})]}),s.jsx("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Help adoptable dogs and cats find their furever homes with beautiful AI-generated portraits. Choose from 40+ artistic styles including Renaissance and more."}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:r?s.jsxs(s.Fragment,{children:[s.jsx(B,{size:"lg",className:"gap-2","data-testid":"button-go-to-dashboard",asChild:!0,children:s.jsxs(ye,{href:"/dashboard",children:[s.jsx(No,{className:"h-5 w-5"}),"Go to Dashboard"]})}),s.jsx(B,{size:"lg",variant:"outline",className:"gap-2","data-testid":"button-view-gallery",asChild:!0,children:s.jsx(ye,{href:"/gallery",children:"View Gallery"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("a",{href:"/login",children:s.jsxs(B,{size:"lg",className:"gap-2","data-testid":"button-create-portrait",children:[s.jsx(os,{className:"h-5 w-5"}),"Create a Portrait"]})}),s.jsx(B,{size:"lg",variant:"outline",className:"gap-2","data-testid":"button-view-gallery",asChild:!0,children:s.jsx(ye,{href:"/gallery",children:"View Gallery"})})]})}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(sr,{className:"h-4 w-4 text-primary"}),"Free 30-day trial"]}),s.jsx("span",{children:"No credit card required"})]})]}),s.jsx("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-5 gap-4 max-w-5xl mx-auto",children:[{style:"Renaissance Noble",image:"/images/styles/renaissance-noble.jpg"},{style:"Egyptian Royalty",image:"/images/styles/egyptian-royalty.jpg"},{style:"Tutu Princess",image:"/images/styles/tutu-princess.jpg"},{style:"Tea Party Guest",image:"/images/styles/tea-party-guest.jpg"},{style:"Cozy Cabin",image:"/images/styles/cozy-cabin.jpg"}].map((d,f)=>s.jsx(ye,{href:"/styles",children:s.jsxs("div",{className:"group relative aspect-square rounded-lg overflow-hidden border border-border/50 hover-elevate","data-testid":`style-preview-${f}`,children:[s.jsx("img",{src:d.image,alt:d.style,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 text-center",children:s.jsx("span",{className:"text-xs font-medium text-white drop-shadow-lg",children:d.style})})]})},f))}),s.jsxs("div",{className:"text-center mt-6",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"Elegant portraits that showcase each pet's unique personality and charm"}),s.jsx(B,{variant:"outline",size:"sm",className:"gap-2","data-testid":"button-view-all-styles",asChild:!0,children:s.jsxs(ye,{href:"/styles",children:[s.jsx(os,{className:"h-4 w-4"}),"View All Styles"]})})]})]})]}),s.jsx("section",{className:"py-20 bg-card/50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-serif font-bold mb-4",children:"How It Works"}),s.jsx("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"Create beautiful portraits for your rescue organization in four simple steps"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto",children:[{icon:Ve,title:"Upload a Photo",description:"Upload a clear photo of your rescue dog or cat. We work with any breed or mix!"},{icon:os,title:"Choose a Style",description:"Select from 40+ stunning artistic styles from Classical to Fun."},{icon:_t,title:"Generate Portrait",description:"Our AI creates a unique, beautiful portrait perfect for adoption profiles."},{icon:eE,title:"Build Your Showcase",description:"Assemble a gallery of your adoptable pets to share and attract adopters."}].map((d,f)=>s.jsx(_e,{className:"text-center hover-elevate",children:s.jsxs(Ee,{className:"pt-8 pb-6",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:s.jsx(d.icon,{className:"h-7 w-7 text-primary"})}),s.jsxs("div",{className:"text-sm text-primary font-medium mb-2",children:["Step ",f+1]}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:d.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:d.description})]})},f))})]})}),s.jsx("section",{className:"py-20",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-serif font-bold mb-4",children:"Why Choose Pawtrait Pals?"}),s.jsx("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"Built specifically for rescue organizations to showcase their adoptable pets"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto",children:[{icon:sr,title:"Made for Rescues",description:"Designed to help dogs and cats find loving homes through beautiful visual appeal"},{icon:os,title:"40+ Art Styles",description:"From Renaissance nobles to Egyptian Royalty - find the perfect personality match"},{icon:En,title:"Organization Galleries",description:"Create stunning collages of all your available rescue pets in one place"},{icon:hE,title:"Easy Sharing",description:"Each pet gets a unique profile page ready to share on social media"}].map((d,f)=>s.jsx(_e,{className:"hover-elevate",children:s.jsxs(Ee,{className:"pt-6",children:[s.jsx(d.icon,{className:"h-8 w-8 text-primary mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:d.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:d.description})]})},f))})]})}),s.jsx("section",{className:"py-20 bg-primary text-primary-foreground",children:s.jsxs("div",{className:"container mx-auto px-4 text-center",children:[s.jsx("h2",{className:"text-3xl font-serif font-bold mb-4",children:"Ready to Help Pets Find Homes?"}),s.jsx("p",{className:"text-primary-foreground/80 mb-8 max-w-xl mx-auto",children:"Join rescue organizations using beautiful AI portraits to showcase their adoptable dogs and cats."}),r?s.jsx(B,{size:"lg",variant:"secondary",className:"gap-2","data-testid":"button-start-creating",asChild:!0,children:s.jsxs(ye,{href:"/dashboard",children:[s.jsx(No,{className:"h-5 w-5"}),"Go to Dashboard"]})}):s.jsx("a",{href:"/login",children:s.jsxs(B,{size:"lg",variant:"secondary",className:"gap-2","data-testid":"button-start-creating",children:[s.jsx(_t,{className:"h-5 w-5"}),"Start Your Free Trial"]})})]})})]})}const vi=x.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));vi.displayName="Textarea";const o0=["image/jpeg","image/png","image/webp"],Iy=o0.join(","),XR=20*1024*1024,Ja=1024;function ZR({onImageUpload:e,currentImage:t,onClear:r}){const[i,o]=x.useState(!1),{toast:l}=Pr(),u=x.useCallback(v=>{if(!o0.includes(v.type)){l({title:"Unsupported format",description:"Please use JPG, PNG, or WebP.",variant:"destructive"});return}if(v.size>XR){l({title:"File too large",description:"Please use an image under 20 MB.",variant:"destructive"});return}const b=new FileReader;b.onload=S=>{const N=S.target?.result;if(!N)return;const w=new Image;w.onload=()=>{let{width:j,height:C}=w;if(j<=Ja&&C<=Ja){e(N);return}j>C?(C=Math.round(C*(Ja/j)),j=Ja):(j=Math.round(j*(Ja/C)),C=Ja);const _=document.createElement("canvas");_.width=j,_.height=C,_.getContext("2d").drawImage(w,0,0,j,C),e(_.toDataURL("image/jpeg",.85))},w.src=N},b.readAsDataURL(v)},[e,l]),d=x.useCallback(v=>{v.preventDefault(),o(!1);const b=v.dataTransfer.files[0];b&&u(b)},[u]),f=x.useCallback(v=>{v.preventDefault(),o(!0)},[]),m=x.useCallback(()=>{o(!1)},[]),g=x.useCallback(v=>{const b=v.target.files?.[0];b&&u(b)},[u]);return t?s.jsxs("div",{className:"relative",children:[s.jsx(_e,{className:"overflow-hidden",children:s.jsx(Ee,{className:"p-0",children:s.jsx("div",{className:"relative aspect-square max-w-md mx-auto",children:s.jsx("img",{src:t,alt:"Uploaded dog photo",className:"w-full h-full object-cover","data-testid":"img-uploaded-dog"})})})}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[s.jsxs("label",{children:[s.jsx("input",{type:"file",accept:Iy,className:"hidden",onChange:g,"data-testid":"input-file-replace"}),s.jsx(B,{asChild:!0,variant:"outline",size:"sm",className:"gap-1 cursor-pointer",children:s.jsxs("span",{children:[s.jsx(gi,{className:"h-3.5 w-3.5"}),"Replace Photo"]})})]}),s.jsxs(B,{variant:"ghost",size:"sm",className:"gap-1 text-destructive",onClick:r,"data-testid":"button-clear-image",children:[s.jsx(In,{className:"h-3.5 w-3.5"}),"Remove"]})]})]}):s.jsx(_e,{className:`border-2 border-dashed transition-colors ${i?"border-primary bg-primary/5":"border-border"}`,onDrop:d,onDragOver:f,onDragLeave:m,children:s.jsxs(Ee,{className:"flex flex-col items-center justify-center py-16",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:i?s.jsx(gi,{className:"h-8 w-8 text-primary animate-bounce"}):s.jsx(HC,{className:"h-8 w-8 text-primary"})}),s.jsx("h3",{className:"text-lg font-semibold mb-1","data-testid":"text-upload-heading",children:i?"Drop it right here!":"Drag & drop a photo here"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-5 text-center max-w-xs",children:"or click the button below to browse your files"}),s.jsxs("label",{children:[s.jsx("input",{type:"file",accept:Iy,className:"hidden",onChange:g,"data-testid":"input-file-upload"}),s.jsx(B,{asChild:!0,className:"gap-2 cursor-pointer",children:s.jsxs("span",{children:[s.jsx(ou,{className:"h-4 w-4"}),"Choose Photo"]})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-5",children:"JPG, PNG, or WebP up to 20 MB"})]})})}const eA=Yo("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function vt({className:e,variant:t,...r}){return s.jsx("div",{className:Le(eA({variant:t}),e),...r})}const pa=[{id:1,name:"Renaissance Noble",description:"A dignified portrait in the style of Italian Renaissance masters",category:"Classical",species:"dog",promptTemplate:"A majestic Renaissance oil painting portrait of a {breed} dog wearing ornate noble attire with a velvet collar and golden medallion, dramatic chiaroscuro lighting, rich earth tones, in the style of Leonardo da Vinci and Raphael, museum quality, highly detailed fur texture matching the actual dog's coat"},{id:25,name:"Baroque Aristocrat",description:"Opulent and dramatic in the Baroque tradition",category:"Classical",species:"dog",promptTemplate:"An opulent Baroque oil painting portrait of a {breed} dog as an aristocrat wearing an elaborate ruff collar and jeweled chain, dramatic lighting with deep shadows, rich burgundy and gold colors, in the style of Rembrandt and Caravaggio, ornate gilded frame style"},{id:2,name:"Victorian Gentleman",description:"Distinguished elegance of the Victorian era",category:"Classical",species:"dog",promptTemplate:"A distinguished Victorian portrait of a {breed} dog as a proper gentleman wearing a top hat and monocle with a fine tweed jacket and pocket watch chain, photographed in a Victorian study with leather books and brass fixtures, warm sepia tones, dignified and refined, professional pet photography"},{id:3,name:"Royal Monarch",description:"Regal portraiture fit for royalty",category:"Classical",species:"dog",promptTemplate:"A regal royal portrait of a {breed} dog as a king or queen wearing an ermine-trimmed cape and crown, holding a scepter, throne room background with rich tapestries, oil painting in the style of royal court painters, majestic and commanding presence"},{id:5,name:"Art Nouveau Beauty",description:"Elegant flowing lines and natural motifs",category:"Artistic",species:"dog",promptTemplate:"A real {breed} dog photographed wearing a delicate floral wreath collar, posed against a painted Art Nouveau backdrop with flowing organic patterns and gilded decorative border, soft natural lighting, real dog with artistic styled setting inspired by Alphonse Mucha, pastel colors with gold accents"},{id:26,name:"Impressionist Garden",description:"Soft, light-filled garden scene",category:"Artistic",species:"dog",promptTemplate:"A beautiful Impressionist painting of a {breed} dog in a sunlit garden with blooming flowers, visible brushstrokes, dappled light through trees, soft and dreamy atmosphere, in the style of Monet and Renoir, vibrant yet gentle colors"},{id:24,name:"Vintage Classic",description:"Timeless old-fashioned charm",category:"Artistic",species:"dog",promptTemplate:"A charming vintage-style portrait of a {breed} dog in an antique setting, wearing a simple bow tie or pearl collar, sepia-toned photograph aesthetic, classic furniture and lace curtains, timeless elegance, nostalgic and refined"},{id:22,name:"Spring Flower Crown",description:"Whimsical garden beauty",category:"Seasonal",species:"dog",promptTemplate:"A whimsical portrait of a {breed} dog wearing a delicate flower crown, sitting in a meadow of wildflowers, soft bokeh background with butterflies, dreamy golden hour lighting, gentle and sweet, natural beauty"},{id:6,name:"Steampunk Explorer",description:"Victorian era meets mechanical innovation",category:"Sci-Fi",species:"dog",promptTemplate:"A real {breed} dog wearing actual steampunk costume accessories - brass goggles on head, leather aviator cap, gear-decorated collar, photographed in Victorian industrial setting with copper pipes and gears backdrop, warm sepia lighting, real dog in real costume, not cartoon or illustration"},{id:9,name:"Space Explorer",description:"Futuristic astronaut among the stars",category:"Sci-Fi",species:"dog",promptTemplate:"A full-body portrait of a {breed} dog as an astronaut, the dog's head completely fills the open helmet with no empty space between the head and helmet rim, the dog's body naturally fills out a detailed NASA-style space suit with mission patches and life-support hoses, standing heroically on the lunar surface with Earth rising in the background, cosmic starfield, the dog's face is large and clearly visible looking straight at camera through the open visor, photorealistic cinematic lighting, highly detailed, anatomically correct dog proportions inside the suit"},{id:12,name:"Pirate Captain",description:"Swashbuckling adventure on the high seas",category:"Adventure",species:"dog",promptTemplate:"A real {breed} dog wearing an actual pirate costume with tricorn hat and eyepatch accessory, photographed on a ship deck setting, ocean background, warm golden sunset lighting, real dog in real costume, not cartoon or illustration, professional pet photography"},{id:13,name:"Cowboy Sheriff",description:"Wild West lawkeeper with frontier charm",category:"Adventure",species:"dog",promptTemplate:"A real {breed} dog wearing an actual cowboy hat and sheriff badge bandana, photographed against desert sunset background with cacti, warm golden lighting, real dog in real costume, not cartoon or illustration, professional pet photography"},{id:15,name:"Country Cowboy",description:"Rugged Western ranch companion",category:"Adventure",species:"dog",promptTemplate:"A charming portrait of a {breed} dog wearing a classic brown cowboy hat and red bandana, sitting on a rustic wooden fence, golden prairie sunset background, warm country vibes, loyal ranch companion, natural and approachable"},{id:18,name:"Mountain Explorer",description:"Adventurous hiking companion",category:"Adventure",species:"dog",promptTemplate:"A real {breed} dog wearing a cute mini hiking backpack and adventure bandana, close-up portrait with blurred mountain background, focus on the dog not the scenery, ready for adventure, loyal hiking companion, warm natural lighting"},{id:10,name:"Halloween Pumpkin",description:"Whimsical spooky season costume",category:"Seasonal",species:"dog",promptTemplate:"A whimsical Halloween portrait of a {breed} dog wearing a cute pumpkin costume or witch hat, surrounded by jack-o-lanterns and autumn decorations, playful spooky atmosphere, orange and purple lighting, fun quirky expression, memorable and shareable"},{id:23,name:"Holiday Spirit",description:"Festive seasonal celebration",category:"Seasonal",species:"dog",promptTemplate:"A real {breed} dog wearing a fluffy red and white Santa hat, close-up portrait with cozy holiday background of twinkling lights and wrapped presents, warm fireplace glow, joyful expression, heartwarming holiday spirit"},{id:20,name:"Autumn Leaves",description:"Fall season beauty",category:"Seasonal",species:"dog",promptTemplate:"A beautiful portrait of a {breed} dog sitting among colorful autumn leaves in a park, warm golden and orange foliage, soft afternoon sunlight filtering through trees, cozy fall sweater weather vibes, natural seasonal beauty"},{id:4,name:"Adopt Me Bandana",description:"Heartwarming adoption appeal with colorful bandana",category:"Adoption",species:"dog",promptTemplate:"A heartwarming portrait of a {breed} dog wearing a bright colorful bandana that says ADOPT ME, sitting attentively with hopeful eyes, soft studio lighting, clean simple background, friendly and approachable expression, professional shelter photo style, captures the dog's sweet personality"},{id:7,name:"Tutu Princess",description:"Adorable ballerina with soft pink tutu",category:"Humanizing",species:"dog",promptTemplate:"An adorable portrait of a {breed} dog wearing a soft fluffy pink tutu and a delicate tiara, sitting gracefully like a little princess, soft pastel background with sparkles, gentle lighting, sweet innocent expression, humanizing and approachable, perfect for softening tough breed reputations"},{id:8,name:"Cozy Pajamas",description:"Snuggly sleepyhead in cute pajamas",category:"Humanizing",species:"dog",promptTemplate:"An adorable portrait of a {breed} dog wearing cozy striped pajamas, curled up on a fluffy pillow with a soft blanket, sleepy content expression, warm bedroom lighting, stuffed toy nearby, like a toddler ready for bedtime, heartwarming and cuddly"},{id:11,name:"Birthday Party",description:"Celebratory party pup with festive hat",category:"Celebration",species:"dog",promptTemplate:"A joyful birthday portrait of a {breed} dog wearing a colorful party hat, surrounded by balloons and streamers, birthday cake with candles nearby, confetti falling, bright cheerful colors, happy excited expression, celebrating being part of a forever family"},{id:14,name:"Superhero",description:"Caped crusader ready to save the day",category:"Modern",species:"dog",promptTemplate:"A real {breed} dog wearing an actual superhero costume - red satin cape and simple eye mask, photographed in heroic pose against city skyline backdrop, dramatic studio lighting, real dog in real costume, professional pet photography, not cartoon or illustration"},{id:16,name:"Garden Party",description:"Elegant outdoor celebration guest",category:"Fun",species:"dog",promptTemplate:"A delightful portrait of a {breed} dog wearing a simple floral collar or bow tie, sitting among blooming flowers in a beautiful English garden, soft afternoon light, charming and refined, tea party atmosphere"},{id:17,name:"Beach Day",description:"Sun-kissed seaside companion",category:"Fun",species:"dog",promptTemplate:"A sunny portrait of a {breed} dog relaxing on a beautiful sandy beach, wearing stylish sunglasses, golden sand and turquoise ocean waves, tropical sunset colors, happy carefree summer vibes, natural beach setting"},{id:19,name:"Cozy Cabin",description:"Warm fireside friend",category:"Fun",species:"dog",promptTemplate:"A cozy portrait of a {breed} dog curled up by a warm fireplace in a rustic cabin, wearing a plaid flannel bow tie, soft blankets and warm lighting, comfortable winter evening atmosphere, loving and content"},{id:21,name:"Picnic Buddy",description:"Perfect park day companion",category:"Fun",species:"dog",promptTemplate:"A real {breed} dog sitting on a cozy picnic blanket in a sunny park, wearing a cute bandana, picnic basket nearby, warm afternoon sunlight, happy relaxed expression, ready for family fun, approachable and friendly"},{id:28,name:"Yoga Instructor",description:"Flexible fitness guru striking a pose",category:"Fun",species:"dog",promptTemplate:"A balanced portrait of a {breed} dog as a yoga instructor doing downward dog pose on a purple yoga mat, peaceful studio with plants and natural light, wearing athletic gear, zen atmosphere, namaste energy"},{id:27,name:"Taco Tuesday Chef",description:"Festive fiesta friend with tasty treats",category:"Fun",species:"dog",promptTemplate:"A real {breed} dog wearing a small sombrero hat and colorful serape bandana, photographed in a festive Mexican cantina setting with papel picado decorations, surrounded by tacos and fresh ingredients on the table, warm fiesta lighting, real dog in real costume, professional pet photography, not cartoon or illustration"},{id:101,name:"Egyptian Royalty",description:"Ancient Egyptian deity with golden adornments",category:"Classical",species:"cat",promptTemplate:"A majestic ancient Egyptian portrait of a {breed} cat as a divine feline deity, wearing golden collar with lapis lazuli and turquoise jewels, Egyptian temple background with hieroglyphics, warm golden lighting, regal and mysterious, in the style of ancient Egyptian art but photorealistic, museum quality"},{id:102,name:"Renaissance Feline",description:"Elegant portrait in the Italian Renaissance tradition",category:"Classical",species:"cat",promptTemplate:"A refined Renaissance oil painting portrait of a {breed} cat lounging on a velvet cushion wearing an ornate jeweled collar, dramatic chiaroscuro lighting, rich warm tones, in the style of Leonardo da Vinci, elegant and aristocratic, museum quality, detailed fur texture"},{id:103,name:"Victorian Lady",description:"Prim and proper Victorian elegance",category:"Classical",species:"cat",promptTemplate:"A distinguished Victorian portrait of a {breed} cat wearing a delicate lace collar and cameo brooch, perched gracefully on an ornate chair in a parlor with velvet curtains and antique furniture, warm sepia tones, dignified and refined, professional pet photography"},{id:104,name:"Sunbeam Napper",description:"Cozy cat basking in a warm sunbeam",category:"Cozy",species:"cat",promptTemplate:"A heartwarming portrait of a {breed} cat curled up and napping in a warm golden sunbeam on a cozy window seat, soft knit blanket underneath, dust motes floating in the light, peaceful sleeping expression, warm amber and honey tones, gentle bokeh background of a cozy living room, photorealistic, tender and serene atmosphere"},{id:105,name:"Space Cadet",description:"Cosmic kitty exploring the final frontier",category:"Sci-Fi",species:"cat",promptTemplate:"A full-body portrait of a {breed} cat as an astronaut, the cat's head completely fills the open helmet with no empty space between the head and helmet rim, the cat's furry body naturally fills out a detailed NASA-style space suit with mission patches and life-support hoses, standing heroically on the lunar surface with Earth rising in the background, cosmic starfield and nebula, the cat's face is large and clearly visible looking straight at camera through the open visor, photorealistic cinematic lighting, highly detailed, anatomically correct cat proportions inside the suit"},{id:106,name:"Purrista Barista",description:"Your favorite feline coffee artist",category:"Fun",species:"cat",promptTemplate:"An adorable portrait of a {breed} cat as a tiny barista behind a miniature coffee shop counter, wearing a small apron and barista cap, surrounded by espresso machines and latte cups with cat-face latte art, warm cafe lighting with chalkboard menu in background, charming and whimsical, cozy coffeehouse atmosphere, irresistibly cute"},{id:107,name:"Midnight Prowler",description:"Mysterious feline under moonlight",category:"Adventure",species:"cat",promptTemplate:"A dramatic portrait of a {breed} cat perched on a moonlit rooftop or garden wall, silvery moonlight casting elegant shadows, starry night sky background, mysterious and enchanting atmosphere, the cat's eyes glowing softly, beautiful nighttime photography"},{id:108,name:"Bookshelf Scholar",description:"Intellectual companion among the books",category:"Humanizing",species:"cat",promptTemplate:"An adorable portrait of a {breed} cat sitting among stacked books on a cozy bookshelf, wearing tiny reading glasses perched on nose, warm library lighting, leather-bound books and a warm cup of tea nearby, intellectual and charming, cozy literary atmosphere"},{id:109,name:"Garden Explorer",description:"Curious kitty among the flowers",category:"Fun",species:"cat",promptTemplate:"A delightful portrait of a {breed} cat exploring a beautiful garden among blooming flowers and butterflies, wearing a small floral collar, soft afternoon sunlight, curious playful expression, surrounded by colorful roses and lavender, natural and enchanting"},{id:110,name:"Adopt Me Bow Tie",description:"Charming adoption appeal with dapper bow tie",category:"Adoption",species:"cat",promptTemplate:"A heartwarming portrait of a {breed} cat wearing a cute bow tie with an ADOPT ME tag on the collar, sitting with wide hopeful eyes, soft studio lighting, clean simple background, friendly and approachable expression, professional shelter photo style, captures the cat's sweet personality"},{id:111,name:"Cozy Blanket",description:"Snuggly kitty wrapped in warmth",category:"Humanizing",species:"cat",promptTemplate:"An adorable portrait of a {breed} cat wrapped in a soft knitted blanket, peeking out with sleepy content eyes, warm bedroom lighting, fluffy pillows nearby, cozy and heartwarming, like a child tucked in for bedtime, irresistibly cuddly"},{id:112,name:"Halloween Black Cat",description:"Enchanting spooky season mystique",category:"Seasonal",species:"cat",promptTemplate:"A whimsical Halloween portrait of a {breed} cat wearing a tiny witch hat, surrounded by glowing jack-o-lanterns and autumn decorations, mysterious and playful atmosphere, orange and purple lighting, enchanting expression, magical and shareable"},{id:113,name:"Holiday Stocking",description:"Festive kitty in holiday cheer",category:"Seasonal",species:"cat",promptTemplate:"A real {breed} cat peeking out of a cozy holiday stocking or wearing a fluffy red and white Santa hat, twinkling lights and wrapped presents in background, warm fireplace glow, playful curious expression, heartwarming holiday spirit"},{id:114,name:"Spring Blossoms",description:"Gentle beauty among cherry blossoms",category:"Seasonal",species:"cat",promptTemplate:"A beautiful portrait of a {breed} cat sitting among delicate cherry blossom branches, wearing a small flower crown, soft pink petals falling gently, dreamy spring atmosphere, golden hour lighting, gentle and sweet, natural beauty"},{id:115,name:"Box Inspector",description:"Classic cat-in-a-box charm",category:"Fun",species:"cat",promptTemplate:"An adorable portrait of a {breed} cat sitting inside a cardboard box, peeking over the edge with curious wide eyes, playful and mischievous expression, warm home lighting, the box decorated with doodles, charming and relatable, captures the universal cat love of boxes"},{id:116,name:"Tea Party Guest",description:"Refined afternoon tea companion",category:"Fun",species:"cat",promptTemplate:"A charming portrait of a {breed} cat sitting at a tiny tea party setting with miniature cups and saucers, wearing a small pearl collar, delicate floral tablecloth, soft afternoon light through a window, elegant and whimsical, very British and refined"}];pa.filter(e=>e.species==="dog");pa.filter(e=>e.species==="cat");function l0(e){return pa.filter(t=>t.species===e)}const tA=Array.from(new Set(pa.map(e=>e.category)));function rA(e){return Array.from(new Set(l0(e).map(t=>t.category)))}const bf={"Renaissance Noble":"/images/styles/renaissance-noble.jpg","Baroque Aristocrat":"/images/styles/baroque-aristocrat.jpg","Victorian Gentleman":"/images/styles/victorian-gentleman.jpg","Royal Monarch":"/images/styles/royal-monarch.jpg","Adopt Me Bandana":"/images/styles/adopt-me-bandana.jpg","Art Nouveau Beauty":"/images/styles/art-nouveau.jpg","Impressionist Garden":"/images/styles/impressionist-garden.jpg","Steampunk Explorer":"/images/styles/steampunk-explorer.jpg","Tutu Princess":"/images/styles/tutu-princess.jpg","Cozy Pajamas":"/images/styles/cozy-pajamas.jpg","Space Explorer":"/images/styles/space-explorer.jpg","Halloween Pumpkin":"/images/styles/halloween-pumpkin.jpg","Birthday Party":"/images/styles/birthday-party.jpg","Pirate Captain":"/images/styles/pirate-captain.jpg","Cowboy Sheriff":"/images/styles/cowboy-sheriff.jpg",Superhero:"/images/styles/superhero.jpg","Country Cowboy":"/images/styles/country-cowboy.jpg","Garden Party":"/images/styles/garden-party.jpg","Beach Day":"/images/styles/beach-day.jpg","Mountain Explorer":"/images/styles/mountain-explorer.jpg","Cozy Cabin":"/images/styles/cozy-cabin.jpg","Autumn Leaves":"/images/styles/autumn-leaves.jpg","Picnic Buddy":"/images/styles/picnic-buddy.jpg","Spring Flower Crown":"/images/styles/flower-crown.jpg","Holiday Spirit":"/images/styles/holiday-spirit.jpg","Vintage Classic":"/images/styles/vintage-classic.jpg","Egyptian Royalty":"/images/styles/egyptian-royalty.jpg","Renaissance Feline":"/images/styles/renaissance-feline.jpg","Victorian Lady":"/images/styles/victorian-lady.jpg","Sunbeam Napper":"/images/styles/sunbeam-napper.jpg","Space Cadet":"/images/styles/space-cadet.jpg","Purrista Barista":"/images/styles/purrista-barista.jpg","Midnight Prowler":"/images/styles/midnight-prowler.jpg","Bookshelf Scholar":"/images/styles/bookshelf-scholar.jpg","Garden Explorer":"/images/styles/garden-explorer.jpg","Adopt Me Bow Tie":"/images/styles/adopt-me-bow-tie.jpg","Cozy Blanket":"/images/styles/cozy-blanket.jpg","Halloween Black Cat":"/images/styles/halloween-black-cat.jpg","Holiday Stocking":"/images/styles/holiday-stocking.jpg","Spring Blossoms":"/images/styles/spring-blossoms.jpg","Box Inspector":"/images/styles/box-inspector.jpg","Tea Party Guest":"/images/styles/tea-party-guest.jpg","Yoga Instructor":"/images/styles/yoga-instructor.jpg","Taco Tuesday Chef":"/images/styles/taco-tuesday-chef.jpg"},Oy={Classical:Bs,Artistic:_w,Modern:_t,Fantasy:Fc,"Sci-Fi":Pw,Adventure:Sw,Fun:_t,Adoption:Ve,Humanizing:_t,Seasonal:_t,Celebration:_t};function sA({selectedStyle:e,onSelectStyle:t,species:r="dog"}){const[i,o]=x.useState(null),l=l0(r),u=rA(r),d=i?l.filter(f=>f.category===i):l;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(B,{variant:i===null?"default":"outline",size:"sm",onClick:()=>o(null),"data-testid":"button-category-all",children:"All Styles"}),u.map(f=>{const m=Oy[f]||os;return s.jsxs(B,{variant:i===f?"default":"outline",size:"sm",onClick:()=>o(f),className:"gap-1","data-testid":`button-category-${f.toLowerCase().replace(/\s+/g,"-")}`,children:[s.jsx(m,{className:"h-3.5 w-3.5"}),f]},f)})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(f=>{const m=e?.id===f.id;return Oy[f.category],s.jsxs(_e,{className:`cursor-pointer transition-all hover-elevate overflow-visible ${m?"ring-2 ring-primary border-primary":""}`,onClick:()=>t(f),"data-testid":`card-style-${f.id}`,children:[bf[f.name]&&s.jsxs("div",{className:"relative aspect-square overflow-hidden rounded-t-md protected-image-wrapper",children:[s.jsx("img",{src:bf[f.name],alt:f.name,className:"w-full h-full object-cover protected-image",draggable:!1}),s.jsx(vt,{variant:"secondary",className:"absolute top-2 right-2 text-xs bg-background/80 backdrop-blur-sm",children:f.category}),m&&s.jsx("div",{className:"absolute top-2 left-2 w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:s.jsx(Rt,{className:"h-4 w-4 text-primary-foreground"})})]}),s.jsxs(Ee,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm",children:f.name}),s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:f.description})]})]},f.id)})}),d.length===0&&s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(os,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No styles found in this category"})]})]})}function nA({generatedImage:e,isGenerating:t,isEditing:r=!1,selectedStyle:i,dogName:o,adoptionUrl:l,onRegenerate:u,onDownload:d,onEdit:f,editsUsed:m=0,maxEdits:g=3}){const[v,b]=x.useState(""),S=g-m,N=S<=0,w=()=>{v.trim()&&f&&!N&&(f(v.trim()),b(""))};return t||r?s.jsx(_e,{className:"overflow-hidden",children:s.jsx(Ee,{className:"p-0",children:s.jsx("div",{className:"aspect-square relative bg-gradient-to-br from-primary/5 to-accent/5",children:s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/30 border-t-primary animate-spin"}),s.jsx(_t,{className:"h-8 w-8 text-primary absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),s.jsx("h3",{className:"mt-6 text-lg font-semibold",children:r?"Refining Portrait":"Creating Masterpiece"}),s.jsx("p",{className:"text-sm text-muted-foreground text-center mt-2",children:r?"Applying your changes...":i?`Transforming ${o||"your pup"} into ${i.name}...`:"Generating portrait..."}),s.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"This may take 20-40 seconds"})]})})})}):e?s.jsxs("div",{className:"space-y-4",children:[s.jsx(_e,{className:"overflow-hidden",children:s.jsx(Ee,{className:"p-0",children:s.jsxs("div",{className:"relative aspect-square protected-image-wrapper",children:[s.jsx("img",{src:e,alt:`${o} portrait in ${i?.name||"artistic"} style`,className:"w-full h-full object-cover protected-image",draggable:!1,"data-testid":"img-generated-portrait"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:[s.jsx("h3",{className:"text-white font-serif text-2xl font-bold",children:o||"Portrait"}),i&&s.jsx("p",{className:"text-white/80 text-sm",children:i.name})]})]})})}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(B,{onClick:d,className:"flex-1 gap-2","data-testid":"button-download-portrait",children:[s.jsx(mi,{className:"h-4 w-4"}),"Download"]}),s.jsxs(B,{variant:"outline",onClick:u,disabled:N,className:"gap-2","data-testid":"button-regenerate",children:[s.jsx(cE,{className:"h-4 w-4"}),"Regenerate"]}),l&&s.jsx(B,{variant:"outline",asChild:!0,className:"gap-2",children:s.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer","data-testid":"link-adoption-page",children:[s.jsx(kn,{className:"h-4 w-4"}),"Adopt Me"]})})]}),f&&s.jsx(_e,{className:"mt-4",children:s.jsxs(Ee,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Fc,{className:"h-4 w-4 text-primary"}),"Refine Your Portrait"]}),s.jsx("span",{className:`text-xs font-medium ${N?"text-destructive":"text-muted-foreground"}`,"data-testid":"text-edits-remaining",children:N?"No edits remaining":`${S} of ${g} edits remaining`})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:N?"You've used all edits for this portrait. Try a different style!":"Describe what you'd like to adjust. You get 4 free edits per portrait (including regenerations)."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(He,{placeholder:N?"No edits remaining":"e.g., make the background brighter, add more flowers...",value:v,onChange:j=>b(j.target.value),onKeyDown:j=>j.key==="Enter"&&!N&&w(),className:"flex-1",disabled:N,"data-testid":"input-edit-prompt"}),s.jsxs(B,{onClick:w,disabled:!v.trim()||N,className:"gap-2","data-testid":"button-apply-edit",children:[s.jsx(Fc,{className:"h-4 w-4"}),"Apply"]})]})]})})]}):s.jsx(_e,{className:"overflow-hidden",children:s.jsx(Ee,{className:"p-0",children:s.jsxs("div",{className:"aspect-square relative bg-gradient-to-br from-muted/50 to-muted flex flex-col items-center justify-center p-8",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(_t,{className:"h-8 w-8 text-primary/60"})}),s.jsx("h3",{className:"text-lg font-semibold text-muted-foreground",children:"Portrait Preview"}),s.jsx("p",{className:"text-sm text-muted-foreground text-center mt-2 max-w-xs",children:"Upload a photo and select a style to generate a stunning portrait"})]})})})}const aA=["Affenpinscher","Afghan Hound","Airedale Terrier","Akita","Alaskan Malamute","American Bulldog","American English Coonhound","American Eskimo Dog","American Foxhound","American Hairless Terrier","American Staffordshire Terrier","American Water Spaniel","Anatolian Shepherd Dog","Australian Cattle Dog","Australian Shepherd","Australian Terrier","Azawakh","Barbet","Basenji","Basset Fauve de Bretagne","Basset Hound","Beagle","Bearded Collie","Beauceron","Bedlington Terrier","Belgian Laekenois","Belgian Malinois","Belgian Sheepdog","Belgian Tervuren","Bergamasco Sheepdog","Berger Picard","Bernese Mountain Dog","Bichon Frise","Biewer Terrier","Black and Tan Coonhound","Black Russian Terrier","Bloodhound","Bluetick Coonhound","Boerboel","Border Collie","Border Terrier","Borzoi","Boston Terrier","Bouvier des Flandres","Boxer","Boykin Spaniel","Bracco Italiano","Briard","Brittany","Brussels Griffon","Bull Terrier","Bulldog","Bullmastiff","Cairn Terrier","Canaan Dog","Cane Corso","Cardigan Welsh Corgi","Cavalier King Charles Spaniel","Cesky Terrier","Chesapeake Bay Retriever","Chihuahua","Chinese Crested","Chinese Shar-Pei","Chinook","Chow Chow","Cirneco dell'Etna","Clumber Spaniel","Cocker Spaniel","Collie","Coton de Tulear","Croatian Sheepdog","Curly-Coated Retriever","Dachshund","Dalmatian","Dandie Dinmont Terrier","Danish-Swedish Farmdog","Doberman Pinscher","Dogo Argentino","Dogue de Bordeaux","English Cocker Spaniel","English Foxhound","English Setter","English Springer Spaniel","English Toy Spaniel","Entlebucher Mountain Dog","Field Spaniel","Finnish Lapphund","Finnish Spitz","Flat-Coated Retriever","French Bulldog","German Pinscher","German Shepherd Dog","German Shorthaired Pointer","German Wirehaired Pointer","Giant Schnauzer","Glen of Imaal Terrier","Golden Retriever","Gordon Setter","Grand Basset Griffon Vendeen","Great Dane","Great Pyrenees","Greater Swiss Mountain Dog","Greyhound","Harrier","Havanese","Ibizan Hound","Icelandic Sheepdog","Irish Red and White Setter","Irish Setter","Irish Terrier","Irish Water Spaniel","Irish Wolfhound","Italian Greyhound","Japanese Chin","Japanese Spitz","Keeshond","Kerry Blue Terrier","Komondor","Kuvasz","Labrador Retriever","Lagotto Romagnolo","Lakeland Terrier","Lancashire Heeler","Leonberger","Lhasa Apso","Lowchen","Maltese","Manchester Terrier","Mastiff","Miniature American Shepherd","Miniature Bull Terrier","Miniature Pinscher","Miniature Schnauzer","Mudi","Neapolitan Mastiff","Newfoundland","Norfolk Terrier","Norwegian Buhund","Norwegian Elkhound","Norwegian Lundehund","Norwich Terrier","Nova Scotia Duck Tolling Retriever","Old English Sheepdog","Otterhound","Papillon","Parson Russell Terrier","Pekingese","Pembroke Welsh Corgi","Petit Basset Griffon Vendeen","Pharaoh Hound","Plott Hound","Pointer","Polish Lowland Sheepdog","Pomeranian","Poodle","Portuguese Podengo Pequeno","Portuguese Water Dog","Pug","Puli","Pumi","Pyrenean Shepherd","Rat Terrier","Redbone Coonhound","Rhodesian Ridgeback","Rottweiler","Russell Terrier","Russian Toy","Russian Tsvetnaya Bolonka","Saint Bernard","Saluki","Samoyed","Schipperke","Scottish Deerhound","Scottish Terrier","Sealyham Terrier","Shetland Sheepdog","Shiba Inu","Shih Tzu","Siberian Husky","Silky Terrier","Skye Terrier","Sloughi","Small Munsterlander","Smooth Fox Terrier","Soft Coated Wheaten Terrier","Spanish Water Dog","Spinone Italiano","Staffordshire Bull Terrier","Standard Schnauzer","Sussex Spaniel","Swedish Vallhund","Teddy Roosevelt Terrier","Thai Ridgeback","Tibetan Mastiff","Tibetan Spaniel","Tibetan Terrier","Toy Fox Terrier","Treeing Walker Coonhound","Vizsla","Weimaraner","Welsh Springer Spaniel","Welsh Terrier","West Highland White Terrier","Whippet","Wire Fox Terrier","Wirehaired Pointing Griffon","Wirehaired Vizsla","Xoloitzcuintli","Yorkshire Terrier"],iA=["Abyssinian","American Bobtail","American Curl","American Shorthair","American Wirehair","Balinese","Bengal","Birman","Bombay","British Shorthair","Burmese","Burmilla","Chartreux","Colorpoint Shorthair","Cornish Rex","Devon Rex","Egyptian Mau","European Burmese","Exotic Shorthair","Havana Brown","Japanese Bobtail","Khao Manee","Korat","LaPerm","Lykoi","Maine Coon","Manx","Norwegian Forest Cat","Ocicat","Oriental","Persian","Ragamuffin","Ragdoll","Russian Blue","Scottish Fold","Selkirk Rex","Siamese","Siberian","Singapura","Somali","Sphynx","Tonkinese","Toybob","Turkish Angora","Turkish Van"];function oA(e){const t=e==="dog"?aA:iA,r=t.map(i=>`${i} Mix`);return["Mixed Breed",...t,...r]}function lA({species:e,value:t,onChange:r}){const[i,o]=x.useState(!1),[l,u]=x.useState(""),d=x.useRef(null),f=x.useRef(null),m=x.useRef(null),g=x.useMemo(()=>oA(e),[e]),v=x.useMemo(()=>{if(!l.trim())return g;const N=l.toLowerCase();return g.filter(w=>w.toLowerCase().includes(N))},[g,l]);x.useEffect(()=>{function N(w){d.current&&!d.current.contains(w.target)&&(o(!1),u(""))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),x.useEffect(()=>{i&&m.current&&m.current.focus()},[i]),x.useEffect(()=>{i&&f.current&&(f.current.scrollTop=0)},[i]);const b=N=>{r(N),o(!1),u("")},S=N=>{N.stopPropagation(),r(""),u("")};return s.jsxs("div",{ref:d,className:"relative",children:[s.jsxs("div",{className:"flex items-center gap-2 h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm cursor-pointer",onClick:()=>o(!i),"data-testid":"button-breed-selector",children:[s.jsx("span",{className:`flex-1 truncate ${t?"":"text-muted-foreground"}`,children:t||"Select breed *"}),t?s.jsx(In,{className:"h-3.5 w-3.5 text-muted-foreground flex-shrink-0",onClick:S,"data-testid":"button-clear-breed"}):s.jsx(Hf,{className:"h-3.5 w-3.5 text-muted-foreground flex-shrink-0"})]}),i&&s.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-popover shadow-lg","data-testid":"dropdown-breed-list",children:[s.jsx("div",{className:"p-2 border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(hf,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),s.jsx(He,{ref:m,placeholder:"Type to search breeds...",value:l,onChange:N=>u(N.target.value),className:"pl-8 h-8 text-sm","data-testid":"input-breed-search"})]})}),s.jsx("div",{ref:f,className:"max-h-48 overflow-y-auto",children:v.length===0?s.jsx("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center","data-testid":"text-no-breeds",children:"No breeds found"}):v.map(N=>s.jsx("div",{className:`px-3 py-1.5 text-sm cursor-pointer hover-elevate ${N===t?"bg-primary/10 font-medium":""}`,onClick:()=>b(N),"data-testid":`option-breed-${N.toLowerCase().replace(/\s+/g,"-")}`,children:N},N))})]})]})}const jf=["ass","asshole","bastard","bitch","blowjob","boob","boobs","butt","cock","crap","cum","cunt","damn","dick","dildo","douche","fag","fuck","fucker","fucking","handjob","hell","hoe","homo","horny","jerk","milf","mofo","motherfucker","naked","nazi","nigga","nigger","nude","orgasm","penis","piss","porn","porno","pussy","rape","rapist","retard","scrotum","sex","shit","shitty","slut","smut","sperm","stripper","tit","tits","titty","twat","vagina","viagra","vulva","whore","wanker","xxx"],cA={0:"o",1:"i",3:"e",4:"a",5:"s",7:"t","@":"a",$:"s","!":"i","*":"","+":"t"};function uA(e){return e.split("").map(t=>cA[t]||t).join("")}function dA(e){let t=e.toLowerCase();return t=uA(t),t=t.replace(/[^a-z]/g,""),t}const Ly=jf.map(e=>new RegExp(`\\b${e}\\b`,"i"));function hA(e){if(Ly.some(o=>o.test(e)))return!0;const t=e.toLowerCase().replace(/[^a-z\s]/g,"");if(Ly.some(o=>o.test(t)))return!0;const r=dA(e);if(jf.some(o=>r.includes(o)))return!0;const i=e.toLowerCase().replace(/[\s._\-*!@#$%^&()]/g,"");return!!jf.some(o=>i.includes(o))}function Dy(e){const t=e.trim();return t?t.length<1?{valid:!1,error:"Name is too short"}:t.length>50?{valid:!1,error:"Name must be 50 characters or less"}:hA(t)?{valid:!1,error:"Please choose a family-friendly name"}:{valid:!0}:{valid:!1,error:"Name is required"}}const Wo=mp,fA=gp,c0=x.forwardRef(({className:e,...t},r)=>s.jsx(Xo,{ref:r,className:Le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));c0.displayName=Xo.displayName;const wi=x.forwardRef(({className:e,children:t,...r},i)=>s.jsxs(fA,{children:[s.jsx(c0,{}),s.jsxs(Zo,{ref:i,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(yu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(In,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wi.displayName=Zo.displayName;const bi=({className:e,...t})=>s.jsx("div",{className:Le("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});bi.displayName="DialogHeader";const xp=({className:e,...t})=>s.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});xp.displayName="DialogFooter";const ji=x.forwardRef(({className:e,...t},r)=>s.jsx(el,{ref:r,className:Le("text-lg font-semibold leading-none tracking-tight",e),...t}));ji.displayName=el.displayName;const Ni=x.forwardRef(({className:e,...t},r)=>s.jsx(tl,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));Ni.displayName=tl.displayName;function u0({open:e,onOpenChange:t,petCount:r,petLimit:i,basePetLimit:o,additionalPetSlots:l,maxAdditionalSlots:u,isPaidPlan:d,hasStripeSubscription:f,orgId:m,isAdmin:g}){const{toast:v}=Pr(),b=Ho(),[S,N]=x.useState(Math.min(l+1,u)),w=d&&f&&l<u,j=u-l,C=Ft({mutationFn:async _=>{const P={quantity:_};return m&&(P.orgId=m),(await $t("POST","/api/addon-slots",P)).json()},onSuccess:_=>{b.invalidateQueries({queryKey:["/api/my-organization"]}),b.invalidateQueries({queryKey:["/api/addon-slots"]}),m&&(b.invalidateQueries({queryKey:["/api/admin/organizations",m]}),b.invalidateQueries({queryKey:["/api/admin/organizations"]}),b.invalidateQueries({queryKey:["/api/admin/stats"]})),v({title:"Pet slots added",description:_.message}),t(!1)},onError:_=>{v({title:"Error",description:_.message,variant:"destructive"})}});return s.jsx(Wo,{open:e,onOpenChange:t,children:s.jsxs(wi,{className:"max-w-md","data-testid":"dialog-pet-limit",children:[s.jsxs(bi,{children:[s.jsxs(ji,{className:"flex items-center gap-2","data-testid":"text-pet-limit-title",children:[s.jsx(sr,{className:"h-5 w-5 text-primary"}),"Pet Limit Reached"]}),s.jsxs(Ni,{"data-testid":"text-pet-limit-description",children:["You have ",r," of ",i," pet slots filled. Here are your options to add more."]})]}),s.jsx("div",{className:"space-y-4 mt-2",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-4 rounded-md border",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-1.5 rounded-md bg-primary/10 shrink-0 mt-0.5",children:s.jsx(sr,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm","data-testid":"text-free-up-spot-title",children:"Free up a spot"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Has a pet been adopted? Remove them from your roster to make room for a new one."}),s.jsx(B,{variant:"outline",size:"sm",className:"mt-2 gap-1",onClick:()=>t(!1),"data-testid":"button-swap-pet",asChild:!0,children:s.jsxs(ye,{href:g&&m?`/dashboard?org=${m}`:"/dashboard",children:[s.jsx(iu,{className:"h-3 w-3"}),"Manage Pets"]})})]})]})}),w&&s.jsx("div",{className:"p-4 rounded-md border border-primary/30 bg-primary/5",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-1.5 rounded-md bg-primary/10 shrink-0 mt-0.5",children:s.jsx(Eh,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("p",{className:"font-medium text-sm","data-testid":"text-add-slots-title",children:"Add extra pet slots"}),s.jsx(vt,{variant:"secondary",children:"$3/slot/mo"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Add up to ",j," more slot",j>1?"s":""," (",l," of ",u," add-ons used)."]}),s.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{variant:"outline",size:"icon",onClick:()=>N(Math.max(l+1,S-1)),disabled:S<=l+1,"data-testid":"button-decrease-slots",children:s.jsx(nE,{className:"h-3 w-3"})}),s.jsx("span",{className:"w-10 text-center font-mono font-medium","data-testid":"text-slot-quantity",children:S}),s.jsx(B,{variant:"outline",size:"icon",onClick:()=>N(Math.min(u,S+1)),disabled:S>=u,"data-testid":"button-increase-slots",children:s.jsx(Cr,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"text-xs text-muted-foreground","data-testid":"text-total-slots",children:["= ",o+S," total slots"]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3 gap-2 flex-wrap",children:[s.jsxs("span",{className:"text-sm font-medium","data-testid":"text-addon-cost",children:["$",(S*3).toFixed(2),"/mo total add-on"]}),s.jsxs(B,{size:"sm",className:"gap-1",onClick:()=>C.mutate(S),disabled:C.isPending,"data-testid":"button-purchase-slots",children:[s.jsx(Eh,{className:"h-3 w-3"}),C.isPending?"Processing...":"Add Slots"]})]})]})]})}),!d&&s.jsx("div",{className:"p-4 rounded-md border bg-muted/30",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-1.5 rounded-md bg-muted shrink-0 mt-0.5",children:s.jsx(Eh,{className:"h-4 w-4 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm text-muted-foreground","data-testid":"text-free-plan-slots-title",children:"Extra pet slots"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Available on paid plans only. Upgrade to unlock add-on slots."})]})]})}),s.jsx("div",{className:"p-4 rounded-md border",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-1.5 rounded-md bg-primary/10 shrink-0 mt-0.5",children:s.jsx(Bs,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm","data-testid":"text-upgrade-plan-title",children:"Upgrade your plan"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Get more pet slots, portrait credits, and features with a higher-tier plan."}),s.jsx(B,{variant:"outline",size:"sm",className:"mt-2 gap-1",onClick:()=>t(!1),"data-testid":"button-upgrade-plan-modal",asChild:!0,children:s.jsxs(ye,{href:m?`/choose-plan/${m}`:"/choose-plan",children:[s.jsx(Bs,{className:"h-3 w-3"}),"View Plans"]})})]})]})})]})})]})})}function gr(){const{theme:e,setTheme:t}=RT();return s.jsxs(B,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[s.jsx(gE,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(aE,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),s.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function xa(){const{isAdmin:e}=yr();return e?s.jsx(B,{className:"fixed top-20 right-4 shadow-lg gap-2 z-50",size:"sm","data-testid":"button-admin-floating",asChild:!0,children:s.jsxs(ye,{href:"/admin",children:[s.jsx(Vs,{className:"h-4 w-4"}),"Admin"]})}):null}const yo=4;function pA(){const[,e]=An(),{toast:t}=Pr(),r=Ho(),{isLoading:i,isAuthenticated:o}=yr(),l=new URLSearchParams(window.location.search),u=l.get("dog")?parseInt(l.get("dog")):null,d=l.get("org"),f=l.get("species");x.useEffect(()=>{!i&&!o&&(window.location.href="/login")},[o,i]);const{data:m}=ut({queryKey:["/api/dogs",u],enabled:!!u}),{data:g}=ut({queryKey:["/api/my-organization"]}),{data:v}=ut({queryKey:["/api/admin/organizations",d],queryFn:async()=>{const ie=await mr(),We=await fetch(`/api/admin/organizations/${d}`,{headers:ie});return We.ok?We.json():null},enabled:!!d}),[b,S]=x.useState(null),[N,w]=x.useState(null),[j,C]=x.useState(""),[_,P]=x.useState(""),[A,$]=x.useState(""),[E,L]=x.useState(""),[Q,X]=x.useState(""),[ee,le]=x.useState(f||null),[T,Z]=x.useState(!1),[Y,ge]=x.useState(!1),[K,z]=x.useState([]),[U,G]=x.useState(null),[te,D]=x.useState(1),I=K.find(ie=>ie.id===U)||null,fe=I?.image||null,[ue,xe]=x.useState(!1),[ve,ae]=x.useState(""),[we,Pe]=x.useState(null),[Ae,Qe]=x.useState(null),[Te,Je]=x.useState(null),[re,Ke]=x.useState(null),ht=x.useRef(null);x.useEffect(()=>{m&&Y&&u&&!m.adoptionUrl&&xe(!0)},[m,Y,u]);const[lr,se]=x.useState(!1),Fe=d?v:g,nt=Fe?.speciesHandled||g?.speciesHandled||"dogs",Ut=Fe?.petCount??0,O=Fe?.petLimit??null,q=Fe?.basePetLimit??O,J=Fe?.additionalPetSlots??0,me=Fe?.maxAdditionalSlots??5,pe=Fe?.isPaidPlan??!1,Se=!u&&O!=null&&Ut>=O;x.useEffect(()=>{if(m&&!Y){C(m.name||""),P(m.breed||""),$(m.age||""),L(m.adoptionUrl||""),X(m.description||""),le(m.species||"dog"),Z(!0),m.originalPhotoUrl&&S(m.originalPhotoUrl);const ie=m.portraits||(m.portrait?[m.portrait]:[]);if(ie.length>0){const We=[];let at=1,it=1;const bt=m.portrait?.id;for(const jt of ie)if(jt.generatedImageUrl&&jt.styleId){const ur=jt.style,gs=pa.find(Ps=>Ps.id===jt.styleId)||(ur?{id:ur.id,name:ur.name,description:ur.description||"",promptTemplate:ur.promptTemplate||"",category:ur.category||"classic",species:ur.species||"both",previewImageUrl:ur.previewImageUrl||null}:null);if(gs){const Ps=at;(jt.id===bt||jt.isSelected)&&(it=Ps),We.push({id:Ps,image:jt.generatedImageUrl,style:gs,editsUsed:jt.editCount||0,portraitId:jt.id,hasPreviousImage:!!jt.previousImageUrl}),at++}}if(We.length>0){const jt=We.findIndex(gs=>gs.id===it),ur=jt>=0?We[jt]:We[0];w(ur.style),z(We),G(ur.id),D(at)}}ge(!0)}},[m,Y]),x.useEffect(()=>{!u&&f&&(le(f),Z(!0))},[u,f]),x.useEffect(()=>{!u&&!f&&(Fe||g)&&(nt==="cats"?(le("cat"),Z(!0)):nt==="dogs"?(le("dog"),Z(!0)):nt==="both"&&(le(null),Z(!1)))},[nt,u,f,g,Fe]);const Xe=ie=>{ie!==ee&&(P(""),w(null),z([]),G(null),D(1)),le(ie),Z(!0)},ct=!u&&!!(Fe||g)&&(nt==="both"||f===null&&nt!=="dogs"&&nt!=="cats"),ft=d?`/dashboard?stay=1&org=${d}`:"/dashboard",vr=ee||"dog",hs=vr==="cat"?"cat":"dog";x.useEffect(()=>{if(!we)return;const ie=async()=>{try{const at=await mr(),it=await fetch(`/api/jobs/${we}`,{headers:at});if(!it.ok)return;const bt=await it.json();bt.status==="completed"&&bt.result?(Pe(null),Je({result:bt.result,context:ht.current}),ht.current=null):bt.status==="failed"&&(Pe(null),ht.current=null,t({title:"Generation Failed",description:bt.error||"Please try again.",variant:"destructive"}))}catch{}};ie();const We=setInterval(ie,2e3);return()=>clearInterval(We)},[we,t]),x.useEffect(()=>{if(!Te)return;const{result:ie,context:We}=Te;if(Je(null),!(!ie?.generatedImage||!We))if(We.wasExistingStyle&&We.existingViewId!==null){const at=ie.editCount??0;z(it=>it.map(bt=>bt.id===We.existingViewId?{...bt,image:ie.generatedImage,editsUsed:at,portraitId:ie.portraitId||bt.portraitId,hasPreviousImage:ie.hasPreviousImage??!0}:bt)),t({title:"Portrait Regenerated!",description:`${j}'s ${We.style.name} portrait has been updated! (${at}/${yo} edits used)`})}else{const at={id:te,image:ie.generatedImage,style:We.style,editsUsed:ie.editCount??0,portraitId:ie.portraitId};z(it=>[...it,at]),G(te),D(it=>it+1),t({title:"Portrait Generated!",description:`${j}'s ${We.style.name} portrait is ready!`})}},[Te,te,j,t]),x.useEffect(()=>{if(!Ae)return;const ie=async()=>{try{const at=await mr(),it=await fetch(`/api/jobs/${Ae}`,{headers:at});if(!it.ok)return;const bt=await it.json();bt.status==="completed"&&bt.result?(Qe(null),Ke(bt.result)):bt.status==="failed"&&(Qe(null),t({title:"Edit Failed",description:bt.error||"Please try again.",variant:"destructive"}))}catch{}};ie();const We=setInterval(ie,2e3);return()=>clearInterval(We)},[Ae,t]),x.useEffect(()=>{if(!re)return;const ie=re;if(Ke(null),ie.editedImage&&U!==null){z(at=>at.map(it=>it.id===U?{...it,image:ie.editedImage,editsUsed:ie.editCount??it.editsUsed+1,hasPreviousImage:!!ie.hasPreviousImage}:it));const We=ie.editCount??1;t({title:"Portrait Updated!",description:`${We}/${ie.maxEdits||yo} edits used`})}},[re,U,t]);const fs=Ft({mutationFn:async()=>{ht.current={style:N,wasExistingStyle:!!(I&&I.style.id===N?.id),existingViewId:I&&I.style.id===N?.id?U:null};const ie=ur=>ur.replace(/[^\w\s\-'.,:;!?()]/g,"").substring(0,200).trim(),We=ie(_||(vr==="cat"?"domestic":"mixed breed")),at=ie(j),jt={prompt:`Transform the provided photo of this ${We} ${hs} named "${at}" into the following artistic style. CRITICALLY IMPORTANT: Preserve the ${hs}'s EXACT coat color pattern  including where each color appears on the body (lighter vs darker areas, two-tone patterns, patches, markings). Do NOT simplify into one uniform color. Keep all of the ${hs}'s actual appearance and features recognizable.${vr==="cat"?" CRITICAL: The cat must look like a REAL, LIVING cat  photorealistic fur texture, natural eye reflections, realistic whiskers and anatomy. Do NOT make the cat look like a stuffed animal, cartoon, CGI render, or plastic figurine. The artistic style should be applied to the scene, clothing, and background  but the cat itself must always look like a genuine photograph of a real cat.":" CRITICAL: The dog must look like a REAL, LIVING dog  photorealistic fur texture, natural eye reflections, realistic nose and anatomy. Do NOT make the dog look like a stuffed animal, cartoon, caricature, CGI render, or plastic figurine. The artistic style should be applied to the scene, clothing, and background  but the dog itself must always look like a genuine photograph of a real dog."} Style: ${N.promptTemplate.replace("{breed}",We)}`,originalImage:b,dogName:at,styleId:N.id,species:vr};return u&&(jt.dogId=u),d&&(jt.organizationId=d),(await $t("POST","/api/generate-portrait",jt)).json()},onSuccess:ie=>{ie.jobId&&Pe(ie.jobId)},onError:ie=>{ht.current=null,t({title:"Generation Failed",description:ie.message||"Please try again.",variant:"destructive"})}}),ya=Ft({mutationFn:async ie=>{const We={currentImage:I.image,editPrompt:ie};return u&&(We.dogId=u),I?.portraitId&&(We.portraitId=I.portraitId),(await $t("POST","/api/edit-portrait",We)).json()},onSuccess:ie=>{ie.jobId&&Qe(ie.jobId)},onError:ie=>{t({title:"Edit Failed",description:ie.message||"Please try again.",variant:"destructive"})}}),cr=fs.isPending||!!we,Dn=ya.isPending||!!Ae,ps=Ft({mutationFn:async()=>{if(!I?.portraitId)throw new Error("No portrait to revert");return(await $t("POST","/api/revert-portrait",{portraitId:I.portraitId})).json()},onSuccess:ie=>{ie.revertedImage&&U!==null&&(z(We=>We.map(at=>at.id===U?{...at,image:ie.revertedImage,hasPreviousImage:!!ie.hasPreviousImage}:at)),t({title:"Image Reverted!",description:"Your previous portrait has been restored."}),r.invalidateQueries({queryKey:["/api/dogs"]}),r.invalidateQueries({queryKey:["/api/my-dogs"]}))},onError:ie=>{t({title:"Revert Failed",description:ie.message||"Please try again.",variant:"destructive"})}}),ms=Ft({mutationFn:async()=>{const ie=Dy(j);if(!ie.valid)throw new Error(ie.error||"Invalid name");if(!_)throw new Error("Please select a breed");const We={name:j,breed:_||void 0,age:A||void 0,adoptionUrl:E,description:Q||void 0,originalPhotoUrl:b,species:vr};if(u)return I?.portraitId&&(We.selectedPortraitId=I.portraitId),$t("PATCH",`/api/dogs/${u}`,We);const at=I?.style||N,it=I?.image||null;return it&&(We.generatedPortraitUrl=it),at&&(We.styleId=at.id),d&&(We.organizationId=parseInt(d)),$t("POST","/api/dogs",We)},onSuccess:()=>{r.invalidateQueries({queryKey:["/api/dogs"]}),u&&r.invalidateQueries({queryKey:["/api/dogs",u]}),r.invalidateQueries({queryKey:["/api/my-dogs"]}),r.invalidateQueries({queryKey:["/api/my-organization"]}),r.invalidateQueries({queryKey:["/api/admin/organizations"]}),r.invalidateQueries({queryKey:["/api/admin/stats"]}),t({title:"Saved!",description:`${j}'s portrait has been saved to the gallery.`}),e(ft)},onError:ie=>{t({title:"Save Failed",description:ie.message||"Please try again.",variant:"destructive"})}}),Qs=x.useCallback(()=>{if(!b)return t({title:"Upload a photo first",variant:"destructive"});const ie=Dy(j);if(!ie.valid)return t({title:ie.error||"Invalid name",variant:"destructive"});if(!_)return t({title:"Select a breed",variant:"destructive"});if(!E.trim())return t({title:"Add an adoption page URL",description:"This is where people will go to learn more and adopt this pet.",variant:"destructive"});if(!N)return t({title:"Pick an art style",variant:"destructive"});fs.mutate()},[b,N,j,_,E,fs,t]),Ys=x.useCallback(()=>{if(!I)return;const ie=document.createElement("a");ie.href=I.image,ie.download=`${j||"portrait"}-${I.style?.name||"art"}.png`,ie.click()},[I,j]),Js=ie=>{G(ie);const We=K.find(at=>at.id===ie);We&&w(We.style)},Ii=!!b&&!!N&&!!j.trim()&&!!_,Mn=K.length>0,va=I?.style||N,nl=!!(Mn&&N&&I&&N.id!==I.style.id);return i?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx(Ve,{className:"h-12 w-12 text-primary animate-pulse"})}):o?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home-header",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{variant:"ghost",size:"sm","data-testid":"link-gallery-header",asChild:!0,children:s.jsx(ye,{href:"/gallery",children:"Gallery"})}),d&&s.jsx(B,{variant:"outline",size:"sm",className:"gap-1","data-testid":"button-back-to-admin",asChild:!0,children:s.jsxs(ye,{href:"/admin",children:[s.jsx(Vs,{className:"h-3 w-3"}),"Admin Panel"]})}),s.jsx(gr,{})]})]})}),s.jsx(xa,{}),s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1 -ml-2","data-testid":"button-back",asChild:!0,children:s.jsxs(ye,{href:ft,children:[s.jsx(Er,{className:"h-4 w-4"}),d?"Back to Admin":"Back to My Rescue"]})})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-serif font-bold mb-2","data-testid":"text-create-heading",children:u&&m?`Edit ${m.name}'s Profile`:"Create a Portrait"}),s.jsx("p",{className:"text-muted-foreground",children:u&&m?"Update info, change the style, or generate a new portrait":"Upload a photo, pick a style, and watch the magic happen"})]}),Se?s.jsx(_e,{children:s.jsxs(Ee,{className:"py-12 text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto",children:s.jsx(Qf,{className:"h-8 w-8 text-destructive"})}),s.jsx("h2",{className:"text-xl font-semibold","data-testid":"text-pet-limit-heading",children:"Pet Limit Reached"}),s.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto","data-testid":"text-pet-limit-message",children:["You've reached your limit of ",O," pets (",Ut,"/",O," used). Free up a spot, add extra slots, or upgrade your plan."]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-3 pt-2",children:[s.jsxs(B,{className:"gap-2",onClick:()=>se(!0),"data-testid":"button-need-more-room-create",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Need More Room?"]}),s.jsx(B,{variant:"outline",className:"gap-2","data-testid":"button-back-to-dashboard",asChild:!0,children:s.jsxs(ye,{href:ft,children:[s.jsx(Er,{className:"h-4 w-4"}),"Back to Dashboard"]})})]}),s.jsx(u0,{open:lr,onOpenChange:se,petCount:Ut,petLimit:O,basePetLimit:q??O,additionalPetSlots:J,maxAdditionalSlots:me,isPaidPlan:pe,hasStripeSubscription:!!Fe?.hasActiveSubscription,orgId:Fe?.id,isAdmin:!!d})]})}):s.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[s.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[ct&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold mb-4","data-testid":"text-section-species",children:"What kind of pet?"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(B,{variant:ee==="dog"?"default":"outline",onClick:()=>Xe("dog"),className:"gap-2 flex-1","data-testid":"button-species-dog",children:[s.jsx(Ve,{className:"h-4 w-4"}),"Dog"]}),s.jsxs(B,{variant:ee==="cat"?"default":"outline",onClick:()=>Xe("cat"),className:"gap-2 flex-1","data-testid":"button-species-cat",children:[s.jsx(et,{className:"h-4 w-4"}),"Cat"]})]})]}),T&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold mb-4","data-testid":"text-section-photo",children:"Upload Photo"}),s.jsx(ZR,{onImageUpload:ie=>{S(ie),z([]),G(null),D(1)},currentImage:b,onClear:()=>{S(null),z([]),G(null),D(1)}})]}),T&&b&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-lg font-semibold","data-testid":"text-section-info",children:["About This ",vr==="cat"?"Kitty":"Pup"]}),s.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[s.jsx(He,{placeholder:"Name *","aria-label":"Pet name",value:j,onChange:ie=>C(ie.target.value),"data-testid":"input-pet-name"}),s.jsx(lA,{species:vr,value:_,onChange:P}),s.jsx(He,{placeholder:"Age (optional)","aria-label":"Pet age",value:A,onChange:ie=>$(ie.target.value),"data-testid":"input-pet-age"})]}),s.jsx(He,{placeholder:"Adoption page URL *","aria-label":"Adoption page URL",value:E,onChange:ie=>L(ie.target.value),"data-testid":"input-adoption-url"}),s.jsx(vi,{placeholder:"Tell people about this pet  personality, quirks, likes... (optional)",value:Q,onChange:ie=>X(ie.target.value),className:"resize-none text-sm",rows:3,"data-testid":"input-pet-description"})]}),T&&b&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold mb-4","data-testid":"text-section-style",children:"Pick a Style"}),s.jsx(sA,{selectedStyle:N,onSelectStyle:ie=>{w(ie)},species:vr})]})]}),s.jsxs("div",{className:"lg:col-span-2 lg:sticky lg:top-20 self-start space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Preview"}),K.length>1&&s.jsx(_e,{children:s.jsxs(Ee,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Uo,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:"Compare Views"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:K.map((ie,We)=>s.jsx("div",{className:"relative group",children:s.jsxs(B,{variant:U===ie.id?"default":"outline",size:"sm",onClick:()=>Js(ie.id),className:"gap-1","data-testid":`button-view-${ie.id}`,children:["View ",We+1,s.jsxs("span",{className:"text-xs opacity-70",children:["(",ie.style.name,")"]})]})},ie.id))}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Switch between views to compare, then save the one you like best"})]})}),u&&b&&fe&&s.jsx(_e,{children:s.jsxs(Ee,{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1.5 text-center",children:"Original Photo"}),s.jsx("div",{className:"aspect-square rounded-md border overflow-hidden protected-image-wrapper",children:s.jsx("img",{src:b,alt:`${j} original`,className:"w-full h-full object-cover protected-image",draggable:!1,"data-testid":"img-original-photo"})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1.5 text-center",children:"Current Portrait"}),s.jsx("div",{className:"aspect-square rounded-md border overflow-hidden protected-image-wrapper",children:s.jsx("img",{src:fe,alt:`${j} portrait`,className:"w-full h-full object-cover protected-image",draggable:!1,"data-testid":"img-current-portrait"})})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-medium text-sm",children:j}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[_||(vr==="cat"?"Domestic":"Mixed breed"),A?`  ${A}`:"",va?`  ${va.name}`:""]})]})]})}),!u&&b&&j.trim()&&N&&s.jsx(_e,{children:s.jsx(Ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-md flex-shrink-0 border overflow-hidden",children:s.jsx("img",{src:b,alt:j,className:"w-full h-full object-cover","data-testid":"summary-pet-photo"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:j}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[_||(vr==="cat"?"Domestic":"Mixed breed"),A?`  ${A}`:"","  ",N.name]})]})]})})}),nl&&s.jsxs(B,{onClick:Qs,disabled:cr,className:"w-full gap-2",size:"lg","data-testid":"button-generate-new-style",children:[s.jsx(_t,{className:"h-5 w-5"}),cr?"Generating...":`Generate "${N?.name}" Portrait`]}),s.jsx(nA,{generatedImage:fe,isGenerating:cr,isEditing:Dn,selectedStyle:cr?N:va,dogName:j,adoptionUrl:E,onRegenerate:Qs,onDownload:Ys,onEdit:ie=>ya.mutate(ie),editsUsed:I?.editsUsed||0,maxEdits:yo}),!Mn&&s.jsxs(B,{onClick:Qs,disabled:!Ii||cr,className:"w-full gap-2",size:"lg","data-testid":"button-generate-preview",children:[s.jsx(_t,{className:"h-5 w-5"}),cr?"Generating...":"Generate Preview"]}),Mn&&Ii&&(!I||N?.id===I.style.id)&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs(B,{onClick:Qs,disabled:cr||(I?I.editsUsed>=yo:!1),variant:"outline",className:"w-full gap-2","data-testid":"button-generate-another",children:[s.jsx(_t,{className:"h-4 w-4"}),cr?"Regenerating...":I&&I.editsUsed>=yo?"No edits remaining":"Regenerate"]}),I?.hasPreviousImage&&I?.portraitId&&s.jsxs(B,{onClick:()=>ps.mutate(),disabled:ps.isPending,variant:"outline",className:"w-full gap-2","data-testid":"button-revert-portrait",children:[s.jsx(yE,{className:"h-4 w-4"}),ps.isPending?"Reverting...":"Undo - Restore Previous Image"]})]}),fe&&s.jsx(B,{onClick:()=>ms.mutate(),disabled:ms.isPending,className:"w-full gap-2",size:"lg","data-testid":"button-save-portrait",children:ms.isPending?"Saving...":K.length>1?`Save View ${K.findIndex(ie=>ie.id===U)+1} to Gallery`:"Save to Gallery"}),u&&!Mn&&s.jsx(B,{variant:"outline",onClick:()=>ms.mutate(),disabled:ms.isPending||!j.trim()||!_,className:"w-full gap-2","data-testid":"button-save-info-only",children:ms.isPending?"Saving...":"Save Info Changes"})]})]})]}),s.jsx(Wo,{open:ue,onOpenChange:()=>{},children:s.jsxs(wi,{className:"sm:max-w-md",onPointerDownOutside:ie=>ie.preventDefault(),onEscapeKeyDown:ie=>ie.preventDefault(),children:[s.jsxs(bi,{children:[s.jsxs(ji,{className:"flex items-center gap-2",children:[s.jsx(kw,{className:"h-5 w-5 text-primary"}),"Adoption Page URL Needed"]}),s.jsxs(Ni,{children:["Enter the link to ",j?`${j}'s`:"this pet's"," page on your rescue's website so adopters can find them."]})]}),s.jsx("div",{className:"space-y-3 py-2",children:s.jsx(He,{placeholder:"https://yourrescue.org/animals/pet-name",value:ve,onChange:ie=>ae(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&ve.trim()&&(L(ve.trim()),xe(!1))},autoFocus:!0})}),s.jsx(xp,{children:s.jsx(B,{onClick:()=>{L(ve.trim()),xe(!1)},disabled:!ve.trim(),className:"w-full gap-2",children:"Save URL"})})]})})]}):null}function Kt({className:e,...t}){return s.jsx("div",{className:Le("animate-pulse rounded-md bg-muted",e),...t})}function mA(){const{user:e}=yr(),[t,r]=x.useState("all"),{data:i,isLoading:o,error:l}=ut({queryKey:["/api/dogs"]}),{data:u}=ut({queryKey:["/api/my-organization"],enabled:!!e}),d=!!e&&!!u,f=i?.filter(b=>t==="all"||b.species===t)||[],m=i?.some(b=>b.species==="dog"),g=i?.some(b=>b.species==="cat"),v=m&&g;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home-gallery",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{size:"sm",className:"gap-1","data-testid":"button-add-pet",asChild:!0,children:s.jsxs(ye,{href:"/create",children:[s.jsx(Cr,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Add Pet"})]})}),s.jsx(gr,{})]})]})}),s.jsx(xa,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d&&u&&s.jsxs("div",{className:"flex flex-col items-center mb-8 pb-6 border-b",children:[u.logoUrl?s.jsx("div",{className:"protected-image-wrapper h-20 w-20 rounded-lg mb-4",children:s.jsx("img",{src:u.logoUrl,alt:`${u.name} logo`,className:"h-full w-full object-contain protected-image",draggable:!1,"data-testid":"img-org-logo"})}):s.jsx("div",{className:"h-20 w-20 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(sr,{className:"h-10 w-10 text-primary"})}),s.jsx("h2",{className:"text-2xl font-serif font-bold text-center","data-testid":"text-org-name",children:u.name}),u.description&&s.jsx("p",{className:"text-muted-foreground text-center max-w-lg mt-2",children:u.description}),u.websiteUrl&&s.jsxs("a",{href:u.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline mt-2","data-testid":"link-org-website",children:[s.jsx(kn,{className:"h-3 w-3"}),"Visit our website"]})]}),s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold mb-3",children:d?"View Adoptable Pets":"Adoptable Portraits Gallery"}),s.jsx("p",{className:"text-muted-foreground max-w-xl mx-auto",children:d?"Your rescue's adorable pets looking for their furever homes":"Beautiful AI-generated portraits of rescue pets looking for their furever homes"})]}),v&&!o&&s.jsxs("div",{className:"flex justify-center gap-2 mb-8","data-testid":"species-filter-tabs",children:[s.jsx(B,{variant:t==="all"?"default":"outline",size:"sm",onClick:()=>r("all"),"data-testid":"button-filter-all",children:"All Pets"}),s.jsxs(B,{variant:t==="dog"?"default":"outline",size:"sm",onClick:()=>r("dog"),className:"gap-1","data-testid":"button-filter-dogs",children:[s.jsx(Ve,{className:"h-3.5 w-3.5"}),"Dogs"]}),s.jsxs(B,{variant:t==="cat"?"default":"outline",size:"sm",onClick:()=>r("cat"),className:"gap-1","data-testid":"button-filter-cats",children:[s.jsx(et,{className:"h-3.5 w-3.5"}),"Cats"]})]}),o&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((b,S)=>s.jsxs(_e,{className:"overflow-hidden",children:[s.jsx(Kt,{className:"aspect-square"}),s.jsxs(Ee,{className:"p-4",children:[s.jsx(Kt,{className:"h-5 w-24 mb-2"}),s.jsx(Kt,{className:"h-4 w-32"})]})]},S))}),l&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ve,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Unable to Load Gallery"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Please try refreshing the page."}),s.jsx(B,{onClick:()=>window.location.reload(),children:"Refresh"})]}),!o&&!l&&f.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6",children:s.jsx(sr,{className:"h-10 w-10 text-primary"})}),s.jsx("h2",{className:"text-2xl font-serif font-bold mb-3",children:"No Portraits Yet"}),s.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:t!=="all"?`No ${t==="dog"?"dog":"cat"} portraits yet. Try viewing all pets!`:"Start creating beautiful AI portraits for your rescue pets to help them find loving homes."}),t!=="all"?s.jsx(B,{size:"lg",variant:"outline",className:"gap-2",onClick:()=>r("all"),"data-testid":"button-show-all",children:"View All Pets"}):s.jsx(B,{size:"lg",className:"gap-2","data-testid":"button-create-first",asChild:!0,children:s.jsxs(ye,{href:"/create",children:[s.jsx(Cr,{className:"h-5 w-5"}),"Create Your First Portrait"]})})]}),!o&&!l&&f.length>0&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.map(b=>{const S=b.species==="cat"?et:Ve;return s.jsxs(_e,{className:"overflow-visible hover-elevate cursor-pointer group","data-testid":`card-dog-${b.id}`,children:[s.jsxs("div",{className:"relative aspect-square overflow-hidden protected-image-wrapper",children:[b.portrait?.generatedImageUrl?s.jsx("img",{src:b.portrait.generatedImageUrl,alt:`${b.name} portrait`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105 protected-image",draggable:!1}):b.originalPhotoUrl?s.jsx("img",{src:b.originalPhotoUrl,alt:b.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105 protected-image",draggable:!1}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center",children:s.jsx(S,{className:"h-16 w-16 text-muted-foreground/50"})}),s.jsx("div",{className:"absolute top-0 left-0 right-0 p-3 bg-gradient-to-b from-black/70 via-black/40 to-transparent",children:s.jsx("h3",{className:"font-serif font-bold text-xl text-white drop-shadow-lg","data-testid":`text-pet-name-${b.id}`,children:b.name})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),b.isAvailable&&s.jsx(vt,{className:"absolute top-12 right-3 bg-accent text-accent-foreground",children:"Available"})]}),s.jsxs(Ee,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[b.breed||(b.species==="cat"?"Domestic":"Mixed Breed")," ",b.age?` ${b.age}`:""]})}),b.portrait?.style&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(os,{className:"h-3 w-3"}),s.jsx("span",{className:"hidden sm:inline",children:b.portrait.style.category})]})]}),b.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:b.description}),s.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center gap-2",children:[s.jsx(B,{variant:"outline",size:"sm",className:"w-full gap-1 flex-1","data-testid":`button-view-${b.id}`,asChild:!0,children:s.jsxs(ye,{href:`/pawfile/${b.id}`,children:[s.jsx(S,{className:"h-3 w-3"}),"View Portrait"]})}),b.adoptionUrl&&s.jsx("a",{href:b.adoptionUrl,target:"_blank",rel:"noopener noreferrer",onClick:N=>N.stopPropagation(),"data-testid":`link-adopt-${b.id}`,children:s.jsxs(B,{size:"sm",className:"gap-1",children:[s.jsx(kn,{className:"h-3 w-3"}),"Adopt Me"]})})]})]})]},b.id)})})]}),s.jsx("footer",{className:"py-8 border-t mt-12",children:s.jsx("div",{className:"container mx-auto px-4 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Helping rescue pets find their furever homes through beautiful AI art"})})})]})}const gA="modulepreload",xA=function(e){return"/"+e},My={},d0=function(t,r,i){let o=Promise.resolve();if(r&&r.length>0){let m=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var u=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");o=m(r.map(g=>{if(g=xA(g),g in My)return;My[g]=!0;const v=g.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":gA,v||(S.as="script"),S.crossOrigin="",S.href=g,f&&S.setAttribute("nonce",f),document.head.appendChild(S),v)return new Promise((N,w)=>{S.addEventListener("load",N),S.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return o.then(d=>{for(const f of d||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})};var h0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$y=Be.createContext&&Be.createContext(h0),yA=["attr","size","title"];function vA(e,t){if(e==null)return{};var r=wA(e,t),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)i=l[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function wA(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qc.apply(this,arguments)}function Fy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Hc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fy(Object(r),!0).forEach(function(i){bA(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fy(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function bA(e,t,r){return t=jA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jA(e){var t=NA(e,"string");return typeof t=="symbol"?t:t+""}function NA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f0(e){return e&&e.map((t,r)=>Be.createElement(t.tag,Hc({key:r},t.attr),f0(t.child)))}function yp(e){return t=>Be.createElement(SA,qc({attr:Hc({},e.attr)},t),f0(e.child))}function SA(e){var t=r=>{var{attr:i,size:o,title:l}=e,u=vA(e,yA),d=o||r.size||"1em",f;return r.className&&(f=r.className),e.className&&(f=(f?f+" ":"")+e.className),Be.createElement("svg",qc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,u,{className:f,style:Hc(Hc({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&Be.createElement("title",null,l),e.children)};return $y!==void 0?Be.createElement($y.Consumer,null,r=>t(r)):t(h0)}function vu(e){return yp({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"},child:[]}]})(e)}function _n(e){return yp({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"},child:[]}]})(e)}function wu(e){return yp({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(e)}function bu({className:e}){return s.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:e,children:s.jsx("path",{d:"M12 2L3 10v12h6v-7a3 3 0 0 1 6 0v7h6V10L12 2z"})})}const Fh="/api/instagram";function kA(){const[e,t]=x.useState(!1);return x.useEffect(()=>{t(/Android|iPhone|iPad|iPod|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))},[]),e}function p0({url:e,title:t,text:r,dogId:i,dogName:o,dogBreed:l,orgId:u,adoptionUrl:d,orgWebsiteUrl:f,captureRef:m,showcaseName:g}){const{toast:v}=Pr(),{session:b,isAuthenticated:S}=yr(),[N,w]=x.useState(!1),[j,C]=x.useState(!1),[_,P]=x.useState(!1),[A,$]=x.useState(""),[E,L]=x.useState(!1),[Q,X]=x.useState(!1),[ee,le]=x.useState(!1),[T,Z]=x.useState(!1),[Y,ge]=x.useState(""),[K,z]=x.useState(null),U=kA(),G=e||window.location.href,te=encodeURIComponent(G),D=encodeURIComponent(r),I=`${r} ${G}`,fe=`sms:?body=${encodeURIComponent(I)}`,ue=!!i||!!m,xe=u?`${Fh}/status?orgId=${u}`:`${Fh}/status`,{data:ve}=ut({queryKey:[xe],enabled:S&&ue}),ae=async()=>{await navigator.clipboard.writeText(G),w(!0),v({title:"Link Copied!",description:"Paste it anywhere to share."}),setTimeout(()=>w(!1),2e3)},we=Te=>{window.open(Te,"_blank","noopener,noreferrer,width=600,height=500")},Pe=async()=>{if(A.trim()){if(!b?.access_token){v({title:"Sign In Required",description:"Please log in to send a text.",variant:"destructive"});return}le(!0);try{const Te=await fetch("/api/send-sms",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b?.access_token}`},body:JSON.stringify({to:A,message:I})}),Je=await Te.json();if(!Te.ok)throw new Error(Je.error||"Failed to send");v({title:"Text Sent!",description:`Message sent to ${A}`}),C(!1),$("")}catch(Te){v({title:"Failed to Send",description:Te.message,variant:"destructive"})}finally{le(!1)}}},Ae=async()=>{if(m?.current)try{v({title:"Capturing image...",description:"Please wait."});const{toPng:Te}=await d0(async()=>{const{toPng:Ke}=await import("./index-VDAUHfGj.js");return{toPng:Ke}},[]),Je=await Te(m.current,{quality:.95,pixelRatio:2,backgroundColor:"#ffffff"});z(Je);const re=i?`Meet ${o||"this adorable pet"}! ${l?`A beautiful ${l} `:""}Looking for a forever home. View their full profile at ${G}

#adoptdontshop #rescuepets #pawtraitpals #fosteringsaveslives`:`Check out the adorable pets available for adoption at ${g||"our rescue"}! Visit ${G} to learn more.

#adoptdontshop #rescuepets #pawtraitpals #fosteringsaveslives`;ge(re),P(!0)}catch(Te){console.error("Failed to capture image:",Te),v({title:"Capture Failed",description:"Could not capture the image.",variant:"destructive"})}},Qe=async()=>{Z(!0);try{if(!K||!u)throw new Error("Nothing to post");const Te={orgId:u,image:K,caption:Y},Je=await fetch(`${Fh}/post`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b?.access_token}`},body:JSON.stringify(Te)}),re=await Je.json();if(!Je.ok)throw new Error(re.error||"Failed to post");v({title:"Posted to Instagram!",description:K?"Showcase posted to Instagram!":`${o||"Pet"}'s portrait is now on Instagram.`}),P(!1),z(null)}catch(Te){v({title:"Instagram Post Failed",description:Te.message,variant:"destructive"})}finally{Z(!1)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(Zn,{children:[s.jsx(ea,{asChild:!0,children:s.jsx(B,{size:"icon",variant:"outline",onClick:()=>we(`https://www.facebook.com/sharer/sharer.php?u=${te}`),"data-testid":"button-share-facebook",children:s.jsx(vu,{className:"h-4 w-4"})})}),s.jsx(wn,{children:"Share on Facebook"})]}),ve?.connected&&ue?s.jsxs(Zn,{children:[s.jsx(ea,{asChild:!0,children:s.jsx(B,{size:"icon",variant:"outline",onClick:Ae,"data-testid":"button-share-instagram",children:s.jsx(_n,{className:"h-4 w-4"})})}),s.jsxs(wn,{children:["Post to Instagram",ve.username?` @${ve.username}`:""]})]}):null,s.jsxs(Zn,{children:[s.jsx(ea,{asChild:!0,children:s.jsx(B,{size:"icon",variant:"outline",onClick:()=>we(`https://x.com/intent/tweet?url=${te}&text=${D}`),"data-testid":"button-share-x",children:s.jsx(wu,{className:"h-4 w-4"})})}),s.jsx(wn,{children:"Share on X"})]}),s.jsxs(Zn,{children:[s.jsx(ea,{asChild:!0,children:s.jsx(B,{size:"icon",variant:"outline",onClick:()=>we(`https://nextdoor.com/sharekit/?source=pawtraitpals&body=${D}%20${te}`),"data-testid":"button-share-nextdoor",children:s.jsx(bu,{className:"h-4 w-4"})})}),s.jsx(wn,{children:"Share on Nextdoor"})]}),U?s.jsxs(Zn,{children:[s.jsx(ea,{asChild:!0,children:s.jsx("a",{href:fe,children:s.jsx(B,{size:"icon",variant:"outline","data-testid":"button-share-sms",children:s.jsx(uy,{className:"h-4 w-4"})})})}),s.jsx(wn,{children:"Send via Text"})]}):s.jsxs(Zn,{children:[s.jsx(ea,{asChild:!0,children:s.jsx(B,{size:"icon",variant:"outline",onClick:()=>C(!0),"data-testid":"button-share-sms",children:s.jsx(uy,{className:"h-4 w-4"})})}),s.jsx(wn,{children:"Send via Text"})]}),s.jsxs(Zn,{children:[s.jsx(ea,{asChild:!0,children:s.jsx(B,{size:"icon",variant:"outline",onClick:ae,"data-testid":"button-copy-link",children:N?s.jsx(Rt,{className:"h-4 w-4"}):s.jsx(kw,{className:"h-4 w-4"})})}),s.jsx(wn,{children:N?"Copied!":"Copy Link"})]})]}),s.jsx(Wo,{open:j,onOpenChange:Te=>{C(Te),Te||(L(!1),X(!1),$(""))},children:s.jsxs(wi,{className:"sm:max-w-md",children:[s.jsxs(bi,{children:[s.jsx(ji,{children:"Send via Text"}),s.jsx(Ni,{children:"Enter a phone number to text this link to."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(He,{placeholder:"(555) 123-4567",value:A,onChange:Te=>$(Te.target.value),onKeyDown:Te=>Te.key==="Enter"&&E&&Q&&Pe(),disabled:ee,className:"flex-1"}),s.jsx(B,{onClick:Pe,disabled:ee||!A.trim()||!E||!Q,children:ee?s.jsx(oi,{className:"h-4 w-4 animate-spin"}):s.jsx(uE,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-start gap-2 text-xs text-muted-foreground cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:Te=>L(Te.target.checked),className:"mt-0.5 rounded border-gray-300"}),s.jsx("span",{children:"I agree to send an SMS to this number via Pawtrait Pals. Message & data rates may apply. Recipient can reply STOP to opt out."})]}),s.jsxs("label",{className:"flex items-start gap-2 text-xs text-muted-foreground cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Q,onChange:Te=>X(Te.target.checked),className:"mt-0.5 rounded border-gray-300"}),s.jsxs("span",{children:["I have read and agree to the Pawtrait Pals ",s.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline text-primary",children:"Privacy Policy"}),"."]})]})]})]})}),s.jsx(Wo,{open:_,onOpenChange:P,children:s.jsxs(wi,{className:"sm:max-w-lg",children:[s.jsxs(bi,{children:[s.jsxs(ji,{className:"flex items-center gap-2",children:[s.jsx(_n,{className:"h-5 w-5"}),"Post to Instagram"]}),s.jsx(Ni,{children:ve?.username?`Posting to @${ve.username}`:"Post this portrait to your Instagram"})]}),s.jsxs("div",{className:"space-y-3",children:[K&&s.jsx("div",{className:"rounded-md overflow-hidden border max-h-48",children:s.jsx("img",{src:K,alt:"Showcase preview",className:"w-full object-contain"})}),s.jsx(vi,{value:Y,onChange:Te=>ge(Te.target.value),rows:5,placeholder:"Write a caption...",disabled:T,className:"resize-none"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(B,{variant:"outline",onClick:()=>P(!1),disabled:T,children:"Cancel"}),s.jsxs(B,{onClick:Qe,disabled:T,children:[T?s.jsx(oi,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(_n,{className:"h-4 w-4 mr-2"}),"Post"]})]})]})]})})]})}function _A(){const e=Si(),{isAuthenticated:t,isAdmin:r}=yr(),{toast:i}=Pr(),o=x.useRef(null),[l,u]=x.useState(!1),d=e.id,{data:f,isLoading:m,error:g}=ut({queryKey:["/api/dogs",d]}),{data:v}=ut({queryKey:["/api/my-organization"],enabled:t}),b=t&&(r||v&&f?.organizationId===v.id),S=f?.species==="cat",N=f?.organizationName,w=`${f?.name}'s Pawfile${N?` from ${N}`:""} - Available for Adoption`,j=`Meet ${f?.name}, a beautiful ${f?.breed||(S?"cat":"dog")} looking for a forever home${N?` through ${N}`:""}!`,C=()=>{window.print()},_=async()=>{if(o.current){u(!0);try{const{toPng:A}=await d0(async()=>{const{toPng:L}=await import("./index-VDAUHfGj.js");return{toPng:L}},[]),$=await A(o.current,{quality:.95,pixelRatio:2,backgroundColor:"#ffffff"}),E=document.createElement("a");E.download=`${f?.name||"pawfile"}-pawfile.png`,E.href=$,E.click(),i({title:"Pawfile Saved!",description:`${f?.name}'s pawfile has been downloaded.`})}catch(A){console.error("Failed to save pawfile:",A),i({title:"Save Failed",description:"Could not save the pawfile image. Try the Print button instead.",variant:"destructive"})}finally{u(!1)}}};if(m)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b print:hidden",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsx(gr,{})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-lg mx-auto",children:s.jsx(Kt,{className:"aspect-[4/5] rounded-lg"})})})]});if(g||!f)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsx(gr,{})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[s.jsx(sr,{className:"h-20 w-20 mx-auto mb-6 text-muted-foreground/50"}),s.jsx("h1",{className:"text-2xl font-serif font-bold mb-3",children:"Pet Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"This pet might have already found their forever home!"}),s.jsx(B,{"data-testid":"button-back-to-gallery",asChild:!0,children:s.jsx(ye,{href:"/dashboard",children:"Back to My Rescue"})})]})]});const P=f.portrait?.generatedImageUrl||f.originalPhotoUrl;return s.jsxs("div",{className:"min-h-screen bg-muted/50 dark:bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b print:hidden",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home-profile",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{variant:"ghost",size:"sm","data-testid":"link-gallery-profile",asChild:!0,children:s.jsx(ye,{href:"/gallery",children:"Gallery"})}),s.jsx(gr,{})]})]})}),s.jsx(xa,{}),s.jsxs("div",{className:"container mx-auto px-4 py-6 print:py-0 print:px-0",children:[s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1 -ml-2 mb-4 print:hidden","data-testid":"button-back-dashboard",asChild:!0,children:s.jsxs(ye,{href:r?`/dashboard?org=${f.organizationId}`:"/dashboard",children:[s.jsx(Er,{className:"h-4 w-4"}),"Back to My Rescue"]})}),s.jsxs("div",{className:"max-w-lg mx-auto",children:[s.jsxs("div",{ref:o,className:"bg-white dark:bg-card border-[3px] border-primary/20 dark:border-primary/30 rounded-lg overflow-hidden shadow-lg print:shadow-none print:border-[3px] print:rounded-none","data-testid":"showcase-card",children:[f.organizationLogoUrl?s.jsx("div",{className:"flex items-center justify-center py-5 px-6 border-b border-primary/10",children:s.jsx("img",{src:f.organizationLogoUrl,alt:f.organizationName||"Rescue",className:"max-h-16 max-w-[200px] object-contain","data-testid":"img-org-logo"})}):f.organizationName?s.jsx("div",{className:"flex items-center justify-center py-4 px-6 border-b border-primary/10",children:s.jsx("h2",{className:"font-serif text-lg font-semibold text-primary tracking-wide","data-testid":"text-org-header",children:f.organizationName})}):null,s.jsx("div",{className:"relative",children:s.jsx("div",{className:"p-3",children:s.jsx("div",{className:"border-2 border-primary/10 rounded-md overflow-hidden protected-image-wrapper",children:P?s.jsx("img",{src:P,alt:`${f.name} portrait`,className:"w-full aspect-square object-cover protected-image",draggable:!1,"data-testid":"img-dog-portrait"}):s.jsx("div",{className:"w-full aspect-square bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center",children:S?s.jsx(et,{className:"h-24 w-24 text-muted-foreground/50"}):s.jsx(Ve,{className:"h-24 w-24 text-muted-foreground/50"})})})})}),s.jsxs("div",{className:"px-6 pb-2 pt-1 text-center",children:[s.jsx("h1",{className:"font-serif text-3xl font-bold text-foreground","data-testid":"text-dog-name",children:f.name}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mt-1 text-muted-foreground text-sm flex-wrap",children:[f.breed&&s.jsx("span",{"data-testid":"text-dog-breed",children:f.breed}),f.breed&&f.age&&s.jsx("span",{className:"text-primary/30",children:"|"}),f.age&&s.jsx("span",{"data-testid":"text-dog-age",children:f.age})]})]}),f.description&&s.jsx("div",{className:"px-6 pb-3 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground italic leading-relaxed","data-testid":"text-dog-description",children:['"',f.description,'"']})}),f.isAvailable&&s.jsx("div",{className:"px-6 pb-4 text-center",children:f.adoptionUrl?s.jsxs("a",{href:f.adoptionUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 w-full bg-primary text-primary-foreground px-6 py-3 rounded-lg text-base font-semibold hover:bg-primary/90 transition-colors cursor-pointer shadow-sm","data-testid":"link-adopt",children:[s.jsx(sr,{className:"h-4 w-4"}),"Learn More & Adopt",s.jsx(kn,{className:"h-3.5 w-3.5"})]}):s.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-primary/10 text-primary px-4 py-1.5 rounded-full text-sm font-medium",children:[s.jsx(sr,{className:"h-3.5 w-3.5"}),"Available for Adoption"]})}),s.jsxs("div",{className:"border-t border-primary/10 py-2.5 px-6 flex items-center justify-center gap-2",children:[S?s.jsx(et,{className:"h-3.5 w-3.5 text-primary/60"}):s.jsx(Ve,{className:"h-3.5 w-3.5 text-primary/60"}),s.jsx("span",{className:"text-xs text-muted-foreground/70 font-serif tracking-wider",children:"Pawtrait Pals"})]})]}),b&&s.jsx("div",{className:"mt-4 print:hidden",children:s.jsx(B,{variant:"outline",className:"w-full gap-2","data-testid":"button-edit-dog",asChild:!0,children:s.jsxs(ye,{href:r?`/create?dog=${f.id}&org=${f.organizationId}`:`/create?dog=${f.id}`,children:[s.jsx(Cw,{className:"h-4 w-4"}),"Edit ",f.name,"'s Info & Style"]})})}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 print:hidden",children:[s.jsxs(B,{variant:"outline",onClick:_,disabled:l,className:"gap-2","data-testid":"button-save-pawfile",children:[l?s.jsx(oi,{className:"h-4 w-4 animate-spin"}):s.jsx(mi,{className:"h-4 w-4"}),"Save Pawfile"]}),s.jsxs(B,{variant:"outline",onClick:C,className:"gap-2","data-testid":"button-print",children:[s.jsx(Ew,{className:"h-4 w-4"}),"Print"]})]}),s.jsxs("div",{className:"mt-3 print:hidden",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Share ",f.name,"'s pawfile:"]}),s.jsx(p0,{title:w,text:j,dogId:f.id,dogName:f.name,dogBreed:f.breed||void 0,orgId:f.organizationId,adoptionUrl:f.adoptionUrl||void 0,orgWebsiteUrl:f.organizationWebsiteUrl||void 0,captureRef:o})]})]})]})]})}function CA(e){return/^401: .*Unauthorized/.test(e.message)}var rl=e=>e.type==="checkbox",oa=e=>e instanceof Date,pr=e=>e==null;const m0=e=>typeof e=="object";var It=e=>!pr(e)&&!Array.isArray(e)&&m0(e)&&!oa(e),g0=e=>It(e)&&e.target?rl(e.target)?e.target.checked:e.target.value:e,EA=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,x0=(e,t)=>e.has(EA(t)),PA=e=>{const t=e.constructor&&e.constructor.prototype;return It(t)&&t.hasOwnProperty("isPrototypeOf")},vp=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function rr(e){let t;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(vp&&(e instanceof Blob||i))&&(r||It(e)))if(t=r?[]:{},!r&&!PA(e))t=e;else for(const o in e)e.hasOwnProperty(o)&&(t[o]=rr(e[o]));else return e;return t}var ju=e=>Array.isArray(e)?e.filter(Boolean):[],At=e=>e===void 0,be=(e,t,r)=>{if(!t||!It(e))return r;const i=ju(t.split(/[,[\].]+?/)).reduce((o,l)=>pr(o)?o:o[l],e);return At(i)||i===e?At(e[t])?r:e[t]:i},Lr=e=>typeof e=="boolean",wp=e=>/^\w*$/.test(e),y0=e=>ju(e.replace(/["|']|\]/g,"").split(/\.|\[/)),dt=(e,t,r)=>{let i=-1;const o=wp(t)?[t]:y0(t),l=o.length,u=l-1;for(;++i<l;){const d=o[i];let f=r;if(i!==u){const m=e[d];f=It(m)||Array.isArray(m)?m:isNaN(+o[i+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=f,e=e[d]}};const Kc={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},as={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Fs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},v0=Be.createContext(null),Nu=()=>Be.useContext(v0),TA=e=>{const{children:t,...r}=e;return Be.createElement(v0.Provider,{value:r},t)};var w0=(e,t,r,i=!0)=>{const o={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(o,l,{get:()=>{const u=l;return t._proxyFormState[u]!==as.all&&(t._proxyFormState[u]=!i||as.all),r&&(r[u]=!0),e[u]}});return o};function RA(e){const t=Nu(),{control:r=t.control,disabled:i,name:o,exact:l}=e||{},[u,d]=Be.useState(r._formState),f=Be.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),m=Be.useRef(o);return m.current=o,Be.useEffect(()=>r._subscribe({name:m.current,formState:f.current,exact:l,callback:g=>{!i&&d({...r._formState,...g})}}),[r,i,l]),Be.useEffect(()=>{f.current.isValid&&r._setValid(!0)},[r]),Be.useMemo(()=>w0(u,r,f.current,!1),[u,r])}var ks=e=>typeof e=="string",b0=(e,t,r,i,o)=>ks(e)?(i&&t.watch.add(e),be(r,e,o)):Array.isArray(e)?e.map(l=>(i&&t.watch.add(l),be(r,l))):(i&&(t.watchAll=!0),r);function AA(e){const t=Nu(),{control:r=t.control,name:i,defaultValue:o,disabled:l,exact:u}=e||{},d=Be.useRef(i),f=Be.useRef(o);d.current=i,Be.useEffect(()=>r._subscribe({name:d.current,formState:{values:!0},exact:u,callback:v=>!l&&g(b0(d.current,r._names,v.values||r._formValues,!1,f.current))}),[r,l,u]);const[m,g]=Be.useState(r._getWatch(i,o));return Be.useEffect(()=>r._removeUnmounted()),m}function IA(e){const t=Nu(),{name:r,disabled:i,control:o=t.control,shouldUnregister:l}=e,u=x0(o._names.array,r),d=AA({control:o,name:r,defaultValue:be(o._formValues,r,be(o._defaultValues,r,e.defaultValue)),exact:!0}),f=RA({control:o,name:r,exact:!0}),m=Be.useRef(e),g=Be.useRef(o.register(r,{...e.rules,value:d,...Lr(e.disabled)?{disabled:e.disabled}:{}})),v=Be.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!be(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!be(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!be(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!be(f.validatingFields,r)},error:{enumerable:!0,get:()=>be(f.errors,r)}}),[f,r]),b=Be.useCallback(j=>g.current.onChange({target:{value:g0(j),name:r},type:Kc.CHANGE}),[r]),S=Be.useCallback(()=>g.current.onBlur({target:{value:be(o._formValues,r),name:r},type:Kc.BLUR}),[r,o._formValues]),N=Be.useCallback(j=>{const C=be(o._fields,r);C&&j&&(C._f.ref={focus:()=>j.focus(),select:()=>j.select(),setCustomValidity:_=>j.setCustomValidity(_),reportValidity:()=>j.reportValidity()})},[o._fields,r]),w=Be.useMemo(()=>({name:r,value:d,...Lr(i)||f.disabled?{disabled:f.disabled||i}:{},onChange:b,onBlur:S,ref:N}),[r,i,f.disabled,b,S,N,d]);return Be.useEffect(()=>{const j=o._options.shouldUnregister||l;o.register(r,{...m.current.rules,...Lr(m.current.disabled)?{disabled:m.current.disabled}:{}});const C=(_,P)=>{const A=be(o._fields,_);A&&A._f&&(A._f.mount=P)};if(C(r,!0),j){const _=rr(be(o._options.defaultValues,r));dt(o._defaultValues,r,_),At(be(o._formValues,r))&&dt(o._formValues,r,_)}return!u&&o.register(r),()=>{(u?j&&!o._state.action:j)?o.unregister(r):C(r,!1)}},[r,o,u,l]),Be.useEffect(()=>{o._setDisabledField({disabled:i,name:r})},[i,r,o]),Be.useMemo(()=>({field:w,formState:f,fieldState:v}),[w,f,v])}const OA=e=>e.render(IA(e));var LA=(e,t,r,i,o)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:o||!0}}:{},Po=e=>Array.isArray(e)?e:[e],Uy=()=>{let e=[];return{get observers(){return e},next:o=>{for(const l of e)l.next&&l.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(l=>l!==o)}}),unsubscribe:()=>{e=[]}}},Nf=e=>pr(e)||!m0(e);function Sn(e,t){if(Nf(e)||Nf(t))return e===t;if(oa(e)&&oa(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const o of r){const l=e[o];if(!i.includes(o))return!1;if(o!=="ref"){const u=t[o];if(oa(l)&&oa(u)||It(l)&&It(u)||Array.isArray(l)&&Array.isArray(u)?!Sn(l,u):l!==u)return!1}}return!0}var fr=e=>It(e)&&!Object.keys(e).length,bp=e=>e.type==="file",is=e=>typeof e=="function",Gc=e=>{if(!vp)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},j0=e=>e.type==="select-multiple",jp=e=>e.type==="radio",DA=e=>jp(e)||rl(e),Uh=e=>Gc(e)&&e.isConnected;function MA(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=At(e)?i++:e[t[i++]];return e}function $A(e){for(const t in e)if(e.hasOwnProperty(t)&&!At(e[t]))return!1;return!0}function Wt(e,t){const r=Array.isArray(t)?t:wp(t)?[t]:y0(t),i=r.length===1?e:MA(e,r),o=r.length-1,l=r[o];return i&&delete i[l],o!==0&&(It(i)&&fr(i)||Array.isArray(i)&&$A(i))&&Wt(e,r.slice(0,-1)),e}var N0=e=>{for(const t in e)if(is(e[t]))return!0;return!1};function Qc(e,t={}){const r=Array.isArray(e);if(It(e)||r)for(const i in e)Array.isArray(e[i])||It(e[i])&&!N0(e[i])?(t[i]=Array.isArray(e[i])?[]:{},Qc(e[i],t[i])):pr(e[i])||(t[i]=!0);return t}function S0(e,t,r){const i=Array.isArray(e);if(It(e)||i)for(const o in e)Array.isArray(e[o])||It(e[o])&&!N0(e[o])?At(t)||Nf(r[o])?r[o]=Array.isArray(e[o])?Qc(e[o],[]):{...Qc(e[o])}:S0(e[o],pr(t)?{}:t[o],r[o]):r[o]=!Sn(e[o],t[o]);return r}var vo=(e,t)=>S0(e,t,Qc(t));const zy={value:!1,isValid:!1},By={value:!0,isValid:!0};var k0=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!At(e[0].attributes.value)?At(e[0].value)||e[0].value===""?By:{value:e[0].value,isValid:!0}:By:zy}return zy},_0=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>At(e)?e:t?e===""?NaN:e&&+e:r&&ks(e)?new Date(e):i?i(e):e;const Vy={isValid:!1,value:null};var C0=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Vy):Vy;function Wy(e){const t=e.ref;return bp(t)?t.files:jp(t)?C0(e.refs).value:j0(t)?[...t.selectedOptions].map(({value:r})=>r):rl(t)?k0(e.refs).value:_0(At(t.value)?e.ref.value:t.value,e)}var FA=(e,t,r,i)=>{const o={};for(const l of e){const u=be(t,l);u&&dt(o,l,u._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:i}},Yc=e=>e instanceof RegExp,wo=e=>At(e)?e:Yc(e)?e.source:It(e)?Yc(e.value)?e.value.source:e.value:e,qy=e=>({isOnSubmit:!e||e===as.onSubmit,isOnBlur:e===as.onBlur,isOnChange:e===as.onChange,isOnAll:e===as.all,isOnTouch:e===as.onTouched});const Hy="AsyncFunction";var UA=e=>!!e&&!!e.validate&&!!(is(e.validate)&&e.validate.constructor.name===Hy||It(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Hy)),zA=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Ky=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const To=(e,t,r,i)=>{for(const o of r||Object.keys(e)){const l=be(e,o);if(l){const{_f:u,...d}=l;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],o)&&!i)return!0;if(u.ref&&t(u.ref,u.name)&&!i)return!0;if(To(d,t))break}else if(It(d)&&To(d,t))break}}};function Gy(e,t,r){const i=be(e,r);if(i||wp(r))return{error:i,name:r};const o=r.split(".");for(;o.length;){const l=o.join("."),u=be(t,l),d=be(e,l);if(u&&!Array.isArray(u)&&r!==l)return{name:r};if(d&&d.type)return{name:l,error:d};o.pop()}return{name:r}}var BA=(e,t,r,i)=>{r(e);const{name:o,...l}=e;return fr(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(u=>t[u]===(!i||as.all))},VA=(e,t,r)=>!e||!t||e===t||Po(e).some(i=>i&&(r?i===t:i.startsWith(t)||t.startsWith(i))),WA=(e,t,r,i,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?i.isOnBlur:o.isOnBlur)?!e:(r?i.isOnChange:o.isOnChange)?e:!0,qA=(e,t)=>!ju(be(e,t)).length&&Wt(e,t),HA=(e,t,r)=>{const i=Po(be(e,r));return dt(i,"root",t[r]),dt(e,r,i),e},Ac=e=>ks(e);function Qy(e,t,r="validate"){if(Ac(e)||Array.isArray(e)&&e.every(Ac)||Lr(e)&&!e)return{type:r,message:Ac(e)?e:"",ref:t}}var Xa=e=>It(e)&&!Yc(e)?e:{value:e,message:""},Yy=async(e,t,r,i,o,l)=>{const{ref:u,refs:d,required:f,maxLength:m,minLength:g,min:v,max:b,pattern:S,validate:N,name:w,valueAsNumber:j,mount:C}=e._f,_=be(r,w);if(!C||t.has(w))return{};const P=d?d[0]:u,A=T=>{o&&P.reportValidity&&(P.setCustomValidity(Lr(T)?"":T||""),P.reportValidity())},$={},E=jp(u),L=rl(u),Q=E||L,X=(j||bp(u))&&At(u.value)&&At(_)||Gc(u)&&u.value===""||_===""||Array.isArray(_)&&!_.length,ee=LA.bind(null,w,i,$),le=(T,Z,Y,ge=Fs.maxLength,K=Fs.minLength)=>{const z=T?Z:Y;$[w]={type:T?ge:K,message:z,ref:u,...ee(T?ge:K,z)}};if(l?!Array.isArray(_)||!_.length:f&&(!Q&&(X||pr(_))||Lr(_)&&!_||L&&!k0(d).isValid||E&&!C0(d).isValid)){const{value:T,message:Z}=Ac(f)?{value:!!f,message:f}:Xa(f);if(T&&($[w]={type:Fs.required,message:Z,ref:P,...ee(Fs.required,Z)},!i))return A(Z),$}if(!X&&(!pr(v)||!pr(b))){let T,Z;const Y=Xa(b),ge=Xa(v);if(!pr(_)&&!isNaN(_)){const K=u.valueAsNumber||_&&+_;pr(Y.value)||(T=K>Y.value),pr(ge.value)||(Z=K<ge.value)}else{const K=u.valueAsDate||new Date(_),z=te=>new Date(new Date().toDateString()+" "+te),U=u.type=="time",G=u.type=="week";ks(Y.value)&&_&&(T=U?z(_)>z(Y.value):G?_>Y.value:K>new Date(Y.value)),ks(ge.value)&&_&&(Z=U?z(_)<z(ge.value):G?_<ge.value:K<new Date(ge.value))}if((T||Z)&&(le(!!T,Y.message,ge.message,Fs.max,Fs.min),!i))return A($[w].message),$}if((m||g)&&!X&&(ks(_)||l&&Array.isArray(_))){const T=Xa(m),Z=Xa(g),Y=!pr(T.value)&&_.length>+T.value,ge=!pr(Z.value)&&_.length<+Z.value;if((Y||ge)&&(le(Y,T.message,Z.message),!i))return A($[w].message),$}if(S&&!X&&ks(_)){const{value:T,message:Z}=Xa(S);if(Yc(T)&&!_.match(T)&&($[w]={type:Fs.pattern,message:Z,ref:u,...ee(Fs.pattern,Z)},!i))return A(Z),$}if(N){if(is(N)){const T=await N(_,r),Z=Qy(T,P);if(Z&&($[w]={...Z,...ee(Fs.validate,Z.message)},!i))return A(Z.message),$}else if(It(N)){let T={};for(const Z in N){if(!fr(T)&&!i)break;const Y=Qy(await N[Z](_,r),P,Z);Y&&(T={...Y,...ee(Z,Y.message)},A(Y.message),i&&($[w]=T))}if(!fr(T)&&($[w]={ref:P,...T},!i))return $}}return A(!0),$};const KA={mode:as.onSubmit,reValidateMode:as.onChange,shouldFocusError:!0};function GA(e={}){let t={...KA,...e},r={submitCount:0,isDirty:!1,isLoading:is(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const i={};let o=It(t.defaultValues)||It(t.values)?rr(t.values||t.defaultValues)||{}:{},l=t.shouldUnregister?{}:rr(o),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,m=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...g};const b={array:Uy(),state:Uy()},S=qy(t.mode),N=qy(t.reValidateMode),w=t.criteriaMode===as.all,j=O=>q=>{clearTimeout(m),m=setTimeout(O,q)},C=async O=>{if(!t.disabled&&(g.isValid||v.isValid||O)){const q=t.resolver?fr((await X()).errors):await le(i,!0);q!==r.isValid&&b.state.next({isValid:q})}},_=(O,q)=>{!t.disabled&&(g.isValidating||g.validatingFields||v.isValidating||v.validatingFields)&&((O||Array.from(d.mount)).forEach(J=>{J&&(q?dt(r.validatingFields,J,q):Wt(r.validatingFields,J))}),b.state.next({validatingFields:r.validatingFields,isValidating:!fr(r.validatingFields)}))},P=(O,q=[],J,me,pe=!0,de=!0)=>{if(me&&J&&!t.disabled){if(u.action=!0,de&&Array.isArray(be(i,O))){const Se=J(be(i,O),me.argA,me.argB);pe&&dt(i,O,Se)}if(de&&Array.isArray(be(r.errors,O))){const Se=J(be(r.errors,O),me.argA,me.argB);pe&&dt(r.errors,O,Se),qA(r.errors,O)}if((g.touchedFields||v.touchedFields)&&de&&Array.isArray(be(r.touchedFields,O))){const Se=J(be(r.touchedFields,O),me.argA,me.argB);pe&&dt(r.touchedFields,O,Se)}(g.dirtyFields||v.dirtyFields)&&(r.dirtyFields=vo(o,l)),b.state.next({name:O,isDirty:Z(O,q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else dt(l,O,q)},A=(O,q)=>{dt(r.errors,O,q),b.state.next({errors:r.errors})},$=O=>{r.errors=O,b.state.next({errors:r.errors,isValid:!1})},E=(O,q,J,me)=>{const pe=be(i,O);if(pe){const de=be(l,O,At(J)?be(o,O):J);At(de)||me&&me.defaultChecked||q?dt(l,O,q?de:Wy(pe._f)):K(O,de),u.mount&&C()}},L=(O,q,J,me,pe)=>{let de=!1,Se=!1;const Xe={name:O};if(!t.disabled){if(!J||me){(g.isDirty||v.isDirty)&&(Se=r.isDirty,r.isDirty=Xe.isDirty=Z(),de=Se!==Xe.isDirty);const ct=Sn(be(o,O),q);Se=!!be(r.dirtyFields,O),ct?Wt(r.dirtyFields,O):dt(r.dirtyFields,O,!0),Xe.dirtyFields=r.dirtyFields,de=de||(g.dirtyFields||v.dirtyFields)&&Se!==!ct}if(J){const ct=be(r.touchedFields,O);ct||(dt(r.touchedFields,O,J),Xe.touchedFields=r.touchedFields,de=de||(g.touchedFields||v.touchedFields)&&ct!==J)}de&&pe&&b.state.next(Xe)}return de?Xe:{}},Q=(O,q,J,me)=>{const pe=be(r.errors,O),de=(g.isValid||v.isValid)&&Lr(q)&&r.isValid!==q;if(t.delayError&&J?(f=j(()=>A(O,J)),f(t.delayError)):(clearTimeout(m),f=null,J?dt(r.errors,O,J):Wt(r.errors,O)),(J?!Sn(pe,J):pe)||!fr(me)||de){const Se={...me,...de&&Lr(q)?{isValid:q}:{},errors:r.errors,name:O};r={...r,...Se},b.state.next(Se)}},X=async O=>{_(O,!0);const q=await t.resolver(l,t.context,FA(O||d.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return _(O),q},ee=async O=>{const{errors:q}=await X(O);if(O)for(const J of O){const me=be(q,J);me?dt(r.errors,J,me):Wt(r.errors,J)}else r.errors=q;return q},le=async(O,q,J={valid:!0})=>{for(const me in O){const pe=O[me];if(pe){const{_f:de,...Se}=pe;if(de){const Xe=d.array.has(de.name),ct=pe._f&&UA(pe._f);ct&&g.validatingFields&&_([me],!0);const ft=await Yy(pe,d.disabled,l,w,t.shouldUseNativeValidation&&!q,Xe);if(ct&&g.validatingFields&&_([me]),ft[de.name]&&(J.valid=!1,q))break;!q&&(be(ft,de.name)?Xe?HA(r.errors,ft,de.name):dt(r.errors,de.name,ft[de.name]):Wt(r.errors,de.name))}!fr(Se)&&await le(Se,q,J)}}return J.valid},T=()=>{for(const O of d.unMount){const q=be(i,O);q&&(q._f.refs?q._f.refs.every(J=>!Uh(J)):!Uh(q._f.ref))&&Pe(O)}d.unMount=new Set},Z=(O,q)=>!t.disabled&&(O&&q&&dt(l,O,q),!Sn(I(),o)),Y=(O,q,J)=>b0(O,d,{...u.mount?l:At(q)?o:ks(O)?{[O]:q}:q},J,q),ge=O=>ju(be(u.mount?l:o,O,t.shouldUnregister?be(o,O,[]):[])),K=(O,q,J={})=>{const me=be(i,O);let pe=q;if(me){const de=me._f;de&&(!de.disabled&&dt(l,O,_0(q,de)),pe=Gc(de.ref)&&pr(q)?"":q,j0(de.ref)?[...de.ref.options].forEach(Se=>Se.selected=pe.includes(Se.value)):de.refs?rl(de.ref)?de.refs.length>1?de.refs.forEach(Se=>(!Se.defaultChecked||!Se.disabled)&&(Se.checked=Array.isArray(pe)?!!pe.find(Xe=>Xe===Se.value):pe===Se.value)):de.refs[0]&&(de.refs[0].checked=!!pe):de.refs.forEach(Se=>Se.checked=Se.value===pe):bp(de.ref)?de.ref.value="":(de.ref.value=pe,de.ref.type||b.state.next({name:O,values:rr(l)})))}(J.shouldDirty||J.shouldTouch)&&L(O,pe,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&D(O)},z=(O,q,J)=>{for(const me in q){const pe=q[me],de=`${O}.${me}`,Se=be(i,de);(d.array.has(O)||It(pe)||Se&&!Se._f)&&!oa(pe)?z(de,pe,J):K(de,pe,J)}},U=(O,q,J={})=>{const me=be(i,O),pe=d.array.has(O),de=rr(q);dt(l,O,de),pe?(b.array.next({name:O,values:rr(l)}),(g.isDirty||g.dirtyFields||v.isDirty||v.dirtyFields)&&J.shouldDirty&&b.state.next({name:O,dirtyFields:vo(o,l),isDirty:Z(O,de)})):me&&!me._f&&!pr(de)?z(O,de,J):K(O,de,J),Ky(O,d)&&b.state.next({...r}),b.state.next({name:u.mount?O:void 0,values:rr(l)})},G=async O=>{u.mount=!0;const q=O.target;let J=q.name,me=!0;const pe=be(i,J),de=Se=>{me=Number.isNaN(Se)||oa(Se)&&isNaN(Se.getTime())||Sn(Se,be(l,J,Se))};if(pe){let Se,Xe;const ct=q.type?Wy(pe._f):g0(O),ft=O.type===Kc.BLUR||O.type===Kc.FOCUS_OUT,vr=!zA(pe._f)&&!t.resolver&&!be(r.errors,J)&&!pe._f.deps||WA(ft,be(r.touchedFields,J),r.isSubmitted,N,S),hs=Ky(J,d,ft);dt(l,J,ct),ft?(pe._f.onBlur&&pe._f.onBlur(O),f&&f(0)):pe._f.onChange&&pe._f.onChange(O);const fs=L(J,ct,ft),ya=!fr(fs)||hs;if(!ft&&b.state.next({name:J,type:O.type,values:rr(l)}),vr)return(g.isValid||v.isValid)&&(t.mode==="onBlur"?ft&&C():ft||C()),ya&&b.state.next({name:J,...hs?{}:fs});if(!ft&&hs&&b.state.next({...r}),t.resolver){const{errors:cr}=await X([J]);if(de(ct),me){const Dn=Gy(r.errors,i,J),ps=Gy(cr,i,Dn.name||J);Se=ps.error,J=ps.name,Xe=fr(cr)}}else _([J],!0),Se=(await Yy(pe,d.disabled,l,w,t.shouldUseNativeValidation))[J],_([J]),de(ct),me&&(Se?Xe=!1:(g.isValid||v.isValid)&&(Xe=await le(i,!0)));me&&(pe._f.deps&&D(pe._f.deps),Q(J,Xe,Se,fs))}},te=(O,q)=>{if(be(r.errors,q)&&O.focus)return O.focus(),1},D=async(O,q={})=>{let J,me;const pe=Po(O);if(t.resolver){const de=await ee(At(O)?O:pe);J=fr(de),me=O?!pe.some(Se=>be(de,Se)):J}else O?(me=(await Promise.all(pe.map(async de=>{const Se=be(i,de);return await le(Se&&Se._f?{[de]:Se}:Se)}))).every(Boolean),!(!me&&!r.isValid)&&C()):me=J=await le(i);return b.state.next({...!ks(O)||(g.isValid||v.isValid)&&J!==r.isValid?{}:{name:O},...t.resolver||!O?{isValid:J}:{},errors:r.errors}),q.shouldFocus&&!me&&To(i,te,O?pe:d.mount),me},I=O=>{const q={...u.mount?l:o};return At(O)?q:ks(O)?be(q,O):O.map(J=>be(q,J))},fe=(O,q)=>({invalid:!!be((q||r).errors,O),isDirty:!!be((q||r).dirtyFields,O),error:be((q||r).errors,O),isValidating:!!be(r.validatingFields,O),isTouched:!!be((q||r).touchedFields,O)}),ue=O=>{O&&Po(O).forEach(q=>Wt(r.errors,q)),b.state.next({errors:O?r.errors:{}})},xe=(O,q,J)=>{const me=(be(i,O,{_f:{}})._f||{}).ref,pe=be(r.errors,O)||{},{ref:de,message:Se,type:Xe,...ct}=pe;dt(r.errors,O,{...ct,...q,ref:me}),b.state.next({name:O,errors:r.errors,isValid:!1}),J&&J.shouldFocus&&me&&me.focus&&me.focus()},ve=(O,q)=>is(O)?b.state.subscribe({next:J=>O(Y(void 0,q),J)}):Y(O,q,!0),ae=O=>b.state.subscribe({next:q=>{VA(O.name,q.name,O.exact)&&BA(q,O.formState||g,Fe,O.reRenderRoot)&&O.callback({values:{...l},...r,...q})}}).unsubscribe,we=O=>(u.mount=!0,v={...v,...O.formState},ae({...O,formState:v})),Pe=(O,q={})=>{for(const J of O?Po(O):d.mount)d.mount.delete(J),d.array.delete(J),q.keepValue||(Wt(i,J),Wt(l,J)),!q.keepError&&Wt(r.errors,J),!q.keepDirty&&Wt(r.dirtyFields,J),!q.keepTouched&&Wt(r.touchedFields,J),!q.keepIsValidating&&Wt(r.validatingFields,J),!t.shouldUnregister&&!q.keepDefaultValue&&Wt(o,J);b.state.next({values:rr(l)}),b.state.next({...r,...q.keepDirty?{isDirty:Z()}:{}}),!q.keepIsValid&&C()},Ae=({disabled:O,name:q})=>{(Lr(O)&&u.mount||O||d.disabled.has(q))&&(O?d.disabled.add(q):d.disabled.delete(q))},Qe=(O,q={})=>{let J=be(i,O);const me=Lr(q.disabled)||Lr(t.disabled);return dt(i,O,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:O}},name:O,mount:!0,...q}}),d.mount.add(O),J?Ae({disabled:Lr(q.disabled)?q.disabled:t.disabled,name:O}):E(O,!0,q.value),{...me?{disabled:q.disabled||t.disabled}:{},...t.progressive?{required:!!q.required,min:wo(q.min),max:wo(q.max),minLength:wo(q.minLength),maxLength:wo(q.maxLength),pattern:wo(q.pattern)}:{},name:O,onChange:G,onBlur:G,ref:pe=>{if(pe){Qe(O,q),J=be(i,O);const de=At(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,Se=DA(de),Xe=J._f.refs||[];if(Se?Xe.find(ct=>ct===de):de===J._f.ref)return;dt(i,O,{_f:{...J._f,...Se?{refs:[...Xe.filter(Uh),de,...Array.isArray(be(o,O))?[{}]:[]],ref:{type:de.type,name:O}}:{ref:de}}}),E(O,!1,void 0,de)}else J=be(i,O,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||q.shouldUnregister)&&!(x0(d.array,O)&&u.action)&&d.unMount.add(O)}}},Te=()=>t.shouldFocusError&&To(i,te,d.mount),Je=O=>{Lr(O)&&(b.state.next({disabled:O}),To(i,(q,J)=>{const me=be(i,J);me&&(q.disabled=me._f.disabled||O,Array.isArray(me._f.refs)&&me._f.refs.forEach(pe=>{pe.disabled=me._f.disabled||O}))},0,!1))},re=(O,q)=>async J=>{let me;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let pe=rr(l);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:de,values:Se}=await X();r.errors=de,pe=Se}else await le(i);if(d.disabled.size)for(const de of d.disabled)dt(pe,de,void 0);if(Wt(r.errors,"root"),fr(r.errors)){b.state.next({errors:{}});try{await O(pe,J)}catch(de){me=de}}else q&&await q({...r.errors},J),Te(),setTimeout(Te);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:fr(r.errors)&&!me,submitCount:r.submitCount+1,errors:r.errors}),me)throw me},Ke=(O,q={})=>{be(i,O)&&(At(q.defaultValue)?U(O,rr(be(o,O))):(U(O,q.defaultValue),dt(o,O,rr(q.defaultValue))),q.keepTouched||Wt(r.touchedFields,O),q.keepDirty||(Wt(r.dirtyFields,O),r.isDirty=q.defaultValue?Z(O,rr(be(o,O))):Z()),q.keepError||(Wt(r.errors,O),g.isValid&&C()),b.state.next({...r}))},ht=(O,q={})=>{const J=O?rr(O):o,me=rr(J),pe=fr(O),de=pe?o:me;if(q.keepDefaultValues||(o=J),!q.keepValues){if(q.keepDirtyValues){const Se=new Set([...d.mount,...Object.keys(vo(o,l))]);for(const Xe of Array.from(Se))be(r.dirtyFields,Xe)?dt(de,Xe,be(l,Xe)):U(Xe,be(de,Xe))}else{if(vp&&At(O))for(const Se of d.mount){const Xe=be(i,Se);if(Xe&&Xe._f){const ct=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(Gc(ct)){const ft=ct.closest("form");if(ft){ft.reset();break}}}}for(const Se of d.mount)U(Se,be(de,Se))}l=rr(de),b.array.next({values:{...de}}),b.state.next({values:{...de}})}d={mount:q.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!q.keepIsValid||!!q.keepDirtyValues,u.watch=!!t.shouldUnregister,b.state.next({submitCount:q.keepSubmitCount?r.submitCount:0,isDirty:pe?!1:q.keepDirty?r.isDirty:!!(q.keepDefaultValues&&!Sn(O,o)),isSubmitted:q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:pe?{}:q.keepDirtyValues?q.keepDefaultValues&&l?vo(o,l):r.dirtyFields:q.keepDefaultValues&&O?vo(o,O):q.keepDirty?r.dirtyFields:{},touchedFields:q.keepTouched?r.touchedFields:{},errors:q.keepErrors?r.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},lr=(O,q)=>ht(is(O)?O(l):O,q),se=(O,q={})=>{const J=be(i,O),me=J&&J._f;if(me){const pe=me.refs?me.refs[0]:me.ref;pe.focus&&(pe.focus(),q.shouldSelect&&is(pe.select)&&pe.select())}},Fe=O=>{r={...r,...O}},Ut={control:{register:Qe,unregister:Pe,getFieldState:fe,handleSubmit:re,setError:xe,_subscribe:ae,_runSchema:X,_getWatch:Y,_getDirty:Z,_setValid:C,_setFieldArray:P,_setDisabledField:Ae,_setErrors:$,_getFieldArray:ge,_reset:ht,_resetDefaultValues:()=>is(t.defaultValues)&&t.defaultValues().then(O=>{lr(O,t.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:Je,_subjects:b,_proxyFormState:g,get _fields(){return i},get _formValues(){return l},get _state(){return u},set _state(O){u=O},get _defaultValues(){return o},get _names(){return d},set _names(O){d=O},get _formState(){return r},get _options(){return t},set _options(O){t={...t,...O}}},subscribe:we,trigger:D,register:Qe,handleSubmit:re,watch:ve,setValue:U,getValues:I,reset:lr,resetField:Ke,clearErrors:ue,unregister:Pe,setError:xe,setFocus:se,getFieldState:fe};return{...Ut,formControl:Ut}}function E0(e={}){const t=Be.useRef(void 0),r=Be.useRef(void 0),[i,o]=Be.useState({isDirty:!1,isValidating:!1,isLoading:is(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:is(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:GA(e),formState:i},e.formControl&&e.defaultValues&&!is(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const l=t.current.control;return l._options=e,Be.useLayoutEffect(()=>l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0}),[l]),Be.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),Be.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==i.isDirty&&l._subjects.state.next({isDirty:u})}},[l,i.isDirty]),Be.useEffect(()=>{e.values&&!Sn(e.values,r.current)?(l._reset(e.values,l._options.resetOptions),r.current=e.values,o(u=>({...u}))):l._resetDefaultValues()},[e.values,l]),Be.useEffect(()=>{e.errors&&!fr(e.errors)&&l._setErrors(e.errors)},[e.errors,l]),Be.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),Be.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[e.shouldUnregister,l]),t.current.formState=w0(i,l),t.current}var QA="Label",P0=x.forwardRef((e,t)=>s.jsx(Ge.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));P0.displayName=QA;var T0=P0;const YA=Yo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),zs=x.forwardRef(({className:e,...t},r)=>s.jsx(T0,{ref:r,className:Le(YA(),e),...t}));zs.displayName=T0.displayName;const R0=TA,A0=x.createContext({}),hi=({...e})=>s.jsx(A0.Provider,{value:{name:e.name},children:s.jsx(OA,{...e})}),Su=()=>{const e=x.useContext(A0),t=x.useContext(I0),{getFieldState:r,formState:i}=Nu(),o=r(e.name,i);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:l}=t;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...o}},I0=x.createContext({}),la=x.forwardRef(({className:e,...t},r)=>{const i=x.useId();return s.jsx(I0.Provider,{value:{id:i},children:s.jsx("div",{ref:r,className:Le("space-y-2",e),...t})})});la.displayName="FormItem";const Ic=x.forwardRef(({className:e,...t},r)=>{const{error:i,formItemId:o}=Su();return s.jsx(zs,{ref:r,className:Le(i&&"text-destructive",e),htmlFor:o,...t})});Ic.displayName="FormLabel";const ca=x.forwardRef(({...e},t)=>{const{error:r,formItemId:i,formDescriptionId:o,formMessageId:l}=Su();return s.jsx(Qv,{ref:t,id:i,"aria-describedby":r?`${o} ${l}`:`${o}`,"aria-invalid":!!r,...e})});ca.displayName="FormControl";const JA=x.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:i}=Su();return s.jsx("p",{ref:r,id:i,className:Le("text-sm text-muted-foreground",e),...t})});JA.displayName="FormDescription";const Ro=x.forwardRef(({className:e,children:t,...r},i)=>{const{error:o,formMessageId:l}=Su(),u=o?String(o?.message??""):t;return u?s.jsx("p",{ref:i,id:l,className:Le("text-sm font-medium text-destructive",e),...r,children:u}):null});Ro.displayName="FormMessage";const kt=256,bo=256;function Np({open:e,imageSrc:t,onApply:r,onCancel:i}){const o=x.useRef(null),[l,u]=x.useState(null),[d,f]=x.useState(1),[m,g]=x.useState({x:0,y:0}),[v,b]=x.useState(!1),S=x.useRef({x:0,y:0}),N=x.useRef({x:0,y:0});x.useEffect(()=>{if(!t){u(null);return}const E=new Image;E.onload=()=>{u(E);const L=kt/Math.min(E.width,E.height);f(L),g({x:(kt-E.width*L)/2,y:(kt-E.height*L)/2})},E.src=t},[t]);const w=x.useCallback(()=>{const E=o.current,L=E?.getContext("2d");!E||!L||!l||(L.clearRect(0,0,kt,kt),L.save(),L.beginPath(),L.arc(kt/2,kt/2,kt/2,0,Math.PI*2),L.closePath(),L.clip(),L.drawImage(l,m.x,m.y,l.width*d,l.height*d),L.restore(),L.beginPath(),L.arc(kt/2,kt/2,kt/2-1,0,Math.PI*2),L.strokeStyle="rgba(139, 92, 246, 0.5)",L.lineWidth=2,L.stroke())},[l,d,m]);x.useEffect(()=>{w()},[w]);const j=E=>{b(!0),S.current={x:E.clientX,y:E.clientY},N.current={...m},E.target.setPointerCapture(E.pointerId)},C=E=>{v&&g({x:N.current.x+(E.clientX-S.current.x),y:N.current.y+(E.clientY-S.current.y)})},_=()=>b(!1),P=E=>{if(!l)return;const L=kt/Math.max(l.width,l.height)*.5,Q=kt/Math.min(l.width,l.height)*4,X=Math.max(L,Math.min(Q,d+E)),ee=kt/2,le=kt/2,T=X/d;g({x:ee-(ee-m.x)*T,y:le-(le-m.y)*T}),f(X)},A=E=>{E.preventDefault(),P(E.deltaY<0?.05:-.05)},$=()=>{if(!l)return;const E=document.createElement("canvas");E.width=bo,E.height=bo;const L=E.getContext("2d");L&&(L.beginPath(),L.arc(bo/2,bo/2,bo/2,0,Math.PI*2),L.closePath(),L.clip(),L.drawImage(l,m.x,m.y,l.width*d,l.height*d),r(E.toDataURL("image/png")))};return s.jsx(Wo,{open:e,onOpenChange:E=>{E||i()},children:s.jsxs(wi,{className:"sm:max-w-md",children:[s.jsxs(bi,{children:[s.jsx(ji,{children:"Crop Logo"}),s.jsx(Ni,{children:"Drag to reposition. Scroll or use buttons to zoom. Your logo will be displayed as a circle."})]}),s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"relative rounded-full overflow-hidden border-2 border-primary/30 bg-muted",style:{width:kt,height:kt,cursor:v?"grabbing":"grab",touchAction:"none"},children:s.jsx("canvas",{ref:o,width:kt,height:kt,onPointerDown:j,onPointerMove:C,onPointerUp:_,onWheel:A})}),s.jsxs("div",{className:"flex items-center gap-3 w-full max-w-[256px]",children:[s.jsx(B,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>P(-.1),children:s.jsx(wE,{className:"h-4 w-4"})}),s.jsx("input",{type:"range",min:l?kt/Math.max(l.width,l.height)*.5:.1,max:l?kt/Math.min(l.width,l.height)*4:5,step:.01,value:d,onChange:E=>{const L=parseFloat(E.target.value),Q=kt/2,X=kt/2,ee=L/d;g({x:Q-(Q-m.x)*ee,y:X-(X-m.y)*ee}),f(L)},className:"w-full accent-primary"}),s.jsx(B,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>P(.1),children:s.jsx(vE,{className:"h-4 w-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(iE,{className:"h-3 w-3"})," Drag to position, scroll to zoom"]})]}),s.jsxs(xp,{children:[s.jsx(B,{variant:"outline",onClick:i,children:"Cancel"}),s.jsx(B,{onClick:$,children:"Apply"})]})]})})}function XA(){const[,e]=An(),{user:t,isLoading:r,isAuthenticated:i,isAdmin:o,logout:l,isLoggingOut:u}=yr(),{toast:d}=Pr(),[f,m]=x.useState(()=>{const K=new URLSearchParams(window.location.search).get("org");return K?parseInt(K):null}),[g,v]=x.useState(!1);x.useEffect(()=>{const K=new URLSearchParams(window.location.search);if(K.get("subscription")==="success"){const z=K.get("session_id"),U=K.get("plan"),G=()=>{tt.invalidateQueries({queryKey:["/api/my-organization"]}),tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]}),tt.invalidateQueries({queryKey:["/api/plans"]}),d({title:"Subscription active!",description:"Your plan is now active. Let's get you set up!"});const I=K.get("orgId");e(I?`/admin/rescue/${I}`:"/onboarding")},te=K.get("orgId"),D=K.get("testMode");if(z&&U){const I={sessionId:z,planId:parseInt(U)};te&&(I.orgId=parseInt(te)),D==="true"&&(I.testMode=!0),$t("POST","/api/stripe/confirm-checkout",I).then(G).catch(G)}else G()}},[]);const{data:b,isLoading:S}=ut({queryKey:["/api/my-organization"],enabled:i}),{data:N=[]}=ut({queryKey:["/api/admin/organizations"],enabled:i&&o,staleTime:0});x.useEffect(()=>{if(!r&&i&&o&&!S){if(f)return;e("/admin")}},[i,r,o,S,f,e]);const w=o?N.find(K=>K.id===f)||null:b||null,j=o&&f?["/api/admin/organizations",f,"dogs"]:["/api/my-dogs"],C=o&&f?`/api/admin/organizations/${f}/dogs`:"/api/my-dogs",{data:_=[],isLoading:P}=ut({queryKey:j,queryFn:async()=>{const K=await mr(),z=await fetch(C,{headers:K});if(!z.ok)throw new Error("Failed to fetch dogs");return z.json()},enabled:i&&(o?!!f:!!b)}),[A,$]=x.useState(null),E=E0({defaultValues:{name:"",description:"",websiteUrl:""}}),L=Ft({mutationFn:async K=>(await $t("POST","/api/my-organization",{...K,logoUrl:A})).json(),onSuccess:K=>{tt.invalidateQueries({queryKey:["/api/my-organization"]}),v(!1),d({title:"Organization created!",description:"Now choose a plan to get started."}),e(K?.id?`/choose-plan/${K.id}`:"/choose-plan")},onError:K=>{if(CA(K)){d({title:"Unauthorized",description:"Please log in again.",variant:"destructive"}),setTimeout(()=>{window.location.href="/login"},500);return}d({title:"Error",description:K.message,variant:"destructive"})}}),Q=Ft({mutationFn:async K=>{await $t("DELETE",`/api/dogs/${K}`)},onSuccess:()=>{tt.invalidateQueries({queryKey:j}),tt.invalidateQueries({queryKey:["/api/my-organization"]}),tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]}),d({title:"Pet removed",description:"The pet has been removed."})},onError:K=>{d({title:"Error",description:K.message,variant:"destructive"})}}),X=o?f?N.find(K=>K.id===f):null:b,ee=X&&!X.planId&&X.subscriptionStatus==="inactive",le=X?.name&&X?.speciesHandled&&X?.planId,T=X&&X.planId&&!X.onboardingCompleted&&!le;if(x.useEffect(()=>{ee&&i&&X?e(`/choose-plan/${X.id}`):T&&i&&X&&e(o?`/onboarding/${X.id}`:"/onboarding")},[ee,T,i,X,e]),r)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-primary animate-pulse"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});const Z=!i||!S&&!w&&!g&&!(o&&!f),Y=i&&!!w&&!ee,ge=w?.trialEndsAt?Math.max(0,Math.ceil((new Date(w.trialEndsAt).getTime()-Date.now())/(1e3*60*60*24))):0;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home-dashboard",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{variant:"ghost",size:"sm","data-testid":"link-gallery-dashboard",asChild:!0,children:s.jsx(ye,{href:"/gallery",children:"Gallery"})}),o&&f&&s.jsx(B,{variant:"outline",size:"sm",className:"gap-1","data-testid":"button-back-to-admin",asChild:!0,children:s.jsxs(ye,{href:"/admin",children:[s.jsx(Vs,{className:"h-3 w-3"}),"Admin Panel"]})}),i?s.jsxs("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l",children:[s.jsxs(Ns,{className:"h-8 w-8",children:[s.jsx(Hr,{src:t?.profileImageUrl||void 0,alt:t?.firstName||"User"}),s.jsx(Ss,{children:t?.firstName?.[0]||t?.email?.[0]||"U"})]}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t?.firstName||t?.email?.split("@")[0]}),s.jsx(B,{variant:"ghost",size:"icon","data-testid":"button-logout",onClick:()=>l(),disabled:u,children:s.jsx(zo,{className:"h-4 w-4"})}),s.jsx(gr,{})]}):s.jsx("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l",children:s.jsx(gr,{})})]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:S?s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx(Kt,{className:"h-32 w-full"}),s.jsx(Kt,{className:"h-64 w-full"})]}):g&&i?s.jsx(t4,{form:E,mutation:L,onBack:()=>v(!1),logoData:A,onLogoChange:$}):Z?s.jsx(ZA,{isAuthenticated:i,onCreateNew:()=>{i?v(!0):window.location.href="/login"}}):Y?s.jsx(r4,{organization:w,dogs:_,dogsLoading:P,trialDaysRemaining:ge,isAdmin:o,onDeleteDog:K=>{confirm("Are you sure you want to remove this dog?")&&Q.mutate(K)}}):null}),s.jsx(xa,{})]})}function ZA({isAuthenticated:e,onCreateNew:t}){return s.jsx("div",{className:"max-w-xl mx-auto pt-8",children:s.jsxs(_e,{children:[s.jsxs(Mt,{className:"text-center",children:[s.jsx(sr,{className:"h-14 w-14 mx-auto mb-4 text-primary"}),s.jsx(qt,{className:"text-2xl font-serif",children:"Welcome to Pawtrait Pals"}),s.jsx(_r,{className:"text-base",children:"Transform your rescue pets into stunning AI art portraits to help them find forever homes."})]}),s.jsx(Ee,{className:"space-y-4",children:e?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-center text-muted-foreground text-sm",children:"You're logged in but don't have a rescue organization yet. Create one to get started, or log in with a different account if your rescue is already set up."}),s.jsxs("div",{className:"grid gap-3",children:[s.jsxs(B,{className:"w-full gap-2",onClick:t,"data-testid":"button-create-rescue",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Create a New Rescue"]}),s.jsx("a",{href:"/login",className:"block",children:s.jsxs(B,{variant:"outline",className:"w-full gap-2","data-testid":"button-switch-account",children:[s.jsx(cy,{className:"h-4 w-4"}),"Log In With a Different Account"]})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-center text-muted-foreground text-sm",children:"Log in to manage your rescue's pets and portraits, or create a new rescue organization."}),s.jsxs("div",{className:"grid gap-3",children:[s.jsx("a",{href:"/login",className:"block",children:s.jsxs(B,{className:"w-full gap-2","data-testid":"button-login-rescue",children:[s.jsx(cy,{className:"h-4 w-4"}),"Log In to Your Rescue"]})}),s.jsxs(B,{variant:"outline",className:"w-full gap-2",onClick:t,"data-testid":"button-create-rescue",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Create a New Rescue"]})]})]})})]})})}function e4({logoData:e,onLogoChange:t}){const{toast:r}=Pr(),[i,o]=x.useState(!1),[l,u]=x.useState(null),d=f=>{if(!["image/jpeg","image/png","image/webp"].includes(f.type)){r({title:"Unsupported format",description:"Please use JPG, PNG, or WebP.",variant:"destructive"});return}if(f.size>5*1024*1024){r({title:"File too large",description:"Logo must be under 5 MB.",variant:"destructive"});return}const m=new FileReader;m.onload=g=>{const v=g.target?.result;v&&(u(v),o(!0))},m.readAsDataURL(f)};return s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium text-center",children:"Logo (optional)"}),e?s.jsxs("div",{className:"relative",children:[s.jsxs(Ns,{className:"h-24 w-24",children:[s.jsx(Hr,{src:e,alt:"Organization logo","data-testid":"img-org-logo-preview"}),s.jsx(Ss,{children:s.jsx(En,{className:"h-8 w-8"})})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[s.jsxs("label",{children:[s.jsx("input",{type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:f=>{f.target.files?.[0]&&(d(f.target.files[0]),f.target.value="")},"data-testid":"input-logo-replace"}),s.jsx(B,{asChild:!0,variant:"outline",size:"sm",className:"gap-1 cursor-pointer",children:s.jsxs("span",{children:[s.jsx(gi,{className:"h-3 w-3"})," Replace"]})})]}),s.jsxs(B,{variant:"ghost",size:"sm",className:"gap-1 text-destructive",onClick:()=>t(null),"data-testid":"button-clear-logo",children:[s.jsx(In,{className:"h-3 w-3"})," Remove"]})]})]}):s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:f=>{f.target.files?.[0]&&(d(f.target.files[0]),f.target.value="")},"data-testid":"input-logo-upload"}),s.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-dashed border-border flex items-center justify-center hover-elevate transition-colors",children:s.jsx(gi,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-1",children:"Upload logo"})]}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"JPG, PNG, or WebP. You can crop after upload."}),s.jsx(Np,{open:i,imageSrc:l,onApply:f=>{t(f),o(!1),u(null)},onCancel:()=>{o(!1),u(null)}})]})}function t4({form:e,mutation:t,onBack:r,logoData:i,onLogoChange:o}){return s.jsxs("div",{className:"max-w-xl mx-auto",children:[s.jsxs(B,{variant:"ghost",className:"gap-1 mb-4",onClick:r,"data-testid":"button-back-to-welcome",children:[s.jsx(Er,{className:"h-4 w-4"}),"Back"]}),s.jsxs(_e,{children:[s.jsxs(Mt,{className:"text-center",children:[s.jsx(En,{className:"h-12 w-12 mx-auto mb-4 text-primary"}),s.jsx(qt,{children:"Set Up Your Rescue"}),s.jsx(_r,{children:"Create your rescue organization to start making beautiful portraits for your adoptable pets."})]}),s.jsxs(Ee,{className:"space-y-6",children:[s.jsx(e4,{logoData:i,onLogoChange:o}),s.jsx(R0,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(l=>t.mutate(l)),className:"space-y-4",children:[s.jsx(hi,{control:e.control,name:"name",rules:{required:"Organization name is required"},render:({field:l})=>s.jsxs(la,{children:[s.jsx(Ic,{children:"Organization Name"}),s.jsx(ca,{children:s.jsx(He,{placeholder:"Happy Tails Rescue",...l,"data-testid":"input-org-name"})}),s.jsx(Ro,{})]})}),s.jsx(hi,{control:e.control,name:"description",render:({field:l})=>s.jsxs(la,{children:[s.jsx(Ic,{children:"Description"}),s.jsx(ca,{children:s.jsx(vi,{placeholder:"Tell us about your rescue organization...",...l,"data-testid":"input-org-description"})}),s.jsx(Ro,{})]})}),s.jsx(hi,{control:e.control,name:"websiteUrl",render:({field:l})=>s.jsxs(la,{children:[s.jsx(Ic,{children:"Website URL (optional)"}),s.jsx(ca,{children:s.jsx(He,{placeholder:"https://yourrescue.org",...l,"data-testid":"input-org-website"})}),s.jsx(Ro,{})]})}),s.jsx(B,{type:"submit",className:"w-full",disabled:t.isPending,"data-testid":"button-create-org",children:t.isPending?"Getting Started...":"Get Started"})]})})]})]})]})}function r4({organization:e,dogs:t,dogsLoading:r,trialDaysRemaining:i,isAdmin:o,onDeleteDog:l}){const[u,d]=x.useState(!1),{data:f}=ut({queryKey:["/api/plans"]}),m=f?.find(E=>E.id===e.planId),g=e.petLimit??m?.dogsLimit??null,v=e.basePetLimit??m?.dogsLimit??null,b=e.additionalPetSlots??0,S=e.maxAdditionalSlots??5,N=e.isPaidPlan??(m?m.priceMonthly>0:!1),w=e.petCount??t.length,j=g!=null&&w>=g,C=e.subscriptionStatus==="canceled",_=e.trialEndsAt?new Date(e.trialEndsAt):e.createdAt?new Date(new Date(e.createdAt).getTime()+720*60*60*1e3):null,P=e.subscriptionStatus==="trial"&&_&&_<new Date,A=C?"Canceled":P?"Trial Expired":m?.name||(e.subscriptionStatus==="trial"?"Free Trial":"No Plan"),$=!!e.planId&&e.subscriptionStatus!=="inactive"&&!C&&!P;return s.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[s.jsxs("div",{className:"flex flex-col items-center text-center pb-6 border-b",children:[s.jsxs(Ns,{className:"h-24 w-24 mb-4",children:[e.logoUrl?s.jsx(Hr,{src:e.logoUrl,alt:`${e.name} logo`,"data-testid":"img-org-logo"}):null,s.jsx(Ss,{className:"bg-primary/10",children:s.jsx(sr,{className:"h-12 w-12 text-primary"})})]}),s.jsxs("h1",{className:"text-2xl font-serif font-bold flex items-center gap-2","data-testid":"text-org-name",children:[s.jsx(No,{className:"h-6 w-6 text-primary"}),e.name]}),e.description&&s.jsx("p",{className:"text-muted-foreground mt-1 max-w-lg",children:e.description}),e.websiteUrl&&s.jsxs("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline mt-2","data-testid":"link-org-website",children:[s.jsx(kn,{className:"h-3 w-3"}),"Visit website"]}),s.jsx(B,{variant:"outline",size:"sm",className:"gap-2","data-testid":"button-org-settings",asChild:!0,children:s.jsxs(ye,{href:o?`/admin/rescue/${e.id}`:"/settings",className:"mt-3",children:[s.jsx(dE,{className:"h-4 w-4"}),"Rescue Settings"]})})]}),s.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:$?j?s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-destructive font-medium","data-testid":"text-pet-limit-reached",children:["Pet limit reached (",w,"/",g,")"]}),s.jsxs(B,{variant:"outline",className:"gap-2",onClick:()=>d(!0),"data-testid":"button-need-more-room",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Need More Room?"]}),s.jsx(u0,{open:u,onOpenChange:d,petCount:w,petLimit:g,basePetLimit:v??g,additionalPetSlots:b,maxAdditionalSlots:S,isPaidPlan:N,hasStripeSubscription:!!e.hasActiveSubscription,orgId:e.id,isAdmin:o})]}):s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(B,{className:"gap-2","data-testid":"button-add-pet",asChild:!0,children:s.jsxs(ye,{href:o?`/create?org=${e.id}`:"/create",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Add New Pet"]})}),s.jsx(B,{variant:"outline",className:"gap-2","data-testid":"button-import-pets",asChild:!0,children:s.jsxs(ye,{href:o?`/import?org=${e.id}`:"/import",children:[s.jsx(mi,{className:"h-4 w-4"}),"Import Pets"]})})]}):s.jsx(B,{className:"gap-2","data-testid":"button-choose-plan-to-add",asChild:!0,children:s.jsxs(ye,{href:`/choose-plan/${e.id}`,children:[s.jsx(Bs,{className:"h-4 w-4"}),"Select a Plan to Add Pets"]})})}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(_e,{children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(Ve,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsxs("p",{className:`text-2xl font-bold ${j?"text-destructive":""}`,"data-testid":"text-dog-count",children:[w,g?` / ${g}`:""]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:g?"Pets Used":"Total Pets"})]})]})})}),s.jsx(_e,{children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(ou,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold","data-testid":"text-credits-used",children:[e.portraitsUsedThisMonth||0,m?.monthlyPortraitCredits?` / ${m.monthlyPortraitCredits}`:""]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Credits Used"})]})]})})}),s.jsx(_e,{children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(Bs,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(vt,{variant:e.subscriptionStatus==="active"?"default":"secondary","data-testid":"badge-plan-status",children:A}),s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1 h-6 text-xs","data-testid":"button-change-plan",asChild:!0,children:s.jsxs(ye,{href:`/choose-plan/${e.id}`,children:[s.jsx(Bs,{className:"h-3 w-3"}),"Change Plan"]})})]}),e.subscriptionStatus==="trial"&&i>0&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i," days remaining"]}),C&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Subscription canceled - select a new plan to continue"}),P&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Free trial expired - upgrade to a paid plan to continue"}),e.subscriptionStatus==="inactive"&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select a plan to get started"})]})]})})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 gap-2 flex-wrap",children:[s.jsx("h2",{className:"text-xl font-semibold","data-testid":"text-adoptable-pets",children:"Adoptable Pets"}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.slug&&s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1","data-testid":"button-view-showcase",asChild:!0,children:s.jsxs(ye,{href:`/rescue/${e.slug}`,children:[s.jsx(Uo,{className:"h-3.5 w-3.5"}),"Rescue Showcase"]})}),s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1",asChild:!0,children:s.jsxs(ye,{href:"/gallery",children:["View Public Gallery",s.jsx(kn,{className:"h-3 w-3"})]})})]})]}),r?s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(E=>s.jsx(Kt,{className:"h-64"},E))}):t.length===0?s.jsx(_e,{className:"py-12",children:s.jsxs(Ee,{className:"text-center",children:[s.jsx(sr,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No pets yet"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:$?"Add your first rescue pet to create a beautiful portrait":"Select a plan to start adding your rescue pets"}),$?s.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap",children:[s.jsx(B,{className:"gap-2",asChild:!0,children:s.jsxs(ye,{href:o?`/create?org=${e.id}`:"/create",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Add Your First Pet"]})}),s.jsx(B,{variant:"outline",className:"gap-2",asChild:!0,children:s.jsxs(ye,{href:o?`/import?org=${e.id}`:"/import",children:[s.jsx(mi,{className:"h-4 w-4"}),"Import Pets"]})})]}):s.jsx(B,{className:"gap-2",asChild:!0,children:s.jsxs(ye,{href:`/choose-plan/${e.id}`,children:[s.jsx(Bs,{className:"h-4 w-4"}),"Choose a Plan"]})})]})}):s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(E=>s.jsxs(_e,{className:"overflow-hidden group","data-testid":`card-dog-${E.id}`,children:[s.jsx(ye,{href:`/pawfile/${E.id}`,children:s.jsxs("div",{className:"aspect-square relative bg-muted protected-image-wrapper",children:[E.portrait?.generatedImageUrl?s.jsx("img",{src:E.portrait.generatedImageUrl,alt:`${E.name} portrait`,className:"w-full h-full object-cover protected-image",draggable:!1}):E.originalPhotoUrl?s.jsx("img",{src:E.originalPhotoUrl,alt:E.name,className:"w-full h-full object-cover protected-image",draggable:!1}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:E.species==="cat"?s.jsx(et,{className:"h-16 w-16 text-muted-foreground/30"}):s.jsx(Ve,{className:"h-16 w-16 text-muted-foreground/30"})}),s.jsx("div",{className:"absolute top-0 left-0 right-0 p-3 bg-gradient-to-b from-black/70 via-black/40 to-transparent",children:s.jsx("h3",{className:"font-serif font-bold text-lg text-white drop-shadow-lg","data-testid":`text-dog-name-${E.id}`,children:E.name})}),!E.portrait?.generatedImageUrl&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center invisible group-hover:visible transition-all",children:s.jsx("span",{className:"text-white text-sm font-medium",children:"View Profile"})})]})}),s.jsxs(gu,{className:"p-3 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 w-full",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[E.breed," ",E.age?` ${E.age}`:""]})}),E.isAvailable&&s.jsx(vt,{variant:"outline",className:"shrink-0",children:"Available"}),!E.adoptionUrl&&s.jsx(vt,{variant:"outline",className:"shrink-0 border-amber-500 text-amber-600 bg-amber-50 dark:bg-amber-950/30",children:"Needs URL"}),E.adoptionUrl&&s.jsx("a",{href:E.adoptionUrl,target:"_blank",rel:"noopener noreferrer",onClick:L=>L.stopPropagation(),"data-testid":`link-adopt-${E.id}`,children:s.jsx(B,{variant:"outline",size:"icon",title:"View adoption page",children:s.jsx(kn,{className:"h-4 w-4"})})}),s.jsx(B,{variant:"ghost",size:"icon",className:"text-destructive shrink-0",onClick:L=>{L.stopPropagation(),l(E.id)},"data-testid":`button-delete-dog-${E.id}`,title:"Remove pet",children:s.jsx(Tw,{className:"h-4 w-4"})})]}),s.jsx(B,{variant:"outline",size:"sm",className:"w-full gap-2","data-testid":`button-new-portrait-${E.id}`,asChild:!0,children:s.jsxs(ye,{href:o?`/create?dog=${E.id}&org=${e.id}`:`/create?dog=${E.id}`,className:"w-full",onClick:L=>L.stopPropagation(),children:[s.jsx(_t,{className:"h-4 w-4"}),E.portrait?.generatedImageUrl?"New Portrait":`Create ${E.name}'s Portrait`]})})]})]},E.id))})]})]})}const Jy={Classical:Bs,Artistic:_w,Modern:_t,Fantasy:Fc,"Sci-Fi":Pw,Adventure:Sw,Fun:_t,Adoption:Ve,Humanizing:_t,Seasonal:_t,Celebration:_t};function s4(){const[e,t]=x.useState(null),{isAuthenticated:r}=yr(),i=e?pa.filter(o=>o.category===e):pa;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b bg-card/80 backdrop-blur-sm sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(B,{variant:"ghost",size:"sm",className:"gap-2","data-testid":"button-back-home",asChild:!0,children:s.jsxs(ye,{href:"/",children:[s.jsx(Er,{className:"h-4 w-4"}),"Back"]})}),s.jsxs("span",{className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),r?s.jsx(B,{size:"sm","data-testid":"button-create-portrait",asChild:!0,children:s.jsx(ye,{href:"/create",children:"Create Portrait"})}):s.jsx("a",{href:"/login",children:s.jsx(B,{size:"sm","data-testid":"button-get-started",children:"Get Started"})})]})})}),s.jsx(xa,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold mb-3",children:"40+ Artistic Portrait Styles"}),s.jsx("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"From Renaissance masters to modern pop art, find the perfect style to showcase your rescue pets"})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:[s.jsx(B,{variant:e===null?"default":"outline",size:"sm",onClick:()=>t(null),"data-testid":"button-category-all",children:"All Styles"}),tA.map(o=>{const l=Jy[o]||os;return s.jsxs(B,{variant:e===o?"default":"outline",size:"sm",onClick:()=>t(o),className:"gap-1","data-testid":`button-category-${o.toLowerCase().replace(/\s+/g,"-")}`,children:[s.jsx(l,{className:"h-3.5 w-3.5"}),o]},o)})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(o=>{const l=Jy[o.category]||os,u=bf[o.name];return s.jsxs(_e,{className:"overflow-hidden hover-elevate group","data-testid":`card-style-${o.id}`,children:[s.jsxs("div",{className:"aspect-square relative bg-muted protected-image-wrapper",children:[u?s.jsx("img",{src:u,alt:o.name,className:"w-full h-full object-cover protected-image",draggable:!1}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/10 to-primary/5",children:s.jsx(l,{className:"h-16 w-16 text-primary/30"})}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(vt,{variant:"secondary",className:"text-xs",children:o.category})})]}),s.jsxs(Ee,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-1",children:o.name}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o.description})]})]},o.id)})}),s.jsx("div",{className:"text-center mt-12",children:r?s.jsx(B,{size:"lg",className:"gap-2","data-testid":"button-create-portrait-cta",asChild:!0,children:s.jsxs(ye,{href:"/create",children:[s.jsx(os,{className:"h-5 w-5"}),"Create Your Portrait Now"]})}):s.jsx("a",{href:"/login",children:s.jsxs(B,{size:"lg",className:"gap-2","data-testid":"button-get-started-cta",children:[s.jsx(_t,{className:"h-5 w-5"}),"Start Your 30-Day Free Trial"]})})})]}),s.jsx("footer",{className:"py-8 border-t mt-12",children:s.jsx("div",{className:"container mx-auto px-4 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Helping rescue pets find their furever homes through beautiful AI art"})})})]})}function Xy({adminBadge:e=!0}){return s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home-admin",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e&&s.jsxs(vt,{variant:"secondary",className:"gap-1",children:[s.jsx(Vs,{className:"h-3 w-3"}),"Admin"]}),s.jsx(gr,{})]})]})})}function n4(){const[,e]=An(),{isLoading:t,isAuthenticated:r,isAdmin:i,logout:o,isLoggingOut:l}=yr(),{toast:u}=Pr(),[d,f]=x.useState(!1),[m,g]=x.useState("dashboard");x.useEffect(()=>{!t&&!r&&(u({title:"Please log in",description:"Redirecting to login...",variant:"destructive"}),setTimeout(()=>{window.location.href="/login"},500))},[r,t,u]),x.useEffect(()=>{!t&&r&&!i&&(u({title:"Access Denied",description:"You don't have admin access.",variant:"destructive"}),e("/dashboard"))},[t,r,i,e,u]);const{data:v=[],isLoading:b}=ut({queryKey:["/api/admin/organizations"],enabled:r&&i,staleTime:0}),{data:S}=ut({queryKey:["/api/admin/stats"],enabled:r&&i,staleTime:0}),N=Ft({mutationFn:async E=>await $t("DELETE",`/api/admin/organizations/${E}`),onSuccess:()=>{tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]}),u({title:"Organization deleted",description:"The organization has been removed."})},onError:E=>{u({title:"Error",description:E.message,variant:"destructive"})}}),w=E0({defaultValues:{name:"",description:"",websiteUrl:""}}),j=Ft({mutationFn:async E=>(await $t("POST","/api/admin/organizations",E)).json(),onSuccess:E=>{tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]}),w.reset(),f(!1),u({title:"Rescue created!",description:"Let's get them set up."}),E?.id&&e(`/onboarding/${E.id}`)},onError:E=>{u({title:"Error",description:E.message,variant:"destructive"})}});if(t)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Vs,{className:"h-12 w-12 mx-auto mb-4 text-primary animate-pulse"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!r||!i)return null;const C=E=>{const L=E.planName||"none",Q=E.additionalPetSlots||0,ee={"free trial":"text-muted-foreground",starter:"text-blue-600 dark:text-blue-400",professional:"text-purple-600 dark:text-purple-400",executive:"text-amber-600 dark:text-amber-400"}[L]||"text-muted-foreground";return Q>0?s.jsxs("span",{className:ee,children:[L," ",s.jsxs("span",{className:"text-xs text-muted-foreground",children:["+ ",Q," pet",Q!==1?"s":""]})]}):s.jsx("span",{className:ee,children:L})},_=E=>{switch(E){case"active":return s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"active"});case"trial":return s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"trial"});case"canceled":return s.jsx("span",{className:"text-red-600 dark:text-red-400",children:"canceled"});case"past_due":return s.jsx("span",{className:"text-amber-600 dark:text-amber-400",children:"past due"});default:return s.jsx("span",{className:"text-muted-foreground",children:"trial"})}},P=S?.planDistribution||{trial:v.filter(E=>E.planName==="free trial"||E.subscriptionStatus==="trial").length,starter:v.filter(E=>E.planName==="starter").length,professional:v.filter(E=>E.planName==="professional").length,executive:v.filter(E=>E.planName==="executive").length},A=v.filter(E=>(E.totalRevenueCents||0)>0),$=v.filter(E=>E.subscriptionStatus==="past_due");return m==="revenue"?s.jsxs("div",{className:"min-h-screen bg-muted/30",children:[s.jsx(Xy,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[s.jsx(B,{variant:"ghost",size:"icon",onClick:()=>g("dashboard"),"data-testid":"button-back-revenue",children:s.jsx(Er,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Monthly Revenue Breakdown"}),s.jsx("p",{className:"text-muted-foreground",children:"Where your billing is coming from"})]})]}),s.jsx(_e,{className:"bg-background",children:s.jsx(Ee,{className:"pt-6",children:A.length===0?s.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No active subscriptions generating revenue."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-left text-sm text-muted-foreground",children:[s.jsx("th",{className:"pb-3 font-medium",children:"Rescue"}),s.jsx("th",{className:"pb-3 font-medium",children:"Contact"}),s.jsx("th",{className:"pb-3 font-medium",children:"Plan"}),s.jsx("th",{className:"pb-3 font-medium text-right",children:"Plan Rev"}),s.jsx("th",{className:"pb-3 font-medium text-right",children:"Add-on Rev"}),s.jsx("th",{className:"pb-3 font-medium text-right",children:"Total"})]})}),s.jsx("tbody",{children:A.map(E=>s.jsxs("tr",{className:"border-b last:border-0","data-testid":`row-revenue-${E.id}`,children:[s.jsx("td",{className:"py-3",children:s.jsx("p",{className:"font-medium text-primary",children:E.name})}),s.jsx("td",{className:"py-3 text-sm text-muted-foreground",children:E.contactEmail||""}),s.jsx("td",{className:"py-3",children:C(E)}),s.jsxs("td",{className:"py-3 text-right font-medium",children:["$",((E.planPriceCents||0)/100).toFixed(2)]}),s.jsx("td",{className:"py-3 text-right font-medium",children:(E.addonRevenueCents||0)>0?`$${((E.addonRevenueCents||0)/100).toFixed(2)}`:""}),s.jsxs("td",{className:"py-3 text-right font-bold",children:["$",((E.totalRevenueCents||0)/100).toFixed(2)]})]},E.id))}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2",children:[s.jsx("td",{colSpan:5,className:"py-3 font-bold text-right",children:"Total Monthly Revenue"}),s.jsxs("td",{className:"py-3 text-right font-bold text-lg",children:["$",(A.reduce((E,L)=>E+(L.totalRevenueCents||0),0)/100).toFixed(2)]})]})})]})})})})]})]}):m==="pastdue"?s.jsxs("div",{className:"min-h-screen bg-muted/30",children:[s.jsx(Xy,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[s.jsx(B,{variant:"ghost",size:"icon",onClick:()=>g("dashboard"),"data-testid":"button-back-pastdue",children:s.jsx(Er,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Past Due Accounts"}),s.jsx("p",{className:"text-muted-foreground",children:"Rescues with overdue payments"})]})]}),s.jsx(_e,{className:"bg-background",children:s.jsx(Ee,{className:"pt-6",children:$.length===0?s.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No past due accounts. All caught up!"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-left text-sm text-muted-foreground",children:[s.jsx("th",{className:"pb-3 font-medium",children:"Rescue"}),s.jsx("th",{className:"pb-3 font-medium",children:"Contact"}),s.jsx("th",{className:"pb-3 font-medium",children:"Plan"}),s.jsx("th",{className:"pb-3 font-medium",children:"Amount Due"}),s.jsx("th",{className:"pb-3 font-medium",children:"Joined"}),s.jsx("th",{className:"pb-3 font-medium"})]})}),s.jsx("tbody",{children:$.map(E=>s.jsxs("tr",{className:"border-b last:border-0","data-testid":`row-pastdue-${E.id}`,children:[s.jsx("td",{className:"py-3",children:s.jsx(ye,{href:`/dashboard?org=${E.id}`,className:"hover:underline",children:s.jsx("p",{className:"font-medium text-primary",children:E.name})})}),s.jsx("td",{className:"py-3 text-sm text-muted-foreground",children:E.contactEmail||""}),s.jsx("td",{className:"py-3",children:C(E)}),s.jsxs("td",{className:"py-3 font-medium",children:["$",((E.planPriceCents||0)/100).toFixed(2),"/mo"]}),s.jsx("td",{className:"py-3 text-muted-foreground",children:new Date(E.createdAt).toLocaleDateString()}),s.jsx("td",{className:"py-3",children:E.contactEmail&&s.jsx("a",{href:`mailto:${E.contactEmail}?subject=Pawtrait Pals - Payment Past Due&body=Hi,%0A%0AWe noticed your Pawtrait Pals subscription payment is past due. Please update your payment method to continue using the service.%0A%0AThank you,%0APawtrait Pals Team`,children:s.jsxs(B,{variant:"outline",size:"sm",className:"gap-1","data-testid":`button-email-${E.id}`,children:[s.jsx(Kf,{className:"h-3.5 w-3.5"}),"Email"]})})})]},E.id))})]})})})})]})]}):s.jsxs("div",{className:"min-h-screen bg-muted/30",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home-admin",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(vt,{variant:"secondary",className:"gap-1",children:[s.jsx(Vs,{className:"h-3 w-3"}),"Admin"]}),s.jsx(B,{variant:"ghost",size:"icon","data-testid":"button-logout-admin",onClick:()=>o(),disabled:l,children:s.jsx(zo,{className:"h-4 w-4"})}),s.jsx(gr,{})]})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8 flex items-start gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(Vs,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Pawtrait Pals Admin"}),s.jsx("p",{className:"text-muted-foreground",children:"Rescue overview and billing"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx(_e,{className:"bg-background",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 rounded-lg bg-amber-100 dark:bg-amber-900/30",children:s.jsx(En,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:S?.totalOrgs??v.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rescues"})]})]})})}),s.jsx(_e,{className:"bg-background",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 rounded-lg bg-green-100 dark:bg-green-900/30",children:s.jsx(xE,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:S?.activeSubscriptions??0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Subs"})]})]})})}),s.jsx(_e,{className:"bg-background hover-elevate cursor-pointer",onClick:()=>g("revenue"),"data-testid":"card-monthly-revenue",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:s.jsx(YC,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:["$",S?.monthlyRevenue??0]}),s.jsx("p",{className:"text-sm text-muted-foreground underline",children:"Monthly Rev"})]})]})})}),s.jsx(_e,{className:"bg-background hover-elevate cursor-pointer",onClick:()=>g("pastdue"),"data-testid":"card-past-due",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 rounded-lg bg-yellow-100 dark:bg-yellow-900/30",children:s.jsx(Qf,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:S?.pastDue??0}),s.jsx("p",{className:"text-sm text-muted-foreground underline",children:"Past Due"})]})]})})})]}),s.jsxs(_e,{className:"mb-6 bg-background",children:[s.jsx(Mt,{className:"pb-3",children:s.jsx(qt,{className:"text-base font-semibold",children:"Plan Distribution"})}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vt,{variant:"secondary",className:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border-0",children:"trial"}),s.jsx("span",{className:"font-medium",children:P.trial})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vt,{variant:"secondary",className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 border-0",children:"starter"}),s.jsx("span",{className:"font-medium",children:P.starter})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vt,{variant:"secondary",className:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 border-0",children:"professional"}),s.jsx("span",{className:"font-medium",children:P.professional})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vt,{variant:"secondary",className:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300 border-0",children:"executive"}),s.jsx("span",{className:"font-medium",children:P.executive})]})]})})]}),d&&s.jsxs(_e,{className:"mb-6 bg-background",children:[s.jsxs(Mt,{className:"flex flex-row items-center justify-between gap-2 pb-3",children:[s.jsx(qt,{className:"text-base font-semibold",children:"Add New Rescue"}),s.jsx(B,{size:"icon",variant:"ghost",onClick:()=>{f(!1),w.reset()},"data-testid":"button-close-create-form",children:s.jsx(In,{className:"h-4 w-4"})})]}),s.jsx(Ee,{children:s.jsx(R0,{...w,children:s.jsxs("form",{onSubmit:w.handleSubmit(E=>j.mutate(E)),className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(hi,{control:w.control,name:"name",rules:{required:"Name is required"},render:({field:E})=>s.jsxs(la,{className:"flex-1",children:[s.jsx(ca,{children:s.jsx(He,{placeholder:"Rescue name",...E,"data-testid":"input-new-rescue-name"})}),s.jsx(Ro,{})]})}),s.jsx(hi,{control:w.control,name:"description",render:({field:E})=>s.jsx(la,{className:"flex-1",children:s.jsx(ca,{children:s.jsx(He,{placeholder:"Description (optional)",...E,"data-testid":"input-new-rescue-desc"})})})}),s.jsx(hi,{control:w.control,name:"websiteUrl",render:({field:E})=>s.jsx(la,{className:"flex-1",children:s.jsx(ca,{children:s.jsx(He,{placeholder:"Website (optional)",...E,"data-testid":"input-new-rescue-website"})})})}),s.jsx(B,{type:"submit",disabled:j.isPending,"data-testid":"button-submit-new-rescue",children:j.isPending?"Creating...":"Create"})]})})})]}),s.jsxs(_e,{className:"bg-background",children:[s.jsxs(Mt,{className:"flex flex-row items-center justify-between gap-2 pb-3",children:[s.jsxs("div",{children:[s.jsx(qt,{className:"text-base font-semibold",children:"All Rescues"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.length," registered rescue",v.length!==1?"s":""]})]}),!d&&s.jsxs(B,{size:"sm",className:"gap-1",onClick:()=>f(!0),"data-testid":"button-add-rescue",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Add Rescue"]})]}),s.jsx(Ee,{children:b?s.jsx("div",{className:"space-y-4",children:[1,2,3].map(E=>s.jsx(Kt,{className:"h-16 w-full"},E))}):v.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(En,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No rescues yet"}),s.jsxs(B,{className:"mt-4 gap-1",onClick:()=>f(!0),"data-testid":"button-add-first-rescue",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Add Your First Rescue"]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-left text-sm text-muted-foreground",children:[s.jsx("th",{className:"pb-3 font-medium",children:"Rescue"}),s.jsx("th",{className:"pb-3 font-medium text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[s.jsx(Ve,{className:"h-4 w-4 inline-block"}),s.jsx(et,{className:"h-4 w-4 inline-block"})]})}),s.jsx("th",{className:"pb-3 font-medium min-w-[140px]",children:"Plan"}),s.jsx("th",{className:"pb-3 font-medium",children:"Status"}),s.jsx("th",{className:"pb-3 font-medium text-center",children:s.jsx(li,{className:"h-4 w-4 inline-block"})}),s.jsx("th",{className:"pb-3 font-medium text-center",children:s.jsx(ou,{className:"h-4 w-4 inline-block"})}),s.jsx("th",{className:"pb-3 font-medium",children:"Joined"}),s.jsx("th",{className:"pb-3 font-medium"})]})}),s.jsx("tbody",{children:v.map(E=>s.jsxs("tr",{className:"border-b last:border-0","data-testid":`row-rescue-${E.id}`,children:[s.jsx("td",{className:"py-4",children:s.jsxs(ye,{href:`/dashboard?org=${E.id}`,className:"block hover:underline","data-testid":`link-rescue-${E.id}`,children:[s.jsx("p",{className:"font-medium text-primary","data-testid":`text-rescue-name-${E.id}`,children:E.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:E.contactEmail||""})]})}),s.jsx("td",{className:"py-4 text-center","data-testid":`text-species-${E.id}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[(E.speciesHandled==="dogs"||E.speciesHandled==="both")&&s.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"}),(E.speciesHandled==="cats"||E.speciesHandled==="both")&&s.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]})}),s.jsx("td",{className:"py-4",children:C(E)}),s.jsx("td",{className:"py-4",children:_(E.subscriptionStatus)}),s.jsx("td",{className:"py-4 text-center",children:E.dogCount??""}),s.jsx("td",{className:"py-4 text-center",children:E.portraitCount??E.portraitsUsedThisMonth??0}),s.jsx("td",{className:"py-4 text-muted-foreground",children:new Date(E.createdAt).toLocaleDateString()}),s.jsx("td",{className:"py-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{variant:"ghost",size:"icon","data-testid":`button-info-${E.id}`,asChild:!0,children:s.jsx(ye,{href:`/admin/rescue/${E.id}`,children:s.jsx(ff,{className:"h-4 w-4"})})}),s.jsx(B,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>{confirm(`Are you sure you want to delete "${E.name}"? This cannot be undone.`)&&N.mutate(E.id)},disabled:N.isPending,"data-testid":`button-delete-${E.id}`,children:s.jsx(Tw,{className:"h-4 w-4"})})]})})]},E.id))})]})})})]})]})]})}function O0(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Sp="Switch",[a4]=us(Sp),[i4,o4]=a4(Sp),L0=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:i,checked:o,defaultChecked:l,required:u,disabled:d,value:f="on",onCheckedChange:m,form:g,...v}=e,[b,S]=x.useState(null),N=lt(t,P=>S(P)),w=x.useRef(!1),j=b?g||!!b.closest("form"):!0,[C=!1,_]=Cn({prop:o,defaultProp:l,onChange:m});return s.jsxs(i4,{scope:r,checked:C,disabled:d,children:[s.jsx(Ge.button,{type:"button",role:"switch","aria-checked":C,"aria-required":u,"data-state":$0(C),"data-disabled":d?"":void 0,disabled:d,value:f,...v,ref:N,onClick:$e(e.onClick,P=>{_(A=>!A),j&&(w.current=P.isPropagationStopped(),w.current||P.stopPropagation())})}),j&&s.jsx(l4,{control:b,bubbles:!w.current,name:i,value:f,checked:C,required:u,disabled:d,form:g,style:{transform:"translateX(-100%)"}})]})});L0.displayName=Sp;var D0="SwitchThumb",M0=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...i}=e,o=o4(D0,r);return s.jsx(Ge.span,{"data-state":$0(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t})});M0.displayName=D0;var l4=e=>{const{control:t,checked:r,bubbles:i=!0,...o}=e,l=x.useRef(null),u=O0(r),d=Zw(t);return x.useEffect(()=>{const f=l.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==r&&v){const b=new Event("click",{bubbles:i});v.call(f,r),f.dispatchEvent(b)}},[u,r,i]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $0(e){return e?"checked":"unchecked"}var F0=L0,c4=M0;const kp=x.forwardRef(({className:e,...t},r)=>s.jsx(F0,{className:Le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(c4,{className:Le("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kp.displayName=F0.displayName;function Zy(e,[t,r]){return Math.min(r,Math.max(t,e))}var u4=x.createContext(void 0);function _p(e){const t=x.useContext(u4);return e||t||"ltr"}var d4=[" ","Enter","ArrowUp","ArrowDown"],h4=[" ","Enter"],sl="Select",[ku,_u,f4]=Bf(sl),[Ai]=us(sl,[f4,du]),Cu=du(),[p4,On]=Ai(sl),[m4,g4]=Ai(sl),U0=e=>{const{__scopeSelect:t,children:r,open:i,defaultOpen:o,onOpenChange:l,value:u,defaultValue:d,onValueChange:f,dir:m,name:g,autoComplete:v,disabled:b,required:S,form:N}=e,w=Cu(t),[j,C]=x.useState(null),[_,P]=x.useState(null),[A,$]=x.useState(!1),E=_p(m),[L=!1,Q]=Cn({prop:i,defaultProp:o,onChange:l}),[X,ee]=Cn({prop:u,defaultProp:d,onChange:f}),le=x.useRef(null),T=j?N||!!j.closest("form"):!0,[Z,Y]=x.useState(new Set),ge=Array.from(Z).map(K=>K.props.value).join(";");return s.jsx(cb,{...w,children:s.jsxs(p4,{required:S,scope:t,trigger:j,onTriggerChange:C,valueNode:_,onValueNodeChange:P,valueNodeHasChildren:A,onValueNodeHasChildrenChange:$,contentId:Ws(),value:X,onValueChange:ee,open:L,onOpenChange:Q,dir:E,triggerPointerDownPosRef:le,disabled:b,children:[s.jsx(ku.Provider,{scope:t,children:s.jsx(m4,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(K=>{Y(z=>new Set(z).add(K))},[]),onNativeOptionRemove:x.useCallback(K=>{Y(z=>{const U=new Set(z);return U.delete(K),U})},[]),children:r})}),T?s.jsxs(dj,{"aria-hidden":!0,required:S,tabIndex:-1,name:g,autoComplete:v,value:X,onChange:K=>ee(K.target.value),disabled:b,form:N,children:[X===void 0?s.jsx("option",{value:""}):null,Array.from(Z)]},ge):null]})})};U0.displayName=sl;var z0="SelectTrigger",B0=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:i=!1,...o}=e,l=Cu(r),u=On(z0,r),d=u.disabled||i,f=lt(t,u.onTriggerChange),m=_u(r),g=x.useRef("touch"),[v,b,S]=hj(w=>{const j=m().filter(P=>!P.disabled),C=j.find(P=>P.value===u.value),_=fj(j,w,C);_!==void 0&&u.onValueChange(_.value)}),N=w=>{d||(u.onOpenChange(!0),S()),w&&(u.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return s.jsx(ub,{asChild:!0,...l,children:s.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":u.contentId,"aria-expanded":u.open,"aria-required":u.required,"aria-autocomplete":"none",dir:u.dir,"data-state":u.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":uj(u.value)?"":void 0,...o,ref:f,onClick:$e(o.onClick,w=>{w.currentTarget.focus(),g.current!=="mouse"&&N(w)}),onPointerDown:$e(o.onPointerDown,w=>{g.current=w.pointerType;const j=w.target;j.hasPointerCapture(w.pointerId)&&j.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(N(w),w.preventDefault())}),onKeyDown:$e(o.onKeyDown,w=>{const j=v.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&b(w.key),!(j&&w.key===" ")&&d4.includes(w.key)&&(N(),w.preventDefault())})})})});B0.displayName=z0;var V0="SelectValue",W0=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:o,children:l,placeholder:u="",...d}=e,f=On(V0,r),{onValueNodeHasChildrenChange:m}=f,g=l!==void 0,v=lt(t,f.onValueNodeChange);return Gt(()=>{m(g)},[m,g]),s.jsx(Ge.span,{...d,ref:v,style:{pointerEvents:"none"},children:uj(f.value)?s.jsx(s.Fragment,{children:u}):l})});W0.displayName=V0;var x4="SelectIcon",q0=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:i,...o}=e;return s.jsx(Ge.span,{"aria-hidden":!0,...o,ref:t,children:i||""})});q0.displayName=x4;var y4="SelectPortal",H0=e=>s.jsx(su,{asChild:!0,...e});H0.displayName=y4;var ma="SelectContent",K0=x.forwardRef((e,t)=>{const r=On(ma,e.__scopeSelect),[i,o]=x.useState();if(Gt(()=>{o(new DocumentFragment)},[]),!r.open){const l=i;return l?Ei.createPortal(s.jsx(G0,{scope:e.__scopeSelect,children:s.jsx(ku.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),l):null}return s.jsx(Q0,{...e,ref:t})});K0.displayName=ma;var ts=10,[G0,Ln]=Ai(ma),v4="SelectContentImpl",w4=pi("SelectContent.RemoveScroll"),Q0=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:l,onPointerDownOutside:u,side:d,sideOffset:f,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:b,collisionPadding:S,sticky:N,hideWhenDetached:w,avoidCollisions:j,...C}=e,_=On(ma,r),[P,A]=x.useState(null),[$,E]=x.useState(null),L=lt(t,ae=>A(ae)),[Q,X]=x.useState(null),[ee,le]=x.useState(null),T=_u(r),[Z,Y]=x.useState(!1),ge=x.useRef(!1);x.useEffect(()=>{if(P)return Ub(P)},[P]),Ab();const K=x.useCallback(ae=>{const[we,...Pe]=T().map(Te=>Te.ref.current),[Ae]=Pe.slice(-1),Qe=document.activeElement;for(const Te of ae)if(Te===Qe||(Te?.scrollIntoView({block:"nearest"}),Te===we&&$&&($.scrollTop=0),Te===Ae&&$&&($.scrollTop=$.scrollHeight),Te?.focus(),document.activeElement!==Qe))return},[T,$]),z=x.useCallback(()=>K([Q,P]),[K,Q,P]);x.useEffect(()=>{Z&&z()},[Z,z]);const{onOpenChange:U,triggerPointerDownPosRef:G}=_;x.useEffect(()=>{if(P){let ae={x:0,y:0};const we=Ae=>{ae={x:Math.abs(Math.round(Ae.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(Ae.pageY)-(G.current?.y??0))}},Pe=Ae=>{ae.x<=10&&ae.y<=10?Ae.preventDefault():P.contains(Ae.target)||U(!1),document.removeEventListener("pointermove",we),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[P,U,G]),x.useEffect(()=>{const ae=()=>U(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[U]);const[te,D]=hj(ae=>{const we=T().filter(Qe=>!Qe.disabled),Pe=we.find(Qe=>Qe.ref.current===document.activeElement),Ae=fj(we,ae,Pe);Ae&&setTimeout(()=>Ae.ref.current.focus())}),I=x.useCallback((ae,we,Pe)=>{const Ae=!ge.current&&!Pe;(_.value!==void 0&&_.value===we||Ae)&&(X(ae),Ae&&(ge.current=!0))},[_.value]),fe=x.useCallback(()=>P?.focus(),[P]),ue=x.useCallback((ae,we,Pe)=>{const Ae=!ge.current&&!Pe;(_.value!==void 0&&_.value===we||Ae)&&le(ae)},[_.value]),xe=i==="popper"?Sf:Y0,ve=xe===Sf?{side:d,sideOffset:f,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:b,collisionPadding:S,sticky:N,hideWhenDetached:w,avoidCollisions:j}:{};return s.jsx(G0,{scope:r,content:P,viewport:$,onViewportChange:E,itemRefCallback:I,selectedItem:Q,onItemLeave:fe,itemTextRefCallback:ue,focusSelectedItem:z,selectedItemText:ee,position:i,isPositioned:Z,searchRef:te,children:s.jsx(up,{as:w4,allowPinchZoom:!0,children:s.jsx(cp,{asChild:!0,trapped:_.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:$e(o,ae=>{_.trigger?.focus({preventScroll:!0}),ae.preventDefault()}),children:s.jsx(Go,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:s.jsx(xe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ae=>ae.preventDefault(),...C,...ve,onPlaced:()=>Y(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:$e(C.onKeyDown,ae=>{const we=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!we&&ae.key.length===1&&D(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Ae=T().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Ae=Ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const Qe=ae.target,Te=Ae.indexOf(Qe);Ae=Ae.slice(Te+1)}setTimeout(()=>K(Ae)),ae.preventDefault()}})})})})})})});Q0.displayName=v4;var b4="SelectItemAlignedPosition",Y0=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:i,...o}=e,l=On(ma,r),u=Ln(ma,r),[d,f]=x.useState(null),[m,g]=x.useState(null),v=lt(t,L=>g(L)),b=_u(r),S=x.useRef(!1),N=x.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:C,focusSelectedItem:_}=u,P=x.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&m&&w&&j&&C){const L=l.trigger.getBoundingClientRect(),Q=m.getBoundingClientRect(),X=l.valueNode.getBoundingClientRect(),ee=C.getBoundingClientRect();if(l.dir!=="rtl"){const Qe=ee.left-Q.left,Te=X.left-Qe,Je=L.left-Te,re=L.width+Je,Ke=Math.max(re,Q.width),ht=window.innerWidth-ts,lr=Zy(Te,[ts,Math.max(ts,ht-Ke)]);d.style.minWidth=re+"px",d.style.left=lr+"px"}else{const Qe=Q.right-ee.right,Te=window.innerWidth-X.right-Qe,Je=window.innerWidth-L.right-Te,re=L.width+Je,Ke=Math.max(re,Q.width),ht=window.innerWidth-ts,lr=Zy(Te,[ts,Math.max(ts,ht-Ke)]);d.style.minWidth=re+"px",d.style.right=lr+"px"}const le=b(),T=window.innerHeight-ts*2,Z=w.scrollHeight,Y=window.getComputedStyle(m),ge=parseInt(Y.borderTopWidth,10),K=parseInt(Y.paddingTop,10),z=parseInt(Y.borderBottomWidth,10),U=parseInt(Y.paddingBottom,10),G=ge+K+Z+U+z,te=Math.min(j.offsetHeight*5,G),D=window.getComputedStyle(w),I=parseInt(D.paddingTop,10),fe=parseInt(D.paddingBottom,10),ue=L.top+L.height/2-ts,xe=T-ue,ve=j.offsetHeight/2,ae=j.offsetTop+ve,we=ge+K+ae,Pe=G-we;if(we<=ue){const Qe=le.length>0&&j===le[le.length-1].ref.current;d.style.bottom="0px";const Te=m.clientHeight-w.offsetTop-w.offsetHeight,Je=Math.max(xe,ve+(Qe?fe:0)+Te+z),re=we+Je;d.style.height=re+"px"}else{const Qe=le.length>0&&j===le[0].ref.current;d.style.top="0px";const Je=Math.max(ue,ge+w.offsetTop+(Qe?I:0)+ve)+Pe;d.style.height=Je+"px",w.scrollTop=we-ue+w.offsetTop}d.style.margin=`${ts}px 0`,d.style.minHeight=te+"px",d.style.maxHeight=T+"px",i?.(),requestAnimationFrame(()=>S.current=!0)}},[b,l.trigger,l.valueNode,d,m,w,j,C,l.dir,i]);Gt(()=>P(),[P]);const[A,$]=x.useState();Gt(()=>{m&&$(window.getComputedStyle(m).zIndex)},[m]);const E=x.useCallback(L=>{L&&N.current===!0&&(P(),_?.(),N.current=!1)},[P,_]);return s.jsx(N4,{scope:r,contentWrapper:d,shouldExpandOnScrollRef:S,onScrollButtonChange:E,children:s.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:s.jsx(Ge.div,{...o,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Y0.displayName=b4;var j4="SelectPopperPosition",Sf=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:i="start",collisionPadding:o=ts,...l}=e,u=Cu(r);return s.jsx(db,{...u,...l,ref:t,align:i,collisionPadding:o,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sf.displayName=j4;var[N4,Cp]=Ai(ma,{}),kf="SelectViewport",J0=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:i,...o}=e,l=Ln(kf,r),u=Cp(kf,r),d=lt(t,l.onViewportChange),f=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(ku.Slot,{scope:r,children:s.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:$e(o.onScroll,m=>{const g=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:b}=u;if(b?.current&&v){const S=Math.abs(f.current-g.scrollTop);if(S>0){const N=window.innerHeight-ts*2,w=parseFloat(v.style.minHeight),j=parseFloat(v.style.height),C=Math.max(w,j);if(C<N){const _=C+S,P=Math.min(N,_),A=_-P;v.style.height=P+"px",v.style.bottom==="0px"&&(g.scrollTop=A>0?A:0,v.style.justifyContent="flex-end")}}}f.current=g.scrollTop})})})]})});J0.displayName=kf;var X0="SelectGroup",[S4,k4]=Ai(X0),_4=x.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,o=Ws();return s.jsx(S4,{scope:r,id:o,children:s.jsx(Ge.div,{role:"group","aria-labelledby":o,...i,ref:t})})});_4.displayName=X0;var Z0="SelectLabel",ej=x.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,o=k4(Z0,r);return s.jsx(Ge.div,{id:o.id,...i,ref:t})});ej.displayName=Z0;var Jc="SelectItem",[C4,tj]=Ai(Jc),rj=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:i,disabled:o=!1,textValue:l,...u}=e,d=On(Jc,r),f=Ln(Jc,r),m=d.value===i,[g,v]=x.useState(l??""),[b,S]=x.useState(!1),N=lt(t,_=>f.itemRefCallback?.(_,i,o)),w=Ws(),j=x.useRef("touch"),C=()=>{o||(d.onValueChange(i),d.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(C4,{scope:r,value:i,disabled:o,textId:w,isSelected:m,onItemTextChange:x.useCallback(_=>{v(P=>P||(_?.textContent??"").trim())},[]),children:s.jsx(ku.ItemSlot,{scope:r,value:i,disabled:o,textValue:g,children:s.jsx(Ge.div,{role:"option","aria-labelledby":w,"data-highlighted":b?"":void 0,"aria-selected":m&&b,"data-state":m?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...u,ref:N,onFocus:$e(u.onFocus,()=>S(!0)),onBlur:$e(u.onBlur,()=>S(!1)),onClick:$e(u.onClick,()=>{j.current!=="mouse"&&C()}),onPointerUp:$e(u.onPointerUp,()=>{j.current==="mouse"&&C()}),onPointerDown:$e(u.onPointerDown,_=>{j.current=_.pointerType}),onPointerMove:$e(u.onPointerMove,_=>{j.current=_.pointerType,o?f.onItemLeave?.():j.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(u.onPointerLeave,_=>{_.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:$e(u.onKeyDown,_=>{f.searchRef?.current!==""&&_.key===" "||(h4.includes(_.key)&&C(),_.key===" "&&_.preventDefault())})})})})});rj.displayName=Jc;var So="SelectItemText",sj=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:o,...l}=e,u=On(So,r),d=Ln(So,r),f=tj(So,r),m=g4(So,r),[g,v]=x.useState(null),b=lt(t,C=>v(C),f.onItemTextChange,C=>d.itemTextRefCallback?.(C,f.value,f.disabled)),S=g?.textContent,N=x.useMemo(()=>s.jsx("option",{value:f.value,disabled:f.disabled,children:S},f.value),[f.disabled,f.value,S]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=m;return Gt(()=>(w(N),()=>j(N)),[w,j,N]),s.jsxs(s.Fragment,{children:[s.jsx(Ge.span,{id:f.textId,...l,ref:b}),f.isSelected&&u.valueNode&&!u.valueNodeHasChildren?Ei.createPortal(l.children,u.valueNode):null]})});sj.displayName=So;var nj="SelectItemIndicator",aj=x.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return tj(nj,r).isSelected?s.jsx(Ge.span,{"aria-hidden":!0,...i,ref:t}):null});aj.displayName=nj;var _f="SelectScrollUpButton",ij=x.forwardRef((e,t)=>{const r=Ln(_f,e.__scopeSelect),i=Cp(_f,e.__scopeSelect),[o,l]=x.useState(!1),u=lt(t,i.onScrollButtonChange);return Gt(()=>{if(r.viewport&&r.isPositioned){let d=function(){const m=f.scrollTop>0;l(m)};const f=r.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),o?s.jsx(lj,{...e,ref:u,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=r;d&&f&&(d.scrollTop=d.scrollTop-f.offsetHeight)}}):null});ij.displayName=_f;var Cf="SelectScrollDownButton",oj=x.forwardRef((e,t)=>{const r=Ln(Cf,e.__scopeSelect),i=Cp(Cf,e.__scopeSelect),[o,l]=x.useState(!1),u=lt(t,i.onScrollButtonChange);return Gt(()=>{if(r.viewport&&r.isPositioned){let d=function(){const m=f.scrollHeight-f.clientHeight,g=Math.ceil(f.scrollTop)<m;l(g)};const f=r.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),o?s.jsx(lj,{...e,ref:u,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=r;d&&f&&(d.scrollTop=d.scrollTop+f.offsetHeight)}}):null});oj.displayName=Cf;var lj=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:i,...o}=e,l=Ln("SelectScrollButton",r),u=x.useRef(null),d=_u(r),f=x.useCallback(()=>{u.current!==null&&(window.clearInterval(u.current),u.current=null)},[]);return x.useEffect(()=>()=>f(),[f]),Gt(()=>{d().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[d]),s.jsx(Ge.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:$e(o.onPointerDown,()=>{u.current===null&&(u.current=window.setInterval(i,50))}),onPointerMove:$e(o.onPointerMove,()=>{l.onItemLeave?.(),u.current===null&&(u.current=window.setInterval(i,50))}),onPointerLeave:$e(o.onPointerLeave,()=>{f()})})}),E4="SelectSeparator",cj=x.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return s.jsx(Ge.div,{"aria-hidden":!0,...i,ref:t})});cj.displayName=E4;var Ef="SelectArrow",P4=x.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,o=Cu(r),l=On(Ef,r),u=Ln(Ef,r);return l.open&&u.position==="popper"?s.jsx(hb,{...o,...i,ref:t}):null});P4.displayName=Ef;function uj(e){return e===""||e===void 0}var dj=x.forwardRef((e,t)=>{const{value:r,...i}=e,o=x.useRef(null),l=lt(t,o),u=O0(r);return x.useEffect(()=>{const d=o.current,f=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(f,"value").set;if(u!==r&&g){const v=new Event("change",{bubbles:!0});g.call(d,r),d.dispatchEvent(v)}},[u,r]),s.jsx(Qo,{asChild:!0,children:s.jsx("select",{...i,ref:l,defaultValue:r})})});dj.displayName="BubbleSelect";function hj(e){const t=xr(e),r=x.useRef(""),i=x.useRef(0),o=x.useCallback(u=>{const d=r.current+u;t(d),(function f(m){r.current=m,window.clearTimeout(i.current),m!==""&&(i.current=window.setTimeout(()=>f(""),1e3))})(d)},[t]),l=x.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,o,l]}function fj(e,t,r){const o=t.length>1&&Array.from(t).every(m=>m===t[0])?t[0]:t,l=r?e.indexOf(r):-1;let u=T4(e,Math.max(l,0));o.length===1&&(u=u.filter(m=>m!==r));const f=u.find(m=>m.textValue.toLowerCase().startsWith(o.toLowerCase()));return f!==r?f:void 0}function T4(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var R4=U0,pj=B0,A4=W0,I4=q0,O4=H0,mj=K0,L4=J0,gj=ej,xj=rj,D4=sj,M4=aj,yj=ij,vj=oj,wj=cj;const ev=R4,tv=A4,Pf=x.forwardRef(({className:e,children:t,...r},i)=>s.jsxs(pj,{ref:i,className:Le("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(I4,{asChild:!0,children:s.jsx(Hf,{className:"h-4 w-4 opacity-50"})})]}));Pf.displayName=pj.displayName;const bj=x.forwardRef(({className:e,...t},r)=>s.jsx(yj,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(KC,{className:"h-4 w-4"})}));bj.displayName=yj.displayName;const jj=x.forwardRef(({className:e,...t},r)=>s.jsx(vj,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Hf,{className:"h-4 w-4"})}));jj.displayName=vj.displayName;const Tf=x.forwardRef(({className:e,children:t,position:r="popper",...i},o)=>s.jsx(O4,{children:s.jsxs(mj,{ref:o,className:Le("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[s.jsx(bj,{}),s.jsx(L4,{className:Le("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(jj,{})]})}));Tf.displayName=mj.displayName;const $4=x.forwardRef(({className:e,...t},r)=>s.jsx(gj,{ref:r,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));$4.displayName=gj.displayName;const ko=x.forwardRef(({className:e,children:t,...r},i)=>s.jsxs(xj,{ref:i,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(M4,{children:s.jsx(Rt,{className:"h-4 w-4"})})}),s.jsx(D4,{children:t})]}));ko.displayName=xj.displayName;const F4=x.forwardRef(({className:e,...t},r)=>s.jsx(wj,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",e),...t}));F4.displayName=wj.displayName;const ta="/api/instagram";function rv(){const e=Si(),t=e.id?parseInt(e.id):null,r=t!==null&&t>0,[,i]=An(),{user:o,session:l,isLoading:u,isAuthenticated:d,isAdmin:f,logout:m,isLoggingOut:g}=yr(),{toast:v}=Pr(),[b,S]=x.useState(null),[N,w]=x.useState({}),[j,C]=x.useState(null),[_,P]=x.useState(!1),[A,$]=x.useState(null),[E,L]=x.useState(!1);x.useEffect(()=>{!u&&!d?window.location.href="/login":!u&&d&&r&&!f&&i("/dashboard")},[u,d,f,r,i]);const{data:Q,isLoading:X}=ut({queryKey:["/api/admin/organizations",t],queryFn:async()=>{const re=await mr(),Ke=await fetch(`/api/admin/organizations/${t}`,{headers:re});if(!Ke.ok)throw new Error("Failed to fetch organization");return Ke.json()},enabled:d&&r&&f&&t>0}),{data:ee,isLoading:le}=ut({queryKey:["/api/my-organization"],enabled:d&&!r}),T=r?Q:ee,Z=r?X:le,{data:Y}=ut({queryKey:["/api/plans"]}),{data:ge=[]}=ut({queryKey:["/api/my-dogs"],enabled:d&&!r}),{data:K,refetch:z}=ut({queryKey:[`${ta}/status`,r?t:void 0],queryFn:async()=>{const re=await mr(),Ke=r&&t?`${ta}/status?orgId=${t}`:`${ta}/status`;return(await fetch(Ke,{headers:re})).json()},enabled:d});x.useEffect(()=>{const re=new URLSearchParams(window.location.search),Ke=re.get("instagram");if(Ke==="connected")v({title:"Instagram Connected!",description:"Your Instagram account is now linked."}),z(),window.history.replaceState({},"",window.location.pathname);else if(Ke==="no_page")v({title:"No Facebook Page Found",description:"Your Instagram must be linked to a Facebook Page. Create one in Facebook settings first.",variant:"destructive"}),window.history.replaceState({},"",window.location.pathname);else if(Ke==="no_ig_account")v({title:"No Instagram Business Account",description:"Switch your Instagram to a Business or Creator account and link it to your Facebook Page.",variant:"destructive"}),window.history.replaceState({},"",window.location.pathname);else if(Ke==="error"){const ht=re.get("detail");v({title:"Instagram Connection Failed",description:ht||"Something went wrong. Please try again.",variant:"destructive"}),window.history.replaceState({},"",window.location.pathname)}},[]);const U=Y?.find(re=>re.id===T?.planId),G=r?Q?.dogCount||0:ge.length,te=!!T?.planId&&T?.subscriptionStatus!=="inactive",D=r?`/api/admin/organizations/${t}`:"/api/my-organization",I=Ft({mutationFn:async re=>(await $t("PATCH",D,re)).json(),onSuccess:()=>{r?(tt.invalidateQueries({queryKey:["/api/admin/organizations",t]}),tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]})):tt.invalidateQueries({queryKey:["/api/my-organization"]}),S(null),w({}),C(null),v({title:"Saved",description:"Changes saved successfully."})},onError:re=>{v({title:"Error",description:re.message,variant:"destructive"})}}),fe=Ft({mutationFn:async re=>(await $t("PATCH",D,{isActive:re})).json(),onSuccess:()=>{r&&(tt.invalidateQueries({queryKey:["/api/admin/organizations",t]}),tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]})),v({title:"Updated",description:`Rescue ${T?.isActive?"deactivated":"activated"}.`})},onError:re=>{v({title:"Error",description:re.message,variant:"destructive"})}});if(u||Z)return s.jsxs("div",{className:"min-h-screen bg-muted/30",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsx("div",{className:"container mx-auto px-4 h-14 flex items-center",children:s.jsx(Kt,{className:"h-6 w-32"})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-3xl space-y-6",children:[s.jsx(Kt,{className:"h-12 w-64"}),s.jsx(Kt,{className:"h-40 w-full"}),s.jsx(Kt,{className:"h-32 w-full"}),s.jsx(Kt,{className:"h-32 w-full"})]})]});if(!d||!T)return d&&(r||i("/dashboard")),null;const ue=re=>{re==="business"?w({name:T.name||"",contactEmail:T.contactEmail||"",websiteUrl:T.websiteUrl||"",description:T.description||"",speciesHandled:T.speciesHandled||"dogs"}):re==="contact"?w({contactName:T.contactName||"",contactPhone:T.contactPhone||""}):re==="social"?w({socialFacebook:T.socialFacebook||"",socialInstagram:T.socialInstagram||"",socialTwitter:T.socialTwitter||"",socialNextdoor:T.socialNextdoor||""}):re==="billing"?w({billingStreet:T.billingStreet||"",billingCity:T.billingCity||"",billingState:T.billingState||"",billingZip:T.billingZip||"",billingCountry:T.billingCountry||""}):re==="notes"?w({notes:T.notes||""}):re==="plan"?w({planId:T.planId?.toString()||""}):re==="logo"&&C(null),S(re)},xe=()=>{if(b==="plan"){const re=N.planId?parseInt(N.planId):null,Ke=Y?.find(ht=>ht.id===re);if(Ke&&Ke.priceMonthly>0&&r&&t){S(null),i(`/choose-plan/${t}`);return}I.mutate({planId:re})}else b==="logo"&&j?I.mutate({logoUrl:j}):I.mutate(N)},ve=()=>{S(null),w({}),C(null)},ae=["image/jpeg","image/png","image/webp"],we=re=>{const Ke=re.target.files?.[0];if(!Ke)return;if(!ae.includes(Ke.type)){v({title:"Invalid file type",description:"Please upload a JPG, PNG, or WebP image.",variant:"destructive"});return}if(Ke.size>5*1024*1024){v({title:"File too large",description:"Logo must be under 5MB.",variant:"destructive"});return}const ht=new FileReader;ht.onload=()=>{$(ht.result),P(!0)},ht.readAsDataURL(Ke),re.target.value=""},Pe=()=>T.isActive?s.jsx(vt,{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 border-0",children:"Active"}):s.jsx(vt,{variant:"secondary",className:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 border-0",children:"Inactive"}),Ae=T.trialEndsAt?Math.max(0,Math.ceil((new Date(T.trialEndsAt).getTime()-Date.now())/(1e3*60*60*24))):0,Qe=r?"/admin":"/dashboard",Te=r?"Back to Admin":"Back to My Rescue",Je=(re,Ke)=>b===re?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{size:"icon",variant:"ghost",onClick:xe,disabled:I.isPending||re==="logo"&&!j,"data-testid":`button-save-${Ke}`,children:s.jsx(Rt,{className:"h-4 w-4"})}),s.jsx(B,{size:"icon",variant:"ghost",onClick:ve,"data-testid":`button-cancel-${Ke}`,children:s.jsx(In,{className:"h-4 w-4"})})]}):s.jsx(B,{size:"icon",variant:"ghost",onClick:()=>ue(re),"data-testid":`button-edit-${Ke}`,children:s.jsx(Cw,{className:"h-4 w-4"})});return s.jsxs("div",{className:"min-h-screen bg-muted/30",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-2 font-serif font-bold text-primary","data-testid":"link-home-rescue-info",children:[s.jsx(Ve,{className:"h-5 w-5"}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[f&&s.jsx(B,{variant:"outline",size:"sm",className:"gap-1","data-testid":"button-back-to-admin",asChild:!0,children:s.jsxs(ye,{href:"/admin",children:[s.jsx(Vs,{className:"h-3 w-3"}),"Admin Panel"]})}),d&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ns,{className:"h-8 w-8",children:[s.jsx(Hr,{src:o?.profileImageUrl||void 0,alt:o?.firstName||"User"}),s.jsx(Ss,{children:o?.firstName?.[0]||o?.email?.[0]||"U"})]}),s.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:o?.firstName||o?.email?.split("@")[0]}),s.jsx(B,{variant:"ghost",size:"icon","data-testid":"button-logout-rescue-info",onClick:()=>m(),disabled:g,children:s.jsx(zo,{className:"h-4 w-4"})})]}),s.jsx(gr,{})]})]})}),s.jsx(xa,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[s.jsx(B,{variant:"ghost",className:"gap-1 mb-6","data-testid":"button-back",asChild:!0,children:s.jsxs(ye,{href:Qe,children:[s.jsx(Er,{className:"h-4 w-4"}),Te]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Ns,{className:"h-16 w-16",children:[T.logoUrl?s.jsx(Hr,{src:T.logoUrl,alt:T.name}):null,s.jsx(Ss,{className:"bg-primary/10",children:s.jsx(sr,{className:"h-8 w-8 text-primary"})})]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2 flex-wrap","data-testid":"text-rescue-name",children:[T.name,r&&Pe()]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:r?"Manage rescue details and billing":"Manage your rescue profile and settings"})]})]}),s.jsx("div",{className:"flex items-center gap-3 flex-wrap",children:r&&s.jsxs(s.Fragment,{children:[s.jsx(B,{variant:"outline",className:"gap-2","data-testid":"button-view-pups",asChild:!0,children:s.jsxs(ye,{href:`/dashboard?stay=1&org=${T.id}`,children:[s.jsx(li,{className:"h-4 w-4"}),T.speciesHandled==="cats"?"Adoptable Kitties":T.speciesHandled==="both"?"Adoptable Pets":"Adoptable Pups"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active"}),s.jsx(kp,{checked:T.isActive,onCheckedChange:re=>fe.mutate(re),disabled:fe.isPending,"data-testid":"switch-active"})]})]})})]}),s.jsxs("div",{className:"space-y-6",children:[te&&G===0&&!r&&s.jsx(_e,{className:"border-primary/30 bg-primary/5","data-testid":"card-next-step",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[s.jsx("div",{className:"p-3 rounded-full bg-primary/10",children:s.jsx(li,{className:"h-8 w-8 text-primary"})}),s.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[s.jsx("h3",{className:"font-semibold text-lg","data-testid":"text-next-step-title",children:"You're all set! Add your first pet"}),s.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Fill in your rescue details below if you'd like, then head over to add your first rescue pet and create a beautiful portrait."})]}),s.jsx(B,{className:"gap-2 shrink-0","data-testid":"button-add-first-pet-settings",asChild:!0,children:s.jsxs(ye,{href:"/create",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Add Your First Pet"]})})]})})}),s.jsxs(_e,{"data-testid":"section-logo",children:[s.jsxs(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ou,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Logo"}),s.jsx(_r,{children:"Logo shown on public pages"})]})]}),Je("logo","logo")]}),s.jsx(Ee,{children:b==="logo"?s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs(Ns,{className:"h-20 w-20",children:[j?s.jsx(Hr,{src:j,alt:"Logo preview"}):T.logoUrl?s.jsx(Hr,{src:T.logoUrl,alt:T.name}):null,s.jsx(Ss,{className:"text-2xl bg-primary/10",children:s.jsx(sr,{className:"h-10 w-10 text-primary"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"logo-upload",children:s.jsx(B,{variant:"outline",className:"gap-2",asChild:!0,children:s.jsxs("span",{children:[s.jsx(gi,{className:"h-4 w-4"}),"Upload New Logo"]})})}),s.jsx("input",{id:"logo-upload",type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:we,"data-testid":"input-logo-upload"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"JPG, PNG, or WebP. 256x256px recommended. Max 5MB."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll be able to crop and resize after uploading."})]})]}):s.jsxs("div",{className:"flex items-center gap-4","data-testid":"text-logo",children:[s.jsxs(Ns,{className:"h-16 w-16",children:[T.logoUrl?s.jsx(Hr,{src:T.logoUrl,alt:T.name}):null,s.jsx(Ss,{className:"bg-primary/10",children:s.jsx(sr,{className:"h-8 w-8 text-primary"})})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:T.logoUrl?"Logo uploaded":"No logo uploaded yet"})]})})]}),s.jsx(Np,{open:_,imageSrc:A,onApply:re=>{C(re),P(!1),$(null)},onCancel:()=>{P(!1),$(null)}}),s.jsxs(_e,{"data-testid":"section-plan",children:[s.jsxs(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(QC,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Subscription Plan"}),s.jsx(_r,{children:"Current billing plan"})]})]}),r&&Je("plan","plan")]}),s.jsx(Ee,{children:b==="plan"&&r?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Select Plan"}),s.jsxs(ev,{value:N.planId||"",onValueChange:re=>w({...N,planId:re}),children:[s.jsx(Pf,{"data-testid":"select-plan",children:s.jsx(tv,{placeholder:"Choose a plan"})}),s.jsx(Tf,{children:Y?.map(re=>s.jsxs(ko,{value:re.id.toString(),"data-testid":`select-plan-option-${re.id}`,children:[re.name," - $",(re.priceMonthly/100).toFixed(0),"/mo (",re.dogsLimit!=null?`${re.dogsLimit} dogs`:"custom",")"]},re.id))})]})]})}):s.jsxs("div",{className:"grid sm:grid-cols-2 gap-x-8 gap-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Plan"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-plan-name",children:[s.jsx(Bs,{className:"h-3.5 w-3.5 text-muted-foreground"}),U?U.name:s.jsx("span",{className:"text-muted-foreground",children:"No plan selected"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Price"}),s.jsx("p",{"data-testid":"text-plan-price",children:U?U.priceMonthly===0?"Free":`$${(U.priceMonthly/100).toFixed(0)}/month`:s.jsx("span",{className:"text-muted-foreground",children:""})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Pet Limit"}),s.jsx("p",{"data-testid":"text-plan-dogs",children:U?U.dogsLimit!=null?`${U.dogsLimit} pets`:"Custom":s.jsx("span",{className:"text-muted-foreground",children:""})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Status"}),s.jsx("div",{"data-testid":"text-subscription-status",children:T.subscriptionStatus?s.jsx(vt,{variant:"secondary",className:T.subscriptionStatus==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 border-0":T.subscriptionStatus==="trial"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border-0":"border-0",children:T.subscriptionStatus.charAt(0).toUpperCase()+T.subscriptionStatus.slice(1)}):s.jsx("span",{className:"text-muted-foreground",children:""})})]}),T.subscriptionStatus==="trial"&&Ae>0&&s.jsx("div",{className:"sm:col-span-2",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Ae," days remaining in free trial"]})})]})})]}),s.jsxs(_e,{"data-testid":"section-business",children:[s.jsxs(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(En,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Organization Info"}),s.jsx(_r,{children:"Basic details and public profile"})]})]}),Je("business","business")]}),s.jsx(Ee,{children:b==="business"?s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Rescue Name"}),s.jsx(He,{value:N.name||"",onChange:re=>w({...N,name:re.target.value}),"data-testid":"input-business-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Business Email"}),s.jsx(He,{value:N.contactEmail||"",onChange:re=>w({...N,contactEmail:re.target.value}),"data-testid":"input-business-email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Website"}),s.jsx(He,{value:N.websiteUrl||"",onChange:re=>w({...N,websiteUrl:re.target.value}),"data-testid":"input-business-website"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Species Handled"}),s.jsxs(ev,{value:N.speciesHandled||"dogs",onValueChange:re=>w({...N,speciesHandled:re}),children:[s.jsx(Pf,{"data-testid":"select-species-handled",children:s.jsx(tv,{})}),s.jsxs(Tf,{children:[s.jsx(ko,{value:"dogs",children:"Dogs Only"}),s.jsx(ko,{value:"cats",children:"Cats Only"}),s.jsx(ko,{value:"both",children:"Dogs & Cats"})]})]})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Description"}),s.jsx(vi,{value:N.description||"",onChange:re=>w({...N,description:re.target.value}),"data-testid":"input-business-description"})]})]}):s.jsxs("div",{className:"grid sm:grid-cols-2 gap-x-8 gap-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Rescue Name"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-business-name",children:[s.jsx(En,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.name]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Business Email"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-business-email",children:[s.jsx(Kf,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.contactEmail||s.jsx("span",{className:"text-muted-foreground",children:""})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Website"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-business-website",children:[s.jsx(df,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.websiteUrl?s.jsx("a",{href:T.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:T.websiteUrl}):s.jsx("span",{className:"text-muted-foreground",children:""})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Species Handled"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-species-handled",children:[s.jsx(li,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.speciesHandled==="both"?"Dogs & Cats":T.speciesHandled==="cats"?"Cats Only":"Dogs Only"]})]}),T.description&&s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Description"}),s.jsx("p",{className:"text-sm","data-testid":"text-business-description",children:T.description})]})]})})]}),s.jsxs(_e,{"data-testid":"section-contact",children:[s.jsxs(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ff,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Who to Reach Out To"}),s.jsx(_r,{children:"Primary contact information"})]})]}),Je("contact","contact")]}),s.jsx(Ee,{children:b==="contact"?s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Contact Name"}),s.jsx(He,{value:N.contactName||"",onChange:re=>w({...N,contactName:re.target.value}),"data-testid":"input-contact-name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Phone Number"}),s.jsx(He,{value:N.contactPhone||"",onChange:re=>w({...N,contactPhone:re.target.value}),"data-testid":"input-contact-phone"})]})]}):s.jsxs("div",{className:"grid sm:grid-cols-2 gap-x-8 gap-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Contact Name"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-contact-name",children:[s.jsx(ff,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.contactName||s.jsx("span",{className:"text-muted-foreground",children:""})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Phone Number"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-contact-phone",children:[s.jsx(lE,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.contactPhone||s.jsx("span",{className:"text-muted-foreground",children:""})]})]})]})})]}),s.jsxs(_e,{"data-testid":"section-social",children:[s.jsxs(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(df,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Social Media"}),s.jsx(_r,{children:"Social media profile links"})]})]}),Je("social","social")]}),s.jsx(Ee,{children:b==="social"?s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Facebook"}),s.jsx(He,{value:N.socialFacebook||"",onChange:re=>w({...N,socialFacebook:re.target.value}),placeholder:"https://facebook.com/yourrescue","data-testid":"input-social-facebook"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Instagram"}),s.jsx(He,{value:N.socialInstagram||"",onChange:re=>w({...N,socialInstagram:re.target.value}),placeholder:"https://instagram.com/yourrescue","data-testid":"input-social-instagram"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"X (Twitter)"}),s.jsx(He,{value:N.socialTwitter||"",onChange:re=>w({...N,socialTwitter:re.target.value}),placeholder:"https://x.com/yourrescue","data-testid":"input-social-twitter"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Nextdoor"}),s.jsx(He,{value:N.socialNextdoor||"",onChange:re=>w({...N,socialNextdoor:re.target.value}),placeholder:"https://nextdoor.com/pages/yourrescue","data-testid":"input-social-nextdoor"})]})]}):s.jsxs("div",{className:"grid sm:grid-cols-2 gap-x-8 gap-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Facebook"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-social-facebook",children:[s.jsx(vu,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.socialFacebook?s.jsx("a",{href:T.socialFacebook,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:T.socialFacebook.replace(/^https?:\/\//,"").replace(/\/$/,"")}):s.jsx("span",{className:"text-muted-foreground",children:""})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Instagram"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-social-instagram",children:[s.jsx(_n,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.socialInstagram?s.jsx("a",{href:T.socialInstagram,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:T.socialInstagram.replace(/^https?:\/\//,"").replace(/\/$/,"")}):s.jsx("span",{className:"text-muted-foreground",children:""})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"X (Twitter)"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-social-twitter",children:[s.jsx(wu,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.socialTwitter?s.jsx("a",{href:T.socialTwitter,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:T.socialTwitter.replace(/^https?:\/\//,"").replace(/\/$/,"")}):s.jsx("span",{className:"text-muted-foreground",children:""})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-0.5",children:"Nextdoor"}),s.jsxs("p",{className:"flex items-center gap-1.5","data-testid":"text-social-nextdoor",children:[s.jsx(bu,{className:"h-3.5 w-3.5 text-muted-foreground"}),T.socialNextdoor?s.jsx("a",{href:T.socialNextdoor,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:T.socialNextdoor.replace(/^https?:\/\//,"").replace(/\/$/,"")}):s.jsx("span",{className:"text-muted-foreground",children:""})]})]})]})})]}),s.jsxs(_e,{"data-testid":"section-instagram",children:[s.jsx(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_n,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Instagram Posting"}),s.jsx(_r,{children:"Connect your Instagram to post pet portraits directly"})]})]})}),s.jsx(Ee,{children:K?.connected?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vt,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Connected"}),K.username&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",K.username]})]}),s.jsx(B,{variant:"outline",size:"sm",disabled:E,onClick:async()=>{L(!0);try{const re=await mr(),Ke=r&&t?`${ta}/disconnect?orgId=${t}`:`${ta}/disconnect`;await fetch(Ke,{method:"DELETE",headers:re}),v({title:"Instagram Disconnected"}),z()}catch{v({title:"Failed to disconnect",variant:"destructive"})}finally{L(!1)}},children:"Disconnect"})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your Instagram Business account to post pet portraits with one click from any pet's profile page."}),s.jsxs(B,{variant:"outline",className:"gap-2",onClick:()=>{const re=l?.access_token||"",Ke=r&&t?`${ta}/connect?orgId=${t}&token=${encodeURIComponent(re)}`:`${ta}/connect?token=${encodeURIComponent(re)}`;window.location.href=Ke},children:[s.jsx(_n,{className:"h-4 w-4"}),"Connect Instagram"]})]})})]}),s.jsxs(_e,{"data-testid":"section-billing",children:[s.jsxs(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gf,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Address for Invoicing"}),s.jsx(_r,{children:"Billing address on file"})]})]}),Je("billing","billing")]}),s.jsx(Ee,{children:b==="billing"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Street Address"}),s.jsx(He,{value:N.billingStreet||"",onChange:re=>w({...N,billingStreet:re.target.value}),"data-testid":"input-billing-street"})]}),s.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"City"}),s.jsx(He,{value:N.billingCity||"",onChange:re=>w({...N,billingCity:re.target.value}),"data-testid":"input-billing-city"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"State"}),s.jsx(He,{value:N.billingState||"",onChange:re=>w({...N,billingState:re.target.value}),"data-testid":"input-billing-state"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"ZIP"}),s.jsx(He,{value:N.billingZip||"",onChange:re=>w({...N,billingZip:re.target.value}),"data-testid":"input-billing-zip"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Country"}),s.jsx(He,{value:N.billingCountry||"",onChange:re=>w({...N,billingCountry:re.target.value}),"data-testid":"input-billing-country"})]})]}):s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{"data-testid":"text-billing-street",children:T.billingStreet||s.jsx("span",{className:"text-muted-foreground",children:"No street address"})}),s.jsx("p",{"data-testid":"text-billing-city-state",children:T.billingCity||T.billingState||T.billingZip?[T.billingCity,T.billingState,T.billingZip].filter(Boolean).join(", "):s.jsx("span",{className:"text-muted-foreground",children:"No city/state/zip"})}),s.jsx("p",{"data-testid":"text-billing-country",children:T.billingCountry||s.jsx("span",{className:"text-muted-foreground",children:"No country"})})]})})]}),r&&s.jsxs(_e,{"data-testid":"section-notes",children:[s.jsxs(Mt,{className:"flex flex-row items-start justify-between gap-2 pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mE,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx(qt,{className:"text-base",children:"Internal Notes"}),s.jsx(_r,{children:"Private notes (not visible to rescue)"})]})]}),Je("notes","notes")]}),s.jsx(Ee,{children:b==="notes"?s.jsx(vi,{value:N.notes||"",onChange:re=>w({...N,notes:re.target.value}),className:"min-h-[100px]","data-testid":"input-notes"}):s.jsx("p",{"data-testid":"text-notes",className:T.notes?"":"text-muted-foreground",children:T.notes||"No notes yet"})})]})]})]})]})}function U4(){const t=Si().slug,{isAdmin:r}=yr(),i=x.useRef(null),{data:o,isLoading:l,error:u}=ut({queryKey:["/api/rescue",t]}),[d,f]=x.useState("all"),m=`${o?.name} - Adoptable Pets`,g=`Check out the adorable pets available for adoption at ${o?.name}!`,v=()=>{window.print()};if(l)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b print:hidden",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsx(gr,{})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[s.jsx(Kt,{className:"h-16 w-48 mx-auto"}),s.jsx(Kt,{className:"h-6 w-64 mx-auto"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8",children:[s.jsx(Kt,{className:"aspect-square rounded-md"}),s.jsx(Kt,{className:"aspect-square rounded-md"})]})]})})]});if(u||!o)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsx(gr,{})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[s.jsx(Ve,{className:"h-20 w-20 mx-auto mb-6 text-muted-foreground/50"}),s.jsx("h1",{className:"text-2xl font-serif font-bold mb-3",children:"Rescue Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"This rescue page doesn't exist or is no longer active."}),s.jsx(B,{"data-testid":"button-back-home",asChild:!0,children:s.jsx(ye,{href:"/",children:"Back to Home"})})]})]});const b=o.dogs.some(P=>P.species!=="cat"),S=o.dogs.some(P=>P.species==="cat"),N=b&&S,w=d==="all"?o.dogs:o.dogs.filter(P=>d==="cat"?P.species==="cat":P.species!=="cat"),j=w.filter(P=>P.portrait?.generatedImageUrl),C=w.filter(P=>!P.portrait?.generatedImageUrl),_=d==="dog"?"Pups Available for Adoption":d==="cat"?"Kitties Available for Adoption":"Available for Adoption";return s.jsxs("div",{className:"min-h-screen bg-muted/50 dark:bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b print:hidden",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{variant:"ghost",size:"sm","data-testid":"link-gallery",asChild:!0,children:s.jsx(ye,{href:"/gallery",children:"Gallery"})}),r&&s.jsx(B,{variant:"outline",size:"sm",className:"gap-1","data-testid":"button-back-to-admin",asChild:!0,children:s.jsxs(ye,{href:"/admin",children:[s.jsx(Vs,{className:"h-3 w-3"}),"Admin Panel"]})}),s.jsx(gr,{})]})]})}),s.jsx(xa,{}),s.jsxs("div",{className:"container mx-auto px-4 py-6 print:py-0 print:px-0",children:[s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1 -ml-2 mb-4 print:hidden","data-testid":"button-back",asChild:!0,children:s.jsxs(ye,{href:r?"/admin":"/dashboard",children:[s.jsx(Er,{className:"h-4 w-4"}),r?"Back to Admin":"Back to My Rescue"]})}),s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{ref:i,className:"paw-border bg-white dark:bg-card overflow-visible shadow-lg print:shadow-none","data-testid":"showcase-card",children:s.jsxs("div",{className:"showcase-inner",children:[s.jsxs("div",{className:"pt-8 pb-5 px-6 text-center border-b-2 border-primary/15",children:[s.jsx("h1",{className:"font-serif text-3xl sm:text-4xl font-bold text-primary tracking-wide mb-3","data-testid":"text-rescue-name",children:o.name}),o.logoUrl&&s.jsx("div",{className:"protected-image-wrapper max-h-28 max-w-[280px] mx-auto mb-3",children:s.jsx("img",{src:o.logoUrl,alt:o.name,className:"max-h-28 max-w-[280px] object-contain protected-image",draggable:!1,"data-testid":"img-rescue-logo"})}),o.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-md mx-auto","data-testid":"text-rescue-description",children:o.description}),o.websiteUrl&&s.jsxs("a",{href:o.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-primary hover:underline mt-2 print:hidden","data-testid":"link-rescue-website",children:[s.jsx(kn,{className:"h-3 w-3"}),o.websiteUrl.replace(/^https?:\/\//,"").replace(/\/$/,"")]}),(o.socialFacebook||o.socialInstagram||o.socialTwitter||o.socialNextdoor)&&s.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3 print:hidden","data-testid":"section-social-links",children:[o.socialFacebook&&s.jsx("a",{href:o.socialFacebook,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",title:"Facebook",children:s.jsx(vu,{className:"h-5 w-5"})}),o.socialInstagram&&s.jsx("a",{href:o.socialInstagram,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",title:"Instagram",children:s.jsx(_n,{className:"h-5 w-5"})}),o.socialTwitter&&s.jsx("a",{href:o.socialTwitter,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",title:"X (Twitter)",children:s.jsx(wu,{className:"h-5 w-5"})}),o.socialNextdoor&&s.jsx("a",{href:o.socialNextdoor,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",title:"Nextdoor",children:s.jsx(bu,{className:"h-5 w-5"})})]})]}),o.dogs.length>0&&s.jsxs("div",{className:"py-4 px-6 text-center",children:[s.jsx("h2",{className:"font-serif text-xl font-semibold text-foreground tracking-wide","data-testid":"text-available-headline",children:_}),s.jsx("div",{className:"w-16 h-0.5 bg-primary/30 mx-auto mt-2 rounded-full"}),N&&s.jsxs("div",{className:"flex justify-center gap-2 mt-3 print:hidden",children:[s.jsxs(B,{variant:d==="all"?"default":"outline",size:"sm",onClick:()=>f("all"),className:"gap-1","data-testid":"button-showcase-filter-all",children:[s.jsx(li,{className:"h-3.5 w-3.5"}),"All Pets"]}),s.jsxs(B,{variant:d==="dog"?"default":"outline",size:"sm",onClick:()=>f("dog"),className:"gap-1","data-testid":"button-showcase-filter-dogs",children:[s.jsx(Ve,{className:"h-3.5 w-3.5"}),"Pups"]}),s.jsxs(B,{variant:d==="cat"?"default":"outline",size:"sm",onClick:()=>f("cat"),className:"gap-1","data-testid":"button-showcase-filter-cats",children:[s.jsx(et,{className:"h-3.5 w-3.5"}),"Kitties"]})]})]}),w.length===0?s.jsxs("div",{className:"py-16 px-6 text-center",children:[s.jsx(sr,{className:"h-12 w-12 mx-auto mb-4 text-primary/40"}),s.jsx("p",{className:"text-muted-foreground font-serif text-lg",children:o.dogs.length===0?"No adoptable pets at the moment":"No pets match this filter"}),s.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:o.dogs.length===0?"Check back soon!":"Try viewing all pets instead"})]}):s.jsx("div",{className:"p-4",children:s.jsx("div",{className:`grid gap-3 ${w.length===1?"grid-cols-1 max-w-sm mx-auto":w.length<=4?"grid-cols-2":"grid-cols-2 sm:grid-cols-3"}`,children:[...j,...C].map(P=>{const A=P.portrait?.generatedImageUrl||P.originalPhotoUrl,$=P.species==="cat";return s.jsx(ye,{href:`/pawfile/${P.id}`,className:"block print:pointer-events-none",children:s.jsxs("div",{className:"border border-primary/10 rounded-md overflow-hidden hover-elevate cursor-pointer","data-testid":`card-dog-${P.id}`,children:[s.jsx("div",{className:"relative aspect-square protected-image-wrapper",children:A?s.jsx("img",{src:A,alt:P.name,className:"w-full h-full object-cover protected-image",draggable:!1,"data-testid":`img-dog-${P.id}`}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center",children:$?s.jsx(et,{className:"h-10 w-10 text-muted-foreground/40"}):s.jsx(Ve,{className:"h-10 w-10 text-muted-foreground/40"})})}),s.jsxs("div",{className:"p-2 text-center bg-white dark:bg-card",children:[s.jsx("p",{className:"font-serif font-semibold text-sm truncate","data-testid":`text-dog-name-${P.id}`,children:P.name}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[P.breed||($?"Domestic":"Mixed Breed"),P.age?`  ${P.age}`:""]})]})]})},P.id)})})}),s.jsxs("div",{className:"border-t-2 border-primary/15 py-4 pb-6 px-6 flex flex-col items-center justify-center gap-3",children:[(o.contactEmail||o.contactPhone)&&s.jsxs("div",{className:"text-center","data-testid":"section-contact-footer",children:[s.jsx("p",{className:"text-sm font-serif font-semibold text-foreground mb-1",children:"For more information about any of these pets"}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 text-sm text-muted-foreground",children:[o.contactEmail&&s.jsx("a",{href:`mailto:${o.contactEmail}`,className:"text-primary hover:underline","data-testid":"link-contact-email",children:o.contactEmail}),o.contactEmail&&o.contactPhone&&s.jsx("span",{className:"text-muted-foreground/40",children:"|"}),o.contactPhone&&s.jsx("a",{href:`tel:${o.contactPhone}`,className:"text-primary hover:underline","data-testid":"link-contact-phone",children:o.contactPhone})]})]}),s.jsxs("span",{className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-4 w-4"}),s.jsx(et,{className:"h-4 w-4"})]}),"Pawtrait Pals"]})]})]})}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-4 print:hidden",children:s.jsxs(B,{variant:"outline",onClick:v,className:"gap-2","data-testid":"button-print",children:[s.jsx(Ew,{className:"h-4 w-4"}),"Print"]})}),s.jsxs("div",{className:"mt-3 print:hidden",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Share this showcase:"}),s.jsx(p0,{title:m,text:g,orgId:o.id,orgWebsiteUrl:o.websiteUrl||void 0,captureRef:i,showcaseName:o.name})]})]})]})]})}var Nj="AlertDialog",[z4]=us(Nj,[Bb]),Gs=Bb(),Sj=e=>{const{__scopeAlertDialog:t,...r}=e,i=Gs(t);return s.jsx(mp,{...i,...r,modal:!0})};Sj.displayName=Nj;var B4="AlertDialogTrigger",V4=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,o=Gs(r);return s.jsx(n0,{...o,...i,ref:t})});V4.displayName=B4;var W4="AlertDialogPortal",kj=e=>{const{__scopeAlertDialog:t,...r}=e,i=Gs(t);return s.jsx(gp,{...i,...r})};kj.displayName=W4;var q4="AlertDialogOverlay",_j=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,o=Gs(r);return s.jsx(Xo,{...o,...i,ref:t})});_j.displayName=q4;var fi="AlertDialogContent",[H4,K4]=z4(fi),G4=Jv("AlertDialogContent"),Cj=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:i,...o}=e,l=Gs(r),u=x.useRef(null),d=lt(t,u),f=x.useRef(null);return s.jsx(zR,{contentName:fi,titleName:Ej,docsSlug:"alert-dialog",children:s.jsx(H4,{scope:r,cancelRef:f,children:s.jsxs(Zo,{role:"alertdialog",...l,...o,ref:d,onOpenAutoFocus:$e(o.onOpenAutoFocus,m=>{m.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[s.jsx(G4,{children:i}),s.jsx(Y4,{contentRef:u})]})})})});Cj.displayName=fi;var Ej="AlertDialogTitle",Pj=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,o=Gs(r);return s.jsx(el,{...o,...i,ref:t})});Pj.displayName=Ej;var Tj="AlertDialogDescription",Rj=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,o=Gs(r);return s.jsx(tl,{...o,...i,ref:t})});Rj.displayName=Tj;var Q4="AlertDialogAction",Aj=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,o=Gs(r);return s.jsx(yu,{...o,...i,ref:t})});Aj.displayName=Q4;var Ij="AlertDialogCancel",Oj=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...i}=e,{cancelRef:o}=K4(Ij,r),l=Gs(r),u=lt(t,o);return s.jsx(yu,{...l,...i,ref:u})});Oj.displayName=Ij;var Y4=({contentRef:e})=>{const t=`\`${fi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fi}\` by passing a \`${Tj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},J4=Sj,X4=kj,Lj=_j,Dj=Cj,Mj=Aj,$j=Oj,Fj=Pj,Uj=Rj;const Z4=J4,eI=X4,zj=x.forwardRef(({className:e,...t},r)=>s.jsx(Lj,{className:Le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));zj.displayName=Lj.displayName;const Bj=x.forwardRef(({className:e,...t},r)=>s.jsxs(eI,{children:[s.jsx(zj,{}),s.jsx(Dj,{ref:r,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Bj.displayName=Dj.displayName;const Vj=({className:e,...t})=>s.jsx("div",{className:Le("flex flex-col space-y-2 text-center sm:text-left",e),...t});Vj.displayName="AlertDialogHeader";const Wj=({className:e,...t})=>s.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Wj.displayName="AlertDialogFooter";const qj=x.forwardRef(({className:e,...t},r)=>s.jsx(Fj,{ref:r,className:Le("text-lg font-semibold",e),...t}));qj.displayName=Fj.displayName;const Hj=x.forwardRef(({className:e,...t},r)=>s.jsx(Uj,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));Hj.displayName=Uj.displayName;const Kj=x.forwardRef(({className:e,...t},r)=>s.jsx(Mj,{ref:r,className:Le(op(),e),...t}));Kj.displayName=Mj.displayName;const Gj=x.forwardRef(({className:e,...t},r)=>s.jsx($j,{ref:r,className:Le(op({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Gj.displayName=$j.displayName;function sv(){const e=Si(),t=e.orgId?parseInt(e.orgId):null,[,r]=An(),{isLoading:i,isAuthenticated:o,isAdmin:l}=yr(),{toast:u}=Pr(),d=t!==null&&l,[f,m]=x.useState(!1),[g,v]=x.useState(!1),{data:b,isLoading:S}=ut({queryKey:["/api/plans"]}),{data:N}=ut({queryKey:["/api/my-organization"],enabled:!d&&o}),w=t||N?.id||null,{data:j}=ut({queryKey:["/api/subscription-info",w],queryFn:async()=>{const z=await mr(),U=await fetch(`/api/subscription-info?orgId=${w}`,{headers:z});if(!U.ok)throw new Error("Failed to fetch subscription info");return U.json()},enabled:!!w&&o}),C=j?.hasStripeSubscription||j?.subscriptionStatus==="active",_=j?.currentPlanId||N?.planId,P=(b||[]).filter(z=>z.isActive).sort((z,U)=>z.priceMonthly-U.priceMonthly),A=P.find(z=>z.priceMonthly===0),$=N?.hasUsedFreeTrial===!0,E=()=>{r(d&&t?`/admin/rescue/${t}`:"/onboarding")},L=Ft({mutationFn:async z=>{const U=d&&t?`/api/admin/organizations/${t}/select-plan`:"/api/select-plan";return(await $t("POST",U,{planId:z})).json()},onSuccess:()=>{tt.invalidateQueries({queryKey:["/api/my-organization"]}),d&&t?(tt.invalidateQueries({queryKey:["/api/admin/organizations",t]}),tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]}),u({title:"Plan selected!",description:"Plan has been set for this rescue."})):u({title:"Plan activated!",description:"You're all set. Let's complete your rescue details."}),E()},onError:z=>{u({title:"Error",description:z.message,variant:"destructive"})}}),Q=Ft({mutationFn:async z=>{const U={planId:z,testMode:g};return w&&(U.orgId=w),(await $t("POST","/api/stripe/checkout",U)).json()},onSuccess:z=>{z.url&&(window.location.href=z.url)},onError:z=>{u({title:"Error",description:z.message,variant:"destructive"})}}),X=Ft({mutationFn:async z=>(await $t("POST","/api/stripe/change-plan",{planId:z,orgId:w})).json(),onSuccess:z=>{if(z.action==="upgrade"){Q.mutate(z.planId);return}if(tt.invalidateQueries({queryKey:["/api/my-organization"]}),tt.invalidateQueries({queryKey:["/api/subscription-info",w]}),z.renewalDate){const U=new Date(z.renewalDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});u({title:"Plan change scheduled",description:`Your plan will renew as ${z.newPlanName} on ${U}.`})}r("/dashboard")},onError:z=>{u({title:"Error",description:z.message,variant:"destructive"})}}),ee=Ft({mutationFn:async()=>(await $t("POST","/api/stripe/cancel-plan-change",{orgId:w})).json(),onSuccess:()=>{tt.invalidateQueries({queryKey:["/api/my-organization"]}),tt.invalidateQueries({queryKey:["/api/subscription-info",w]}),u({title:"Plan change canceled",description:"Your current plan will continue unchanged."})},onError:z=>{u({title:"Error",description:z.message,variant:"destructive"})}}),le=z=>{C&&_&&_!==z.id&&z.priceMonthly>0?X.mutate(z.id):z.priceMonthly===0?L.mutate(z.id):Q.mutate(z.id)},T=()=>{A&&L.mutate(A.id)},Z=L.isPending||Q.isPending||X.isPending;if(i)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-primary animate-pulse"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!o)return window.location.href="/login",null;const Y=P.find(z=>z.id===_),ge=j?.pendingPlanName,K=j?.renewalDate?new Date(j.renewalDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):null;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary","data-testid":"link-home-choose-plan",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[_&&s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1","data-testid":"button-back-to-dashboard",asChild:!0,children:s.jsxs(ye,{href:"/dashboard",children:[s.jsx(Er,{className:"h-4 w-4"}),"Back to Dashboard"]})}),l&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(kp,{id:"test-mode",checked:g,onCheckedChange:v,"data-testid":"switch-test-mode"}),s.jsxs(zs,{htmlFor:"test-mode",className:"text-xs text-muted-foreground flex items-center gap-1 cursor-pointer",children:[s.jsx(JC,{className:"h-3 w-3"}),"Test"]})]}),s.jsx(gr,{})]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx(_t,{className:"h-12 w-12 mx-auto text-primary"}),s.jsx("h1",{className:"text-3xl font-serif font-bold","data-testid":"text-choose-plan-title",children:C?"Change Your Plan":"Choose Your Plan"}),s.jsx("p",{className:"text-muted-foreground max-w-lg mx-auto text-base","data-testid":"text-choose-plan-subtitle",children:C?"Select a new plan below. Upgrades take effect immediately. Downgrades take effect at your next billing cycle.":"Start with a free trial or pick the plan that fits your rescue. You can upgrade or change plans anytime."})]}),ge&&K&&s.jsx(_e,{className:"border-primary/50 max-w-2xl mx-auto",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(GC,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-medium","data-testid":"text-pending-plan-change",children:["Your plan will renew as ",ge," on ",K,"."]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["If you need to make any changes, please do so before ",K,"."]}),s.jsx(B,{variant:"outline",size:"sm",className:"mt-3 gap-1",onClick:()=>ee.mutate(),disabled:ee.isPending,"data-testid":"button-cancel-plan-change",children:ee.isPending?"Canceling...":"Keep Current Plan"})]})]})})}),S?s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(z=>s.jsx(Kt,{className:"h-80"},z))}):s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-5",children:P.map(z=>{const U=z.priceMonthly===0,G=z.name==="Professional"||z.name==="Pro",te=z.id===_,D=z.id===j?.pendingPlanId,I=Y&&z.priceMonthly<Y.priceMonthly&&z.priceMonthly>0,fe=Y&&z.priceMonthly>Y.priceMonthly;let ue="",xe=!1;return te?(ue="Current Plan",xe=!0):D?(ue="Change Pending",xe=!0):U&&$?(ue="Trial Used",xe=!0):U?ue="Start Free Trial":C&&fe?ue="Upgrade":C&&I?ue="Downgrade":ue="Subscribe",s.jsxs(_e,{className:`relative flex flex-col ${G&&!te?"border-primary":""} ${te?"border-primary ring-2 ring-primary/20":""}`,"data-testid":`card-plan-${z.id}`,children:[te&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx(vt,{className:"bg-primary text-primary-foreground",children:"Your Plan"})}),G&&!te&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx(vt,{className:"bg-primary text-primary-foreground",children:"Most Popular"})}),s.jsxs(Mt,{className:"text-center pb-2",children:[s.jsx(qt,{className:"text-lg","data-testid":`text-plan-name-${z.id}`,children:z.name}),s.jsx("div",{className:"mt-2",children:U?s.jsx("div",{className:"text-3xl font-bold","data-testid":`text-plan-price-${z.id}`,children:"Free"}):s.jsxs("div",{children:[s.jsxs("span",{className:"text-3xl font-bold","data-testid":`text-plan-price-${z.id}`,children:["$",(z.priceMonthly/100).toFixed(0)]}),s.jsx("span",{className:"text-muted-foreground",children:"/mo"})]})})]}),s.jsxs(Ee,{className:"flex-1 space-y-3",children:[z.description&&s.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`text-plan-description-${z.id}`,children:z.description}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:["Up to ",z.dogsLimit," pets"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:[z.monthlyPortraitCredits||20," portrait credits/mo"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsx("span",{children:"4 free edits per portrait"})]}),U&&z.trialDays?s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:[z.trialDays,"-day free trial"]})]}):null,!U&&z.overagePriceCents?s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:["$",(z.overagePriceCents/100).toFixed(0)," per extra portrait"]})]}):null,!U&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Cr,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsx("span",{children:"Add up to 5 extra pets ($3/pet/mo)"})]}),!U&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsx("span",{children:"Priority support"})]})]})]}),s.jsxs(gu,{className:"flex flex-col gap-2",children:[s.jsx(B,{className:"w-full gap-1",variant:te?"secondary":G?"default":"outline",onClick:()=>le(z),disabled:Z||xe,"data-testid":`button-select-plan-${z.id}`,children:Z?"Please wait...":s.jsxs(s.Fragment,{children:[!xe&&fe&&s.jsx(Rw,{className:"h-4 w-4"}),ue]})}),U&&$&&s.jsx("p",{className:"text-xs text-muted-foreground text-center","data-testid":"text-trial-used",children:"Your organization has already used its free trial"}),C&&I&&!D&&s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Takes effect at next billing cycle"})]})]},z.id)})}),s.jsxs("p",{className:"text-center text-sm text-muted-foreground","data-testid":"text-custom-pricing",children:["Need more pets? ",s.jsx("a",{href:"mailto:support@pawtraitpals.com",className:"underline hover-elevate","data-testid":"link-contact-pricing",children:"Contact us"})," for custom pricing."]}),!C&&!_&&s.jsx("div",{className:"text-center",children:s.jsxs(B,{variant:"ghost",className:"gap-2",onClick:()=>m(!0),"data-testid":"button-skip-plan",children:["Skip for now ",s.jsx(iu,{className:"h-4 w-4"})]})})]})}),s.jsx(Z4,{open:f,onOpenChange:m,children:s.jsxs(Bj,{children:[s.jsxs(Vj,{children:[s.jsx(qj,{children:"Thanks for stopping by!"}),s.jsx(Hj,{children:$?"We'd love to help your rescue pets find their forever homes. When you're ready, come back and choose a plan that fits your rescue.":"We'd love to help your rescue pets find their forever homes. Whenever you're ready, come back and give Pawtrait Pals a try  your free trial will be waiting for you."})]}),s.jsxs(Wj,{children:[s.jsx(Gj,{onClick:()=>r("/"),"data-testid":"button-goodbye-continue",children:"Got it"}),!$&&s.jsx(Kj,{onClick:T,"data-testid":"button-start-free-trial",children:"Actually, start my Free Trial"})]})]})})]})}const Za=["welcome","logo","species","contact","social","location","billing","plan","finish"],tI=[{value:"dogs",label:"Dogs Only",icon:s.jsx(Ve,{className:"h-10 w-10 text-primary"})},{value:"cats",label:"Cats Only",icon:s.jsx(et,{className:"h-10 w-10 text-primary"})},{value:"both",label:"Both",icon:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ve,{className:"h-8 w-8 text-primary"}),s.jsx(et,{className:"h-8 w-8 text-primary"})]})}];function zh(e,t,r=e){return{[`${r}Street`]:t[`${e}Street`]||null,[`${r}City`]:t[`${e}City`]||null,[`${r}State`]:t[`${e}State`]||null,[`${r}Zip`]:t[`${e}Zip`]||null,[`${r}Country`]:t[`${e}Country`]||null}}function nv({prefix:e,values:t,onChange:r}){const i=e==="location"?"":"billing-",o=l=>`input-onboarding-${i}${l.toLowerCase()}`;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[s.jsx(Gf,{className:"h-4 w-4 text-muted-foreground"})," Street Address"]}),s.jsx(He,{placeholder:"123 Main Street",value:t.Street,onChange:l=>r(`${e}Street`,l.target.value),"data-testid":o("street")})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"City"}),s.jsx(He,{placeholder:"City",value:t.City,onChange:l=>r(`${e}City`,l.target.value),"data-testid":o("city")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"State"}),s.jsx(He,{placeholder:"State",value:t.State,onChange:l=>r(`${e}State`,l.target.value),"data-testid":o("state")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"ZIP"}),s.jsx(He,{placeholder:"ZIP",value:t.Zip,onChange:l=>r(`${e}Zip`,l.target.value),"data-testid":o("zip")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Country"}),s.jsx(He,{placeholder:"United States",value:t.Country,onChange:l=>r(`${e}Country`,l.target.value),"data-testid":o("country")})]})]})}function ra({onBack:e,onNext:t,nextLabel:r,nextDisabled:i,backTestId:o,nextTestId:l}){return s.jsxs("div",{className:"flex items-center justify-between pt-4",children:[s.jsxs(B,{variant:"ghost",className:"gap-1",onClick:e,"data-testid":o,children:[s.jsx(Er,{className:"h-4 w-4"})," Back"]}),s.jsxs(B,{className:"gap-2",onClick:t,disabled:i,"data-testid":l,children:[r," ",s.jsx(iu,{className:"h-4 w-4"})]})]})}function av(e,t){return{Street:t[`${e}Street`],City:t[`${e}City`],State:t[`${e}State`],Zip:t[`${e}Zip`],Country:t[`${e}Country`]}}function iv(){const e=Si(),t=e.orgId?parseInt(e.orgId):null,[,r]=An(),{isLoading:i,isAuthenticated:o,isAdmin:l}=yr(),{toast:u}=Pr(),d=!!t&&l,[f,m]=x.useState(null),[g,v]=x.useState(null),[b,S]=x.useState(!1),[N,w]=x.useState(null),[j,C]=x.useState({speciesHandled:"",websiteUrl:"",contactEmail:"",socialFacebook:"",socialInstagram:"",socialTwitter:"",socialNextdoor:"",locationStreet:"",locationCity:"",locationState:"",locationZip:"",locationCountry:"",billingStreet:"",billingCity:"",billingState:"",billingZip:"",billingCountry:"",billingSameAsLocation:!0,billingLater:!1}),[_,P]=x.useState(!1),[A,$]=x.useState(!1),E=d?`/api/admin/organizations/${t}`:"/api/my-organization",L=d?["/api/admin/organizations",t]:["/api/my-organization"],{data:Q,isLoading:X}=ut({queryKey:["/api/my-organization"],enabled:o&&!d}),{data:ee,isLoading:le}=ut({queryKey:["/api/admin/organizations",t],queryFn:async()=>{const se=await mr(),Fe=await fetch(`/api/admin/organizations/${t}`,{headers:se});return Fe.ok?Fe.json():null},enabled:o&&d}),T=d?ee:Q,Z=d?le:X,Y=d?t:Q?.id||null,{data:ge}=ut({queryKey:["/api/plans"],enabled:o}),K=(ge||[]).filter(se=>se.isActive).sort((se,Fe)=>se.priceMonthly-Fe.priceMonthly);x.useEffect(()=>{!i&&!o&&(window.location.href="/login")},[i,o]);const[z,U]=x.useState(!1);x.useEffect(()=>{T&&T.onboardingCompleted&&r(d?`/admin/rescue/${t}`:"/dashboard")},[T,r,d,t]),x.useEffect(()=>{if(!T||_)return;C(pe=>({...pe,speciesHandled:T.speciesHandled||"",websiteUrl:T.websiteUrl||"",contactEmail:T.contactEmail||"",socialFacebook:T.socialFacebook||"",socialInstagram:T.socialInstagram||"",socialTwitter:T.socialTwitter||"",socialNextdoor:T.socialNextdoor||"",locationStreet:T.locationStreet||"",locationCity:T.locationCity||"",locationState:T.locationState||"",locationZip:T.locationZip||"",locationCountry:T.locationCountry||"",billingStreet:T.billingStreet||"",billingCity:T.billingCity||"",billingState:T.billingState||"",billingZip:T.billingZip||"",billingCountry:T.billingCountry||""})),T.logoUrl&&v(T.logoUrl);const se=!!T.speciesHandled,Fe=!!(T.websiteUrl||T.contactEmail),nt=!!(T.socialFacebook||T.socialInstagram||T.socialTwitter||T.socialNextdoor),Ut=!!T.locationStreet,O=!!T.billingStreet,q=!!T.planId,J=se||Fe||Ut||O||!!T.logoUrl;U(J);let me="welcome";se&&Fe&&Ut&&O&&q?me="finish":se&&Fe&&Ut&&O?me="plan":se&&Fe&&Ut?me="billing":se&&Fe&&(nt||Ut)?me="location":se&&Fe?me="social":se&&(me="contact"),m(me),P(!0)},[T,_]);const G=Ft({mutationFn:async se=>(await $t("PATCH",E,se)).json(),onSuccess:()=>{tt.invalidateQueries({queryKey:L})},onError:se=>{u({title:"Error",description:se.message,variant:"destructive"})}}),te=Ft({mutationFn:async se=>{const Fe=d?`/api/admin/organizations/${t}/select-plan`:"/api/select-plan";return(await $t("POST",Fe,{planId:se})).json()},onSuccess:()=>{tt.invalidateQueries({queryKey:L}),d&&(tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),tt.invalidateQueries({queryKey:["/api/admin/stats"]})),u({title:"Plan selected!",description:"Your rescue is ready to go."}),we()},onError:se=>{u({title:"Error",description:se.message,variant:"destructive"})}}),D=Ft({mutationFn:async se=>{const Fe={planId:se};return Y&&(Fe.orgId=Y),(await $t("POST","/api/stripe/checkout",Fe)).json()},onSuccess:se=>{se.url&&(window.location.href=se.url)},onError:se=>{u({title:"Error",description:se.message,variant:"destructive"})}}),I=se=>{se.priceMonthly===0?te.mutate(se.id):D.mutate(se.id)},fe=["image/jpeg","image/png","image/webp"],ue=se=>{const Fe=se.target.files?.[0];if(!Fe)return;if(!fe.includes(Fe.type)){u({title:"Invalid file type",description:"Please upload a JPG, PNG, or WebP image.",variant:"destructive"});return}if(Fe.size>5*1024*1024){u({title:"File too large",description:"Logo must be under 5MB.",variant:"destructive"});return}const nt=new FileReader;nt.onload=()=>{w(nt.result),S(!0)},nt.readAsDataURL(Fe),se.target.value=""},xe=(se,Fe)=>{C(nt=>({...nt,[se]:Fe}))};if(i||Z||!f)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ve,{className:"h-12 w-12 mx-auto mb-4 text-primary animate-pulse"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!T)return r(d?"/admin":"/dashboard"),null;const ve=Za.indexOf(f),ae=ve/(Za.length-1)*100,we=()=>{const se=ve+1;se<Za.length&&m(Za[se])},Pe=()=>{const se=ve-1;se>=0&&m(Za[se])},Ae=se=>{G.mutate(se,{onSuccess:we})},Qe=()=>{if(!j.speciesHandled){u({title:"Please select one",description:"Let us know which animals your rescue handles.",variant:"destructive"});return}Ae({speciesHandled:j.speciesHandled})},Te=()=>{j.billingSameAsLocation?Ae(zh("location",j,"billing")):j.billingLater?we():Ae(zh("billing",j))},Je=se=>{$(!0),G.mutate({onboardingCompleted:!0},{onSuccess:()=>{r(se==="admin"?`/admin/rescue/${t}`:se==="create"?d?`/create?org=${t}`:"/create":d?`/admin/rescue/${t}`:"/settings")},onError:()=>$(!1)})},re=!!(j.websiteUrl||j.contactEmail),Ke=!!j.locationStreet,ht=!!T.planId,lr=te.isPending||D.isPending;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsx(gr,{})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Getting started"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[ve+1," of ",Za.length]})]}),s.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden","data-testid":"progress-bar",children:s.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500",style:{width:`${ae}%`}})})]}),f==="welcome"&&s.jsx(_e,{"data-testid":"step-welcome",children:s.jsxs(Ee,{className:"pt-8 pb-8 text-center space-y-6",children:[s.jsx("div",{className:"inline-flex p-4 rounded-full bg-primary/10",children:s.jsx(oE,{className:"h-12 w-12 text-primary"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-serif font-bold","data-testid":"text-welcome-title",children:z?`Welcome back, ${T.name}!`:`Welcome! We're so glad to see you, ${T.name}!`}),s.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto",children:z?"We noticed there are a few things you didn't fill in last time. Let's finish getting you set up  it'll only take a moment.":"Let's get your rescue set up so you can start creating beautiful portraits of your adoptable pets."})]}),!z&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"This will only take a minute or two."}),s.jsxs(B,{className:"gap-2",onClick:we,"data-testid":"button-get-started",children:[z?"Let's Finish Up":"Let's Go"," ",s.jsx(iu,{className:"h-4 w-4"})]})]})}),f==="logo"&&s.jsx(_e,{"data-testid":"step-logo",children:s.jsxs(Ee,{className:"pt-8 pb-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h2",{className:"text-xl font-serif font-bold","data-testid":"text-logo-title",children:T.logoUrl&&!g?"Your current logo":g?"Looking good!":"Do you have a logo?"}),s.jsx("p",{className:"text-muted-foreground",children:T.logoUrl&&!g?"This is the logo we have on file. You can keep it or upload a new one.":"We'll use it when we showcase your pets. You can always add one later if you'd like."})]}),s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs(Ns,{className:"h-24 w-24",children:[g?s.jsx(Hr,{src:g,alt:"Logo preview"}):T.logoUrl?s.jsx(Hr,{src:T.logoUrl,alt:T.name}):null,s.jsx(Ss,{className:"text-2xl bg-primary/10",children:s.jsx(sr,{className:"h-12 w-12 text-primary"})})]}),s.jsx("label",{htmlFor:"onboarding-logo-upload",children:s.jsx(B,{variant:"outline",className:"gap-2",asChild:!0,children:s.jsxs("span",{children:[s.jsx(gi,{className:"h-4 w-4"}),g||T.logoUrl?"Change Logo":"Upload Logo"]})})}),s.jsx("input",{id:"onboarding-logo-upload",type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:ue,"data-testid":"input-onboarding-logo"}),g&&g!==T.logoUrl&&s.jsxs(vt,{variant:"secondary",className:"gap-1",children:[s.jsx(Rt,{className:"h-3 w-3"})," New logo ready"]}),T.logoUrl&&!g&&s.jsxs(vt,{variant:"secondary",className:"gap-1",children:[s.jsx(Rt,{className:"h-3 w-3"})," Logo on file"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG, or WebP. 256x256px recommended, max 5MB"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll be able to crop and resize after uploading."}),s.jsx(Np,{open:b,imageSrc:N,onApply:se=>{v(se),S(!1),w(null)},onCancel:()=>{S(!1),w(null)}})]}),s.jsx(ra,{onBack:Pe,onNext:()=>{g&&g!==T.logoUrl?Ae({logoUrl:g}):we()},nextLabel:g&&g!==T.logoUrl?"Save & Continue":T.logoUrl?"Looks Good":"Skip for Now",nextDisabled:G.isPending,backTestId:"button-back-logo",nextTestId:"button-next-logo"})]})}),f==="species"&&s.jsx(_e,{"data-testid":"step-species",children:s.jsxs(Ee,{className:"pt-8 pb-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h2",{className:"text-xl font-serif font-bold","data-testid":"text-species-title",children:T.speciesHandled?"Confirm your species":"What kind of animals does your rescue handle?"}),s.jsx("p",{className:"text-muted-foreground",children:T.speciesHandled?"We have this on file. Feel free to change it if needed.":"This helps us tailor the experience for your organization."})]}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:tI.map(se=>s.jsxs("button",{className:`flex flex-col items-center gap-3 p-6 rounded-md border-2 transition-colors cursor-pointer ${j.speciesHandled===se.value?"border-primary bg-primary/5":"border-border hover-elevate"}`,onClick:()=>xe("speciesHandled",se.value),"data-testid":`button-species-${se.value}`,children:[se.icon,s.jsx("span",{className:"font-medium text-sm",children:se.label})]},se.value))}),s.jsx(ra,{onBack:Pe,onNext:Qe,nextLabel:"Continue",nextDisabled:G.isPending||!j.speciesHandled,backTestId:"button-back-species",nextTestId:"button-next-species"})]})}),f==="contact"&&s.jsx(_e,{"data-testid":"step-contact",children:s.jsxs(Ee,{className:"pt-8 pb-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h2",{className:"text-xl font-serif font-bold","data-testid":"text-contact-title",children:re?"Your contact info":"How can people reach your rescue?"}),s.jsx("p",{className:"text-muted-foreground",children:re?"Here's what we have. Feel free to update anything.":"We'll include this on your pet listings so adopters know how to get in touch. You can always update these later."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[s.jsx(df,{className:"h-4 w-4 text-muted-foreground"})," Website"]}),s.jsx(He,{placeholder:"https://www.yourrescue.org",value:j.websiteUrl,onChange:se=>xe("websiteUrl",se.target.value),"data-testid":"input-onboarding-website"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[s.jsx(Kf,{className:"h-4 w-4 text-muted-foreground"})," Contact Email"]}),s.jsx(He,{placeholder:"info@yourrescue.org",type:"email",value:j.contactEmail,onChange:se=>xe("contactEmail",se.target.value),"data-testid":"input-onboarding-email"})]})]}),s.jsx(ra,{onBack:Pe,onNext:()=>Ae({websiteUrl:j.websiteUrl||null,contactEmail:j.contactEmail||null}),nextLabel:re?"Save & Continue":"Skip for Now",nextDisabled:G.isPending,backTestId:"button-back-contact",nextTestId:"button-next-contact"})]})}),f==="social"&&s.jsx(_e,{"data-testid":"step-social",children:s.jsxs(Ee,{className:"pt-8 pb-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h2",{className:"text-xl font-serif font-bold","data-testid":"text-social-title",children:"Social Media Profiles"}),s.jsx("p",{className:"text-muted-foreground",children:"Help adopters follow your rescue on social media. All fields are optional."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[s.jsx(vu,{className:"h-4 w-4 text-muted-foreground"})," Facebook"]}),s.jsx(He,{placeholder:"https://facebook.com/yourrescue",value:j.socialFacebook,onChange:se=>xe("socialFacebook",se.target.value),"data-testid":"input-onboarding-facebook"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[s.jsx(_n,{className:"h-4 w-4 text-muted-foreground"})," Instagram"]}),s.jsx(He,{placeholder:"https://instagram.com/yourrescue",value:j.socialInstagram,onChange:se=>xe("socialInstagram",se.target.value),"data-testid":"input-onboarding-instagram"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[s.jsx(wu,{className:"h-4 w-4 text-muted-foreground"})," X (Twitter)"]}),s.jsx(He,{placeholder:"https://x.com/yourrescue",value:j.socialTwitter,onChange:se=>xe("socialTwitter",se.target.value),"data-testid":"input-onboarding-twitter"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium mb-1.5 flex items-center gap-1.5",children:[s.jsx(bu,{className:"h-4 w-4 text-muted-foreground"})," Nextdoor"]}),s.jsx(He,{placeholder:"https://nextdoor.com/pages/yourrescue",value:j.socialNextdoor,onChange:se=>xe("socialNextdoor",se.target.value),"data-testid":"input-onboarding-nextdoor"})]})]}),s.jsx(ra,{onBack:Pe,onNext:()=>{const se={socialFacebook:j.socialFacebook||null,socialInstagram:j.socialInstagram||null,socialTwitter:j.socialTwitter||null,socialNextdoor:j.socialNextdoor||null};Object.values(se).some(nt=>nt!==null)?Ae(se):we()},nextLabel:j.socialFacebook||j.socialInstagram||j.socialTwitter||j.socialNextdoor?"Save & Continue":"Skip for Now",nextDisabled:G.isPending,backTestId:"button-back-social",nextTestId:"button-next-social"})]})}),f==="location"&&s.jsx(_e,{"data-testid":"step-location",children:s.jsxs(Ee,{className:"pt-8 pb-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h2",{className:"text-xl font-serif font-bold","data-testid":"text-location-title",children:Ke?"Your rescue location":"Where is your rescue located?"}),s.jsx("p",{className:"text-muted-foreground",children:Ke?"Here's the address we have. Feel free to update anything.":"This helps potential adopters find you. You can skip this for now if you'd prefer."})]}),s.jsx(nv,{prefix:"location",values:av("location",j),onChange:xe}),s.jsx(ra,{onBack:Pe,onNext:()=>Ae(zh("location",j)),nextLabel:Ke?"Save & Continue":"Skip for Now",nextDisabled:G.isPending,backTestId:"button-back-location",nextTestId:"button-next-location"})]})}),f==="billing"&&s.jsx(_e,{"data-testid":"step-billing",children:s.jsxs(Ee,{className:"pt-8 pb-8 space-y-6",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("h2",{className:"text-xl font-serif font-bold","data-testid":"text-billing-title",children:"Billing Address"}),s.jsx("p",{className:"text-muted-foreground",children:"Is your billing address the same as your rescue location?"})]}),s.jsx("div",{className:"flex flex-col items-center gap-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full max-w-sm",children:[s.jsxs("button",{className:`flex flex-col items-center gap-2 p-4 rounded-md border-2 transition-colors cursor-pointer ${j.billingSameAsLocation?"border-primary bg-primary/5":"border-border hover-elevate"}`,onClick:()=>C(se=>({...se,billingSameAsLocation:!0,billingLater:!1})),"data-testid":"button-billing-same",children:[s.jsx(Rt,{className:"h-6 w-6 text-primary"}),s.jsx("span",{className:"font-medium text-sm",children:"Yes, same address"})]}),s.jsxs("button",{className:`flex flex-col items-center gap-2 p-4 rounded-md border-2 transition-colors cursor-pointer ${j.billingSameAsLocation?"border-border hover-elevate":"border-primary bg-primary/5"}`,onClick:()=>C(se=>({...se,billingSameAsLocation:!1,billingLater:!1})),"data-testid":"button-billing-different",children:[s.jsx(Gf,{className:"h-6 w-6 text-primary"}),s.jsx("span",{className:"font-medium text-sm",children:"No, different address"})]})]})}),!j.billingSameAsLocation&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(B,{variant:j.billingLater?"outline":"default",className:"gap-2",onClick:()=>xe("billingLater",!1),"data-testid":"button-billing-enter-now",children:"Enter it now"}),s.jsx(B,{variant:j.billingLater?"default":"outline",className:"gap-2",onClick:()=>xe("billingLater",!0),"data-testid":"button-billing-later",children:"Come back later"})]}),!j.billingLater&&s.jsx(nv,{prefix:"billing",values:av("billing",j),onChange:xe})]}),s.jsx(ra,{onBack:Pe,onNext:Te,nextLabel:"Continue",nextDisabled:G.isPending,backTestId:"button-back-billing",nextTestId:"button-next-billing"})]})}),f==="plan"&&s.jsx("div",{className:"space-y-6","data-testid":"step-plan",children:ht?s.jsx(_e,{children:s.jsxs(Ee,{className:"pt-8 pb-8 text-center space-y-6",children:[s.jsx("div",{className:"inline-flex p-4 rounded-full bg-primary/10",children:s.jsx(Rt,{className:"h-12 w-12 text-primary"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-xl font-serif font-bold","data-testid":"text-plan-already",children:"Plan Already Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"This rescue already has a plan. You're good to go!"})]}),s.jsx(ra,{onBack:Pe,onNext:we,nextLabel:"Continue",nextDisabled:!1,backTestId:"button-back-plan",nextTestId:"button-next-plan"})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx(_t,{className:"h-10 w-10 mx-auto text-primary"}),s.jsx("h2",{className:"text-2xl font-serif font-bold","data-testid":"text-choose-plan-title",children:"Choose a Plan"}),s.jsx("p",{className:"text-muted-foreground text-sm max-w-md mx-auto",children:"Start with a free trial or pick the plan that fits your rescue. You can upgrade or change plans anytime."})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:K.map(se=>{const Fe=se.priceMonthly===0,nt=se.name==="Professional"||se.name==="Pro";return s.jsxs(_e,{className:`relative flex flex-col ${nt?"border-primary":""}`,"data-testid":`card-plan-${se.id}`,children:[nt&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx(vt,{className:"bg-primary text-primary-foreground",children:"Most Popular"})}),s.jsxs(Mt,{className:"text-center pb-2",children:[s.jsx(qt,{className:"text-base","data-testid":`text-plan-name-${se.id}`,children:se.name}),s.jsx("div",{className:"mt-1",children:Fe?s.jsx("div",{className:"text-2xl font-bold","data-testid":`text-plan-price-${se.id}`,children:"Free"}):s.jsxs("div",{children:[s.jsxs("span",{className:"text-2xl font-bold","data-testid":`text-plan-price-${se.id}`,children:["$",(se.priceMonthly/100).toFixed(0)]}),s.jsx("span",{className:"text-muted-foreground text-sm",children:"/mo"})]})})]}),s.jsxs(Ee,{className:"flex-1 space-y-2 text-sm",children:[se.description&&s.jsx("p",{className:"text-muted-foreground text-xs","data-testid":`text-plan-description-${se.id}`,children:se.description}),s.jsxs("ul",{className:"space-y-1.5",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-3.5 w-3.5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:["Up to ",se.dogsLimit," pets"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-3.5 w-3.5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:[se.monthlyPortraitCredits||20," portrait credits/mo"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-3.5 w-3.5 text-primary shrink-0 mt-0.5"}),s.jsx("span",{children:"4 free edits per portrait"})]}),Fe&&se.trialDays?s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-3.5 w-3.5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:[se.trialDays,"-day free trial"]})]}):null,!Fe&&se.overagePriceCents?s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Rt,{className:"h-3.5 w-3.5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{children:["$",(se.overagePriceCents/100).toFixed(0)," per extra portrait"]})]}):null,!Fe&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Cr,{className:"h-3.5 w-3.5 text-primary shrink-0 mt-0.5"}),s.jsx("span",{children:"Add up to 5 extra pets ($3/pet/mo)"})]})]})]}),s.jsx(gu,{children:s.jsx(B,{className:"w-full gap-1",variant:nt?"default":"outline",onClick:()=>I(se),disabled:lr,"data-testid":`button-select-plan-${se.id}`,children:lr?"Please wait...":Fe?"Start Free Trial":s.jsxs(s.Fragment,{children:[s.jsx(Rw,{className:"h-4 w-4"})," Subscribe"]})})})]},se.id)})}),s.jsx("div",{className:"flex items-center justify-between pt-2",children:s.jsxs(B,{variant:"ghost",className:"gap-1",onClick:Pe,"data-testid":"button-back-plan",children:[s.jsx(Er,{className:"h-4 w-4"})," Back"]})})]})}),f==="finish"&&s.jsx(_e,{"data-testid":"step-finish",children:s.jsxs(Ee,{className:"pt-8 pb-8 text-center space-y-6",children:[s.jsx("div",{className:"inline-flex p-4 rounded-full bg-primary/10",children:s.jsx(_t,{className:"h-12 w-12 text-primary"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-serif font-bold","data-testid":"text-finish-title",children:"You're all set!"}),s.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto",children:d?`${T.name} is ready to go! What would you like to do next?`:"What would you like to do next? You can add your first rescue pet or review your organization details."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[s.jsxs(B,{className:"gap-2 w-full sm:w-auto",onClick:()=>Je("create"),disabled:A,"data-testid":"button-finish-add-pet",children:[s.jsx(li,{className:"h-4 w-4"})," Add Your First Pet"]}),s.jsx(B,{variant:"outline",className:"gap-2 w-full sm:w-auto",onClick:()=>Je("settings"),disabled:A,"data-testid":"button-finish-review",children:d?"View Rescue Info":"Review My Info"})]}),s.jsxs(B,{variant:"ghost",className:"gap-1",onClick:Pe,"data-testid":"button-back-finish",children:[s.jsx(Er,{className:"h-4 w-4"})," Go Back"]})]})})]})]})}var Bh="rovingFocusGroup.onEntryFocus",rI={bubbles:!1,cancelable:!0},Eu="RovingFocusGroup",[Rf,Qj,sI]=Bf(Eu),[nI,Yj]=us(Eu,[sI]),[aI,iI]=nI(Eu),Jj=x.forwardRef((e,t)=>s.jsx(Rf.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Rf.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(oI,{...e,ref:t})})}));Jj.displayName=Eu;var oI=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:o=!1,dir:l,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:g=!1,...v}=e,b=x.useRef(null),S=lt(t,b),N=_p(l),[w=null,j]=Cn({prop:u,defaultProp:d,onChange:f}),[C,_]=x.useState(!1),P=xr(m),A=Qj(r),$=x.useRef(!1),[E,L]=x.useState(0);return x.useEffect(()=>{const Q=b.current;if(Q)return Q.addEventListener(Bh,P),()=>Q.removeEventListener(Bh,P)},[P]),s.jsx(aI,{scope:r,orientation:i,dir:N,loop:o,currentTabStopId:w,onItemFocus:x.useCallback(Q=>j(Q),[j]),onItemShiftTab:x.useCallback(()=>_(!0),[]),onFocusableItemAdd:x.useCallback(()=>L(Q=>Q+1),[]),onFocusableItemRemove:x.useCallback(()=>L(Q=>Q-1),[]),children:s.jsx(Ge.div,{tabIndex:C||E===0?-1:0,"data-orientation":i,...v,ref:S,style:{outline:"none",...e.style},onMouseDown:$e(e.onMouseDown,()=>{$.current=!0}),onFocus:$e(e.onFocus,Q=>{const X=!$.current;if(Q.target===Q.currentTarget&&X&&!C){const ee=new CustomEvent(Bh,rI);if(Q.currentTarget.dispatchEvent(ee),!ee.defaultPrevented){const le=A().filter(K=>K.focusable),T=le.find(K=>K.active),Z=le.find(K=>K.id===w),ge=[T,Z,...le].filter(Boolean).map(K=>K.ref.current);e1(ge,g)}}$.current=!1}),onBlur:$e(e.onBlur,()=>_(!1))})})}),Xj="RovingFocusGroupItem",Zj=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:o=!1,tabStopId:l,...u}=e,d=Ws(),f=l||d,m=iI(Xj,r),g=m.currentTabStopId===f,v=Qj(r),{onFocusableItemAdd:b,onFocusableItemRemove:S}=m;return x.useEffect(()=>{if(i)return b(),()=>S()},[i,b,S]),s.jsx(Rf.ItemSlot,{scope:r,id:f,focusable:i,active:o,children:s.jsx(Ge.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...u,ref:t,onMouseDown:$e(e.onMouseDown,N=>{i?m.onItemFocus(f):N.preventDefault()}),onFocus:$e(e.onFocus,()=>m.onItemFocus(f)),onKeyDown:$e(e.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){m.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const w=uI(N,m.orientation,m.dir);if(w!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let C=v().filter(_=>_.focusable).map(_=>_.ref.current);if(w==="last")C.reverse();else if(w==="prev"||w==="next"){w==="prev"&&C.reverse();const _=C.indexOf(N.currentTarget);C=m.loop?dI(C,_+1):C.slice(_+1)}setTimeout(()=>e1(C))}})})})});Zj.displayName=Xj;var lI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function uI(e,t,r){const i=cI(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return lI[i]}function e1(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function dI(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var hI=Jj,fI=Zj,Ep="Tabs",[pI]=us(Ep,[Yj]),t1=Yj(),[mI,Pp]=pI(Ep),r1=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,onValueChange:o,defaultValue:l,orientation:u="horizontal",dir:d,activationMode:f="automatic",...m}=e,g=_p(d),[v,b]=Cn({prop:i,onChange:o,defaultProp:l});return s.jsx(mI,{scope:r,baseId:Ws(),value:v,onValueChange:b,orientation:u,dir:g,activationMode:f,children:s.jsx(Ge.div,{dir:g,"data-orientation":u,...m,ref:t})})});r1.displayName=Ep;var s1="TabsList",n1=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:i=!0,...o}=e,l=Pp(s1,r),u=t1(r);return s.jsx(hI,{asChild:!0,...u,orientation:l.orientation,dir:l.dir,loop:i,children:s.jsx(Ge.div,{role:"tablist","aria-orientation":l.orientation,...o,ref:t})})});n1.displayName=s1;var a1="TabsTrigger",i1=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,disabled:o=!1,...l}=e,u=Pp(a1,r),d=t1(r),f=c1(u.baseId,i),m=u1(u.baseId,i),g=i===u.value;return s.jsx(fI,{asChild:!0,...d,focusable:!o,active:g,children:s.jsx(Ge.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":m,"data-state":g?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:f,...l,ref:t,onMouseDown:$e(e.onMouseDown,v=>{!o&&v.button===0&&v.ctrlKey===!1?u.onValueChange(i):v.preventDefault()}),onKeyDown:$e(e.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&u.onValueChange(i)}),onFocus:$e(e.onFocus,()=>{const v=u.activationMode!=="manual";!g&&!o&&v&&u.onValueChange(i)})})})});i1.displayName=a1;var o1="TabsContent",l1=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,forceMount:o,children:l,...u}=e,d=Pp(o1,r),f=c1(d.baseId,i),m=u1(d.baseId,i),g=i===d.value,v=x.useRef(g);return x.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),s.jsx(ga,{present:o||g,children:({present:b})=>s.jsx(Ge.div,{"data-state":g?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":f,hidden:!b,id:m,tabIndex:0,...u,ref:t,style:{...e.style,animationDuration:v.current?"0s":void 0},children:b&&l})})});l1.displayName=o1;function c1(e,t){return`${e}-trigger-${t}`}function u1(e,t){return`${e}-content-${t}`}var gI=r1,d1=n1,h1=i1,f1=l1;const xI=gI,p1=x.forwardRef(({className:e,...t},r)=>s.jsx(d1,{ref:r,className:Le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));p1.displayName=d1.displayName;const Af=x.forwardRef(({className:e,...t},r)=>s.jsx(h1,{ref:r,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Af.displayName=h1.displayName;const If=x.forwardRef(({className:e,...t},r)=>s.jsx(f1,{ref:r,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));If.displayName=f1.displayName;function yI(){const[,e]=An(),{toast:t}=Pr(),{isAuthenticated:r,isLoading:i}=yr(),[o,l]=x.useState(!1),[u,d]=x.useState(""),[f,m]=x.useState(""),[g,v]=x.useState(""),[b,S]=x.useState(""),[N,w]=x.useState(""),[j,C]=x.useState(""),[_,P]=x.useState(!1),[A,$]=x.useState(!1),[E,L]=x.useState(!1);x.useEffect(()=>{!i&&r&&e("/dashboard")},[i,r,e]);async function Q(ee){ee.preventDefault(),l(!0);try{const{error:le}=await ii.auth.signInWithPassword({email:u,password:f});if(le)throw le;e("/dashboard")}catch(le){t({title:"Login failed",description:le.message,variant:"destructive"})}finally{l(!1)}}async function X(ee){ee.preventDefault(),l(!0);try{const le=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g,password:b,firstName:N,lastName:j,acceptedTerms:E})}),T=await le.json();if(!le.ok)throw new Error(T.error||"Signup failed");const{error:Z}=await ii.auth.signInWithPassword({email:g,password:b});if(Z)throw Z;e("/dashboard")}catch(le){t({title:"Signup failed",description:le.message,variant:"destructive"})}finally{l(!1)}}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/10 via-background to-accent/10 p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center gap-1.5 font-serif text-3xl font-bold text-primary mb-2",children:[s.jsx(Ve,{className:"h-8 w-8"}),s.jsx(et,{className:"h-8 w-8"}),"Pawtrait Pals"]}),s.jsx("p",{className:"text-muted-foreground",children:"AI-Powered Pet Portraits for Rescue Organizations"})]}),s.jsx(_e,{children:s.jsxs(xI,{defaultValue:"login",children:[s.jsx(Mt,{className:"pb-4",children:s.jsxs(p1,{className:"grid w-full grid-cols-2",children:[s.jsx(Af,{value:"login",children:"Log In"}),s.jsx(Af,{value:"signup",children:"Sign Up"})]})}),s.jsxs(Ee,{children:[s.jsx(If,{value:"login",className:"mt-0",children:s.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(zs,{htmlFor:"login-email",children:"Email"}),s.jsx(He,{id:"login-email",type:"email",placeholder:"you@rescue.org",value:u,onChange:ee=>d(ee.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(zs,{htmlFor:"login-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(He,{id:"login-password",type:_?"text":"password",value:f,onChange:ee=>m(ee.target.value),required:!0,className:"pr-10"}),s.jsx(B,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>P(!_),children:_?s.jsx(uf,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Uo,{className:"h-4 w-4 text-muted-foreground"})})]})]}),s.jsx(B,{type:"submit",className:"w-full",disabled:o,children:o?"Logging in...":"Log In"})]})}),s.jsx(If,{value:"signup",className:"mt-0",children:s.jsxs("form",{onSubmit:X,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(zs,{htmlFor:"first-name",children:"First Name"}),s.jsx(He,{id:"first-name",value:N,onChange:ee=>w(ee.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(zs,{htmlFor:"last-name",children:"Last Name"}),s.jsx(He,{id:"last-name",value:j,onChange:ee=>C(ee.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(zs,{htmlFor:"signup-email",children:"Email"}),s.jsx(He,{id:"signup-email",type:"email",placeholder:"you@rescue.org",value:g,onChange:ee=>v(ee.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(zs,{htmlFor:"signup-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(He,{id:"signup-password",type:A?"text":"password",placeholder:"Min 6 characters",value:b,onChange:ee=>S(ee.target.value),required:!0,minLength:6,className:"pr-10"}),s.jsx(B,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>$(!A),children:A?s.jsx(uf,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Uo,{className:"h-4 w-4 text-muted-foreground"})})]})]}),s.jsxs("label",{className:"flex items-start gap-2 text-sm cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:ee=>L(ee.target.checked),className:"mt-1 h-4 w-4 rounded border-input accent-primary"}),s.jsxs("span",{className:"text-muted-foreground",children:["I agree to the"," ",s.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"Privacy Policy"})]})]}),s.jsx(B,{type:"submit",className:"w-full",disabled:o||!E,children:o?"Creating account...":"Create Account"})]})})]})]})}),s.jsx("p",{className:"text-center text-sm text-muted-foreground mt-6",children:"Free 30-day trial  No credit card required"})]})})}function vI(){return s.jsxs("div",{className:"min-h-screen",children:[s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsx("div",{className:"container mx-auto px-4 h-16 flex items-center",children:s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif text-2xl font-bold text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-6 w-6"}),s.jsx(et,{className:"h-6 w-6"})]}),"Pawtrait Pals"]})})}),s.jsxs("main",{className:"container mx-auto px-4 pt-24 pb-16 max-w-3xl",children:[s.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"Privacy Policy"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-8",children:"Last updated: February 17, 2026"}),s.jsxs("div",{className:"prose prose-stone dark:prose-invert max-w-none space-y-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"1. Introduction"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'Pawtrait Pals ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our website and services at pawtraitpals.com (the "Service"). This policy applies to all users worldwide, including those in the European Economic Area (EEA), United Kingdom (UK), and California. By using the Service, you agree to the practices described in this policy.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"2. Data Controller"}),s.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["Pawtrait Pals is the data controller responsible for your personal data. If you have questions about how your data is processed, or wish to exercise your rights, contact us at"," ",s.jsx("a",{href:"mailto:support@pawtraitpals.com",className:"text-primary hover:underline",children:"support@pawtraitpals.com"}),"."]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"3. Legal Basis for Processing (GDPR)"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"For users in the EEA and UK, we process your personal data based on the following legal grounds:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Contract performance:"})," Processing necessary to provide the Service you signed up for  account management, portrait generation, subscription billing, and pet profile management"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Legitimate interests:"})," Security monitoring, fraud prevention, service improvement, and analytics  where our interests do not override your fundamental rights"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Consent:"})," Where you explicitly opt in to features such as connecting third-party social media accounts (e.g., Instagram) or receiving optional communications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Legal obligation:"})," Where we are required by law to process or retain certain data"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"4. Information We Collect"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Account Information"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"When you create an account, we collect your email address and password. Accounts are managed through Supabase, a secure authentication provider. We do not store your password directly  it is handled by Supabase's authentication infrastructure."}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Organization Information"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Rescue organizations provide information including organization name, description, location, website, logo, and contact details. This information is displayed publicly on your rescue showcase page to help adopters find and connect with your organization."}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pet Information"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You may upload pet photos, names, breeds, ages, species, descriptions, and other details about animals available for adoption. Pet photos are used to generate AI-powered artistic portraits."}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payment Information"}),s.jsxs("p",{className:"text-muted-foreground leading-relaxed mb-3",children:["Payment processing is handled by Stripe. We do not store your credit card numbers or bank account details. Stripe collects and processes payment information in accordance with their own"," ",s.jsx("a",{href:"https://stripe.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"privacy policy"}),". We receive only transaction confirmation details (such as subscription status and plan type)."]}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Social Media Integrations"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"If you connect your Instagram account, we store an access token, your Instagram user ID, and username. This data is used solely to post pet portraits to your Instagram account on your behalf. You can disconnect your Instagram at any time from your Settings page, which immediately deletes all stored Instagram credentials."}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Automatically Collected Information"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We may collect standard web server logs including IP addresses, browser type, referring pages, and timestamps. This data is used for security monitoring and service improvement. We do not use tracking cookies for advertising purposes."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"5. How We Use Your Information"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"To provide and maintain the Service, including generating AI portraits of your pets"}),s.jsx("li",{children:"To create and manage your account and organization profile"}),s.jsx("li",{children:"To process subscription payments through Stripe"}),s.jsx("li",{children:"To display your rescue organization and available pets on public showcase pages"}),s.jsx("li",{children:"To enable sharing of pet profiles via social media (including Instagram posting), text messaging, and link sharing"}),s.jsx("li",{children:"To send transactional communications related to your account"}),s.jsx("li",{children:"To monitor and improve the security and performance of the Service"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"6. AI Portrait Generation"}),s.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["Pet photos you upload are sent to Google's Gemini AI service to generate artistic portraits. These images are processed solely for the purpose of creating your requested portraits. We do not use your pet photos for AI model training. Generated portraits are stored in our database and associated with your pet profiles. Google's processing of this data is governed by their"," ",s.jsx("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"privacy policy"}),"."]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"7. SMS/Text Messaging"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Pawtrait Pals offers an optional SMS feature that allows users to share pet portrait links via text message. By using this feature, you consent to the following:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Opt-in:"}),' SMS messages are only sent when you explicitly enter a phone number and check the consent box in the "Send via Text" dialog. No automated or marketing messages are sent.']}),s.jsxs("li",{children:[s.jsx("strong",{children:"Message content:"})," Messages contain a link to a pet portrait on Pawtrait Pals and a brief description. Standard message and data rates may apply."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Opt-out:"})," Recipients can reply STOP to any message to opt out of future texts from this number."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Phone numbers:"})," We do not store recipient phone numbers after the message is sent. Phone numbers are transmitted to our SMS provider (Twilio) solely for message delivery."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Frequency:"})," Messages are sent only on demand  one message per share action initiated by the user."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Help:"})," Reply HELP to any message for support, or contact us at stefanie@pawtraitpals.com."]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"8. Data Sharing and Disclosure"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We do not sell, trade, or rent your personal information to third parties. We may share information with:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Service providers:"})," Supabase (authentication and database), Stripe (payments), Google Gemini (AI portrait generation), Meta/Instagram (social posting), Twilio (SMS), and Render (hosting)  each acting as data processors bound by their own privacy policies and data processing agreements"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Public showcase pages:"})," Organization name, description, location, logo, and pet profiles (including portraits) that you choose to make public are visible to anyone visiting your rescue's showcase page"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Social media platforms:"})," When you use Instagram posting or other social sharing features, the content you choose to share is transmitted to those platforms"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Legal requirements:"})," We may disclose information if required by law, court order, or in response to valid legal process"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"9. International Data Transfers"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Your data is stored on servers in the United States. If you are accessing the Service from the EEA, UK, or other regions with data protection laws, please be aware that your data will be transferred to and processed in the United States. We ensure appropriate safeguards are in place for such transfers, including reliance on Standard Contractual Clauses (SCCs) where applicable, and our service providers maintain appropriate data protection measures."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"10. Data Retention"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We retain your personal data only for as long as necessary to provide the Service and fulfill the purposes described in this policy. Specifically:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground mt-3",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Account data:"})," Retained while your account is active and for 30 days after deletion request to allow for recovery"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Pet profiles and portraits:"})," Retained while your account is active; deleted upon account deletion"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Payment records:"})," Retained as required by tax and financial regulations (typically 7 years)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Server logs:"})," Retained for up to 90 days for security purposes"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Instagram tokens:"})," Deleted immediately upon disconnecting your Instagram account"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"11. Data Storage and Security"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Your data is stored securely using Supabase's PostgreSQL database infrastructure hosted on Amazon Web Services (AWS) in the United States. We use industry-standard security measures including encrypted connections (SSL/TLS), secure authentication tokens (JWT), role-based access controls, and encrypted data at rest. While we strive to protect your information, no method of electronic storage is 100% secure. In the event of a data breach, we will notify affected users and relevant supervisory authorities within 72 hours as required by GDPR."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"12. Your Rights"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Depending on your location, you have the following rights regarding your personal data:"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All Users"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground mb-3",children:[s.jsx("li",{children:"Access the personal information we hold about you"}),s.jsx("li",{children:"Request correction of inaccurate information"}),s.jsx("li",{children:"Request deletion of your account and all associated data"}),s.jsx("li",{children:"Remove pet profiles and uploaded photos at any time"}),s.jsx("li",{children:"Cancel your subscription at any time"}),s.jsx("li",{children:"Disconnect third-party integrations (Instagram) at any time"})]}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"EEA and UK Users (GDPR Rights)"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground mb-3",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Right of access:"})," Request a copy of all personal data we hold about you"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Right to rectification:"})," Request correction of inaccurate or incomplete data"]}),s.jsxs("li",{children:[s.jsx("strong",{children:'Right to erasure ("right to be forgotten"):'})," Request deletion of your personal data when there is no compelling reason for continued processing"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Right to restrict processing:"})," Request that we limit how we use your data"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Right to data portability:"})," Request your data in a structured, machine-readable format (JSON or CSV)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Right to object:"})," Object to processing based on legitimate interests"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Right to withdraw consent:"})," Where processing is based on consent, withdraw it at any time without affecting the lawfulness of prior processing"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Right to lodge a complaint:"})," File a complaint with your local data protection supervisory authority"]})]}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"California Users (CCPA Rights)"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground mb-3",children:[s.jsx("li",{children:"Right to know what personal information is collected and how it is used"}),s.jsx("li",{children:"Right to request deletion of personal information"}),s.jsx("li",{children:"Right to opt out of the sale of personal information (note: we do not sell personal information)"}),s.jsx("li",{children:"Right to non-discrimination for exercising your privacy rights"})]}),s.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["To exercise any of these rights, please contact us at"," ",s.jsx("a",{href:"mailto:support@pawtraitpals.com",className:"text-primary hover:underline",children:"support@pawtraitpals.com"}),". We will respond to your request within 30 days (or sooner as required by applicable law). We may ask you to verify your identity before processing your request."]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"13. Cookies and Tracking"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We use essential cookies only  specifically for session management and authentication. We do not use advertising cookies, tracking pixels, or third-party analytics that track you across websites. Your authentication session is managed through secure, HTTP-only tokens."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"14. Children's Privacy"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"The Service is not directed to individuals under the age of 16 (or 13 in jurisdictions where permitted). We do not knowingly collect personal information from children. If we become aware that we have collected information from a child below the applicable age, we will take steps to delete that information promptly."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"15. Changes to This Policy"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'We may update this Privacy Policy from time to time. We will notify you of material changes by posting the new Privacy Policy on this page, updating the "Last updated" date, and, for significant changes, sending an email notification to the address associated with your account. Your continued use of the Service after changes constitutes acceptance of the updated policy.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"16. Contact Us"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you have questions about this Privacy Policy or wish to exercise your data protection rights, please contact us at:"}),s.jsxs("p",{className:"text-muted-foreground leading-relaxed mt-2",children:["Pawtrait Pals LLC",s.jsx("br",{}),"119 Colemans Bluff Drive",s.jsx("br",{}),"Woodstock, GA 30188",s.jsx("br",{}),"Email:"," ",s.jsx("a",{href:"mailto:support@pawtraitpals.com",className:"text-primary hover:underline",children:"support@pawtraitpals.com"})]}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mt-2",children:"If you are in the EEA or UK and are not satisfied with our response, you have the right to lodge a complaint with your local data protection supervisory authority."})]})]})]})]})}function wI(){return s.jsxs("div",{className:"min-h-screen",children:[s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsx("div",{className:"container mx-auto px-4 h-16 flex items-center",children:s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif text-2xl font-bold text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-6 w-6"}),s.jsx(et,{className:"h-6 w-6"})]}),"Pawtrait Pals"]})})}),s.jsxs("main",{className:"container mx-auto px-4 pt-24 pb-16 max-w-3xl",children:[s.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"Terms of Service"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-8",children:"Last updated: February 17, 2026"}),s.jsxs("div",{className:"prose prose-stone dark:prose-invert max-w-none space-y-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"1. Acceptance of Terms"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'By accessing or using Pawtrait Pals ("the Service") at pawtraitpals.com, you agree to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, you may not use the Service. These Terms apply to all users, including rescue organizations, administrators, and visitors.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"2. Description of Service"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Pawtrait Pals is a platform that helps animal rescue organizations showcase pets available for adoption through AI-generated artistic portraits. The Service includes pet profile management, AI portrait generation, public rescue showcase pages, social media sharing tools, and direct Instagram posting integration."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"3. Account Registration"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To use certain features of the Service, you must create an account. You agree to provide accurate and complete information during registration and to keep your account credentials secure. You are responsible for all activity that occurs under your account. You must notify us immediately of any unauthorized use of your account."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"4. Subscription Plans and Payments"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Pawtrait Pals offers subscription plans with varying features and limits. By subscribing to a paid plan, you agree to pay the applicable fees as described at the time of purchase."}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Payments are processed securely through Stripe"}),s.jsx("li",{children:"Subscriptions renew automatically unless canceled before the renewal date"}),s.jsx("li",{children:"You may cancel your subscription at any time; access continues until the end of the current billing period"}),s.jsx("li",{children:"Refunds are handled on a case-by-case basis at our discretion"}),s.jsx("li",{children:"We reserve the right to change pricing with reasonable notice"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"5. User Content"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:'You retain ownership of all content you upload to the Service, including pet photos, organization logos, descriptions, and other materials ("User Content"). By uploading User Content, you grant Pawtrait Pals a non-exclusive, worldwide license to use, display, and process that content for the purpose of providing the Service, including:'}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Generating AI artistic portraits from your pet photos"}),s.jsx("li",{children:"Displaying your organization and pet profiles on public showcase pages"}),s.jsx("li",{children:"Creating Open Graph preview images for social media sharing"}),s.jsx("li",{children:"Posting pet portraits to connected social media accounts (Instagram) on your behalf when you request it"})]}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mt-3",children:"You represent that you have the right to upload all User Content and that it does not infringe on any third party's rights."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"6. AI-Generated Portraits"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"AI portraits are generated using Google's Gemini AI service. While we strive for quality results, AI generation is inherently variable and we do not guarantee specific artistic outcomes. Generated portraits are provided for use in connection with the Service, including sharing on social media to promote pet adoption. You may use generated portraits for non-commercial purposes related to pet adoption promotion."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"7. Acceptable Use"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You agree not to:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"Use the Service for any unlawful purpose"}),s.jsx("li",{children:"Upload content that is harmful, abusive, or violates the rights of others"}),s.jsx("li",{children:"Attempt to gain unauthorized access to the Service or other users' accounts"}),s.jsx("li",{children:"Use the Service to misrepresent animals or adoption availability"}),s.jsx("li",{children:"Interfere with or disrupt the Service's infrastructure"}),s.jsx("li",{children:"Scrape, crawl, or use automated means to access the Service without permission"}),s.jsx("li",{children:"Use the Service to promote animal cruelty or illegal animal trade"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"8. Third-Party Integrations"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"The Service integrates with third-party platforms including Instagram (Meta), Stripe, and Google Gemini. When you connect a third-party account:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-muted-foreground",children:[s.jsx("li",{children:"You authorize Pawtrait Pals to interact with that platform on your behalf"}),s.jsx("li",{children:"Your use of third-party platforms is subject to their respective terms and policies"}),s.jsx("li",{children:"You can disconnect third-party integrations at any time from your Settings page"}),s.jsx("li",{children:"Disconnecting immediately removes all stored credentials for that integration"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"9. Data Deletion and Account Closure"}),s.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["You may request deletion of your account and all associated data at any time by contacting us at support@pawtraitpals.com. Upon receiving a verified deletion request, we will delete your account data within 30 days. Some data may be retained as required by law (e.g., financial records). For full details on data retention and your privacy rights, see our"," ",s.jsx("a",{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"10. Intellectual Property"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"The Pawtrait Pals name, logo, website design, and underlying technology are the property of Pawtrait Pals and are protected by applicable intellectual property laws. You may not copy, modify, distribute, or create derivative works from our Service without prior written consent."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"11. Disclaimer of Warranties"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'The Service is provided "as is" and "as available" without warranties of any kind, whether express or implied. We do not warrant that the Service will be uninterrupted, error-free, or secure. We are not responsible for the accuracy of AI-generated content. We do not guarantee any specific outcome from using the Service, including but not limited to pet adoption rates.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"12. Limitation of Liability"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"To the maximum extent permitted by law, Pawtrait Pals shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service. Our total liability for any claims relating to the Service shall not exceed the amount you paid us in the twelve (12) months preceding the claim."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"13. Termination"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to suspend or terminate your account at any time for violation of these Terms or for any other reason at our discretion. Upon termination, your right to use the Service ceases immediately. You may delete your account at any time by contacting us."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"14. Changes to Terms"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'We may modify these Terms at any time. We will notify you of material changes by posting the updated Terms on this page and updating the "Last updated" date. Your continued use of the Service after changes constitutes acceptance of the updated Terms.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"15. Governing Law"}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"These Terms shall be governed by and construed in accordance with the laws of the State of Georgia, United States, without regard to conflict of law provisions. Any disputes arising under these Terms shall be resolved in the state or federal courts located in Cherokee County, Georgia."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-serif font-semibold mb-3",children:"16. Contact Us"}),s.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["If you have questions about these Terms, please contact us at"," ",s.jsx("a",{href:"mailto:support@pawtraitpals.com",className:"text-primary hover:underline",children:"support@pawtraitpals.com"}),"."]})]})]})]})]})}function bI(){return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"container max-w-3xl mx-auto px-4 py-12",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-serif font-bold mb-2",children:"SMS Opt-In Policy"}),s.jsx("p",{className:"text-muted-foreground",children:"How Pawtrait Pals handles text messaging"})]}),s.jsx(_e,{className:"mb-6",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx(sE,{className:"h-6 w-6 text-primary mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-lg mb-2",children:"How It Works"}),s.jsx("p",{className:"text-muted-foreground",children:'Pawtrait Pals allows rescue organizations to share pet portraits via text message. When viewing a pet portrait, users can click "Send via Text" to share the portrait link with a phone number of their choice.'})]})]})})}),s.jsx(_e,{className:"mb-6",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx(pE,{className:"h-6 w-6 text-primary mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Opt-In Process"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:'Before any SMS can be sent, users must complete the following steps in our "Send via Text" dialog:'}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-5 border",children:[s.jsx("p",{className:"font-medium mb-3",children:"Send via Text"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Enter a phone number to text this link to."}),s.jsx("div",{className:"bg-background border rounded-md px-3 py-2 mb-4 text-sm text-muted-foreground",children:"(555) 123-4567"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("label",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[s.jsx("input",{type:"checkbox",disabled:!0,className:"mt-0.5 rounded border-gray-300"}),s.jsx("span",{children:"I agree to send an SMS to this number via Pawtrait Pals. Message & data rates may apply. Recipient can reply STOP to opt out."})]}),s.jsxs("label",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[s.jsx("input",{type:"checkbox",disabled:!0,className:"mt-0.5 rounded border-gray-300"}),s.jsxs("span",{children:["I have read and agree to the Pawtrait Pals ",s.jsx("a",{href:"/privacy",className:"underline text-primary",children:"Privacy Policy"}),"."]})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground italic",children:"The Send button is disabled until both checkboxes are checked and a phone number is entered."})]})]})]})})}),s.jsx(_e,{className:"mb-6",children:s.jsx(Ee,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[s.jsx(fE,{className:"h-6 w-6 text-primary mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Your Rights"}),s.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Opt-out:"})," Reply STOP to any message to stop receiving texts from this number."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Help:"})," Reply HELP for support information, or email stefanie@pawtraitpals.com."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"No marketing:"})," We do not send marketing or promotional messages. SMS is only sent when a user explicitly initiates a share action."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Frequency:"})," One message per share action  no recurring or automated texts."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data:"})," Phone numbers are not stored after delivery. Standard message and data rates may apply."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Privacy:"})," See our full ",s.jsx("a",{href:"/privacy",className:"underline text-primary",children:"Privacy Policy"})," (Section 7: SMS/Text Messaging)."]})]})]})]})})}),s.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Pawtrait Pals LLC  ",s.jsx("a",{href:"mailto:stefanie@pawtraitpals.com",className:"underline",children:"stefanie@pawtraitpals.com"}),"  ",s.jsx("a",{href:"/terms",className:"underline",children:"Terms"}),"  ",s.jsx("a",{href:"/privacy",className:"underline",children:"Privacy"})]})]})})}function jI({animal:e,selected:t,onToggle:r,onPhotoSelect:i,selectedPhotoUrl:o}){const[l,u]=x.useState(0),d=o||e.photos[l]||null,f=e.photos.length>1,m=g=>{u(g),i(e.photos[g])};return e.alreadyImported?s.jsx(_e,{className:"overflow-hidden opacity-60",children:s.jsxs("div",{className:"aspect-square relative bg-muted",children:[d?s.jsx("img",{src:d,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.species==="cat"?s.jsx(et,{className:"h-12 w-12 text-muted-foreground/30"}):s.jsx(Ve,{className:"h-12 w-12 text-muted-foreground/30"})}),s.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:s.jsxs(vt,{variant:"secondary",className:"gap-1",children:[s.jsx(Rt,{className:"h-3 w-3"})," Already Imported"]})}),s.jsx("div",{className:"absolute top-0 left-0 right-0 p-2 bg-gradient-to-b from-black/60 to-transparent",children:s.jsx("h3",{className:"font-serif font-bold text-white text-sm",children:e.name})})]})}):s.jsxs(_e,{className:`overflow-hidden cursor-pointer transition-all ${t?"ring-2 ring-primary shadow-lg":"hover:shadow-md"}`,onClick:r,children:[s.jsxs("div",{className:"aspect-square relative bg-muted",children:[d?s.jsx("img",{src:d,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.species==="cat"?s.jsx(et,{className:"h-12 w-12 text-muted-foreground/30"}):s.jsx(Ve,{className:"h-12 w-12 text-muted-foreground/30"})}),s.jsx("div",{className:`absolute top-2 right-2 h-6 w-6 rounded-full border-2 flex items-center justify-center transition-colors ${t?"bg-primary border-primary":"bg-white/80 border-gray-300"}`,children:t&&s.jsx(Rt,{className:"h-4 w-4 text-white"})}),s.jsx("div",{className:"absolute top-0 left-0 right-8 p-2 bg-gradient-to-b from-black/60 to-transparent",children:s.jsx("h3",{className:"font-serif font-bold text-white text-sm",children:e.name})})]}),s.jsxs(Ee,{className:"p-3 space-y-2",children:[s.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[e.breed,e.age?`  ${e.age}`:""]}),f&&t&&s.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1",onClick:g=>g.stopPropagation(),children:e.photos.map((g,v)=>s.jsx("button",{onClick:()=>m(v),className:`flex-shrink-0 h-10 w-10 rounded border-2 overflow-hidden transition-colors ${o===g||!o&&v===l?"border-primary":"border-transparent hover:border-gray-300"}`,children:s.jsx("img",{src:g,alt:`Photo ${v+1}`,className:"w-full h-full object-cover"})},v))}),e.tags.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,4).map(g=>s.jsx(vt,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:g},g)),e.tags.length>4&&s.jsxs(vt,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:["+",e.tags.length-4]})]})]})]})}function NI(){const[,e]=An(),{isAuthenticated:t,isAdmin:r}=yr(),{toast:i}=Pr(),[o,l]=x.useState("shelterluv"),[u,d]=x.useState(""),[f,m]=x.useState(""),[g,v]=x.useState(""),[b,S]=x.useState(null),[N,w]=x.useState(new Set),[j,C]=x.useState({}),[_,P]=x.useState(!1),[A,$]=x.useState(null),[E,L]=x.useState(null),[Q,X]=x.useState(!1),[ee,le]=x.useState(null),Z=new URLSearchParams(window.location.search).get("org"),{data:Y}=ut({queryKey:["/api/my-organization"],enabled:t&&!r}),ge=async()=>{if(u.trim()){P(!0),$(null),S(null),L(null);try{const I=await mr(),fe=new URLSearchParams({provider:o,name:u.trim()});f.trim()&&fe.set("location",f.trim());const ue=await fetch(`/api/import/search?${fe}`,{headers:I});if(!ue.ok){const ve=await ue.json();throw new Error(ve.error||"Search failed")}const xe=await ue.json();$(xe)}catch(I){i({title:"Search failed",description:I.message,variant:"destructive"})}finally{P(!1)}}},K=async I=>{S(I),X(!0),L(null),w(new Set),C({}),le(null);try{const fe=await mr(),ue=new URLSearchParams({provider:o,orgId:I.externalId});Z&&ue.set("userOrgId",Z);const xe=await fetch(`/api/import/animals?${ue}`,{headers:fe});if(!xe.ok){const ae=await xe.json();throw new Error(ae.error||"Failed to fetch animals")}const ve=await xe.json();L(ve)}catch(fe){i({title:"Error",description:fe.message,variant:"destructive"})}finally{X(!1)}},z=async()=>{if(g.trim()){X(!0),L(null),w(new Set),C({}),le(null);try{const I=await mr(),fe=new URLSearchParams({provider:"shelterluv",apiKey:g.trim()});Z&&fe.set("userOrgId",Z);const ue=await fetch(`/api/import/animals?${fe}`,{headers:I});if(!ue.ok){const ve=await ue.json();throw new Error(ve.error||"Failed to fetch animals")}const xe=await ue.json();L(xe),S({externalId:"shelterluv",name:"Your ShelterLuv Account",location:null,website:null})}catch(I){i({title:"Error",description:I.message,variant:"destructive"})}finally{X(!1)}}},U=I=>{w(fe=>{const ue=new Set(fe);return ue.has(I)?ue.delete(I):ue.add(I),ue}),le(null)},G=Ft({mutationFn:async()=>{if(!E)throw new Error("No animals to import");const I=E.filter(ae=>N.has(ae.externalId)&&!ae.alreadyImported).map(ae=>({externalId:ae.externalId,name:ae.name,species:ae.species,breed:ae.breed,age:ae.age,description:ae.description,selectedPhotoUrl:j[ae.externalId]||ae.photos[0]||null,adoptionUrl:null,isAvailable:ae.isAvailable,tags:ae.tags}));if(I.length===0)throw new Error("No new animals selected for import");const fe={provider:o,animals:I};Z&&(fe.orgId=parseInt(Z));const ue=await mr(),xe=await fetch("/api/import/pets",{method:"POST",headers:{...ue,"Content-Type":"application/json"},body:JSON.stringify(fe)}),ve=await xe.json();if(!xe.ok)throw ve.error==="pet_limit_exceeded"?(le(ve.message),new Error(ve.message)):new Error(ve.message||ve.error||"Import failed");return ve},onSuccess:I=>{i({title:"Import complete!",description:`${I.imported} pets imported${I.skipped>0?`, ${I.skipped} skipped (already imported)`:""}.`}),tt.invalidateQueries({queryKey:["/api/my-dogs"]}),tt.invalidateQueries({queryKey:["/api/admin/organizations"]}),e(Z?`/dashboard?org=${Z}`:"/dashboard")},onError:I=>{ee||i({title:"Import failed",description:I.message,variant:"destructive"})}}),te=E?[...N].filter(I=>{const fe=E.find(ue=>ue.externalId===I);return fe&&!fe.alreadyImported}).length:0,D=[{key:"shelterluv",label:"ShelterLuv",icon:s.jsx(ZC,{className:"h-4 w-4"})},{key:"rescuegroups",label:"RescueGroups",icon:s.jsx(et,{className:"h-4 w-4"})}];return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b",children:s.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between gap-4",children:[s.jsxs(ye,{href:"/",className:"flex items-center gap-1.5 font-serif font-bold text-xl text-primary",children:[s.jsxs("span",{className:"flex items-center gap-0.5",children:[s.jsx(Ve,{className:"h-5 w-5"}),s.jsx(et,{className:"h-5 w-5"})]}),"Pawtrait Pals"]}),s.jsx(B,{variant:"ghost",size:"sm",className:"gap-1",asChild:!0,children:s.jsxs(ye,{href:Z?`/dashboard?org=${Z}`:"/dashboard",children:[s.jsx(Er,{className:"h-4 w-4"})," Back to Dashboard"]})})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-2xl font-serif font-bold flex items-center justify-center gap-2",children:[s.jsx(mi,{className:"h-6 w-6 text-primary"}),"Import Pets"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Pull your pets from an existing platform  no re-entering data."})]}),s.jsx("div",{className:"flex justify-center gap-2",children:D.map(I=>s.jsxs(B,{variant:o===I.key?"default":"outline",size:"sm",className:"gap-2",onClick:()=>{l(I.key),$(null),S(null),L(null),w(new Set),le(null)},children:[I.icon," ",I.label]},I.key))}),o==="shelterluv"?s.jsxs(_e,{children:[s.jsxs(Mt,{children:[s.jsx(qt,{className:"text-lg",children:"Connect ShelterLuv"}),s.jsx(_r,{children:"Paste your ShelterLuv API key to pull your animals directly. You can find this in your ShelterLuv admin panel under Configure > Uploads and Integrations."})]}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(He,{placeholder:"Your ShelterLuv API key",value:g,onChange:I=>v(I.target.value),onKeyDown:I=>I.key==="Enter"&&z(),type:"password"}),s.jsxs(B,{onClick:z,disabled:Q||!g.trim(),className:"gap-2 shrink-0",children:[Q?s.jsx(oi,{className:"h-4 w-4 animate-spin"}):s.jsx(hf,{className:"h-4 w-4"}),"Fetch Animals"]})]})})]}):s.jsxs(_e,{children:[s.jsxs(Mt,{children:[s.jsx(qt,{className:"text-lg",children:"Search RescueGroups"}),s.jsx(_r,{children:"Search for your rescue organization to import your animals."})]}),s.jsx(Ee,{children:s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx(He,{placeholder:"Organization name",value:u,onChange:I=>d(I.target.value),onKeyDown:I=>I.key==="Enter"&&ge(),className:"flex-1 min-w-[200px]"}),s.jsxs(B,{onClick:ge,disabled:_||!u.trim(),className:"gap-2 shrink-0",children:[_?s.jsx(oi,{className:"h-4 w-4 animate-spin"}):s.jsx(hf,{className:"h-4 w-4"}),"Search"]})]})})]}),A&&!b&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-lg font-semibold",children:A.length===0?"No organizations found":`Found ${A.length} organization${A.length!==1?"s":""}`}),A.map(I=>s.jsx(_e,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>K(I),children:s.jsxs(Ee,{className:"p-4 flex items-center gap-3",children:[s.jsx(En,{className:"h-8 w-8 text-muted-foreground shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:I.name}),I.location&&s.jsx("p",{className:"text-sm text-muted-foreground",children:I.location})]}),s.jsx(B,{variant:"outline",size:"sm",children:"Select"})]})},I.externalId))]}),Q&&s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(I=>s.jsx(Kt,{className:"aspect-[3/4]"},I))}),E&&!Q&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold",children:[b?.name,"  ",E.length," animal",E.length!==1?"s":""]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select the pets you want to import. ",E.filter(I=>I.alreadyImported).length>0&&s.jsxs("span",{className:"text-primary",children:[E.filter(I=>I.alreadyImported).length," already imported."]})]})]})}),E.length===0?s.jsx(_e,{className:"py-12",children:s.jsxs(Ee,{className:"text-center",children:[s.jsx(Ve,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-muted-foreground",children:"No adoptable animals found for this organization."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(I=>s.jsx(jI,{animal:I,selected:N.has(I.externalId),onToggle:()=>U(I.externalId),onPhotoSelect:fe=>C(ue=>({...ue,[I.externalId]:fe})),selectedPhotoUrl:j[I.externalId]||null},I.externalId))}),te>0&&s.jsx(_e,{className:"border-primary/30 bg-primary/5",children:s.jsxs(Ee,{className:"p-4 space-y-4",children:[ee&&s.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-md bg-destructive/10 border border-destructive/30",children:[s.jsx(Qf,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-destructive",children:"Pet limit reached"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:ee}),s.jsx(B,{variant:"outline",size:"sm",className:"mt-2",asChild:!0,children:s.jsx(ye,{href:Z?`/dashboard?org=${Z}`:"/dashboard",children:"Manage Your Plan"})})]})]}),s.jsxs(B,{onClick:()=>G.mutate(),disabled:G.isPending||!!ee,className:"gap-2 w-full",size:"lg",children:[G.isPending?s.jsx(oi,{className:"h-4 w-4 animate-spin"}):s.jsx(mi,{className:"h-4 w-4"}),"Import ",te," Pet",te!==1?"s":""]})]})})]})]})]})]})}function SI(){return s.jsxs($S,{children:[s.jsx(Lt,{path:"/login",component:yI}),s.jsx(Lt,{path:"/",component:JR}),s.jsx(Lt,{path:"/dashboard",component:XA}),s.jsx(Lt,{path:"/admin",component:n4}),s.jsx(Lt,{path:"/admin/rescue/:id",component:rv}),s.jsx(Lt,{path:"/choose-plan",component:sv}),s.jsx(Lt,{path:"/choose-plan/:orgId",component:sv}),s.jsx(Lt,{path:"/onboarding",component:iv}),s.jsx(Lt,{path:"/onboarding/:orgId",component:iv}),s.jsx(Lt,{path:"/create",component:pA}),s.jsx(Lt,{path:"/gallery",component:mA}),s.jsx(Lt,{path:"/styles",component:s4}),s.jsx(Lt,{path:"/pawfile/:id",component:_A}),s.jsx(Lt,{path:"/settings",component:rv}),s.jsx(Lt,{path:"/rescue/:slug",component:U4}),s.jsx(Lt,{path:"/privacy",component:vI}),s.jsx(Lt,{path:"/terms",component:wI}),s.jsx(Lt,{path:"/sms-opt-in",component:bI}),s.jsx(Lt,{path:"/import",component:NI}),s.jsx(Lt,{component:MT})]})}function kI(){return x.useEffect(()=>{const e=t=>{const r=t.target;r.tagName==="IMG"&&r.classList.contains("protected-image")&&t.preventDefault()};return document.addEventListener("contextmenu",e),()=>document.removeEventListener("contextmenu",e)},[]),s.jsx(nk,{client:tt,children:s.jsx(TT,{defaultTheme:"light",storageKey:"pawtrait-pals-theme",children:s.jsx(PT,{children:s.jsxs(OT,{children:[s.jsx(rP,{}),s.jsx(SI,{}),s.jsx(LT,{}),s.jsx(DT,{})]})})})})}gS.createRoot(document.getElementById("root")).render(s.jsx(kI,{}));
